import{importShared as Ii}from"./__federation_fn_import.js";function nc(e,t){return function(){return e.apply(t,arguments)}}const{toString:vp}=Object.prototype,{getPrototypeOf:ra}=Object,Pi=(e=>t=>{const r=vp.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ot=e=>(e=e.toLowerCase(),t=>Pi(t)===e),Bi=e=>t=>typeof t===e,{isArray:Mr}=Array,un=Bi("undefined");function wp(e){return e!==null&&!un(e)&&e.constructor!==null&&!un(e.constructor)&&Me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ic=ot("ArrayBuffer");function bp(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ic(e.buffer),t}const Ep=Bi("string"),Me=Bi("function"),sc=Bi("number"),Mi=e=>e!==null&&typeof e=="object",Sp=e=>e===!0||e===!1,ni=e=>{if(Pi(e)!=="object")return!1;const t=ra(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rp=ot("Date"),xp=ot("File"),Tp=ot("Blob"),Cp=ot("FileList"),kp=e=>Mi(e)&&Me(e.pipe),Ap=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Me(e.append)&&((t=Pi(e))==="formdata"||t==="object"&&Me(e.toString)&&e.toString()==="[object FormData]"))},Op=ot("URLSearchParams"),Np=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sn(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Mr(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(n=0;n<o;n++)a=s[n],t.call(null,e[a],a,e)}}function oc(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const ac=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis)(),fc=e=>!un(e)&&e!==ac;function Ro(){const{caseless:e}=fc(this)&&this||{},t={},r=(n,i)=>{const s=e&&oc(t,i)||i;ni(t[s])&&ni(n)?t[s]=Ro(t[s],n):ni(n)?t[s]=Ro({},n):Mr(n)?t[s]=n.slice():t[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Sn(arguments[n],r);return t}const Lp=(e,t,r,{allOwnKeys:n}={})=>(Sn(t,(i,s)=>{r&&Me(i)?e[s]=nc(i,r):e[s]=i},{allOwnKeys:n}),e),Dp=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ip=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Pp=(e,t,r,n)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&ra(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Bp=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Mp=e=>{if(!e)return null;if(Mr(e))return e;let t=e.length;if(!sc(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Fp=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ra(Uint8Array)),Up=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},qp=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},$p=ot("HTMLFormElement"),jp=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),nf=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),zp=ot("RegExp"),lc=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Sn(r,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(n[s]=o||i)}),Object.defineProperties(e,n)},Hp=e=>{lc(e,(t,r)=>{if(Me(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Me(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Wp=(e,t)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Mr(e)?n(e):n(String(e).split(t)),r},Vp=()=>{},Zp=(e,t)=>(e=+e,Number.isFinite(e)?e:t),os="abcdefghijklmnopqrstuvwxyz",sf="0123456789",uc={DIGIT:sf,ALPHA:os,ALPHA_DIGIT:os+os.toUpperCase()+sf},Yp=(e=16,t=uc.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function Gp(e){return!!(e&&Me(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Kp=e=>{const t=new Array(10),r=(n,i)=>{if(Mi(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const s=Mr(n)?[]:{};return Sn(n,(o,a)=>{const l=r(o,i+1);!un(l)&&(s[a]=l)}),t[i]=void 0,s}}return n};return r(e,0)},Xp=ot("AsyncFunction"),Jp=e=>e&&(Mi(e)||Me(e))&&Me(e.then)&&Me(e.catch),k={isArray:Mr,isArrayBuffer:ic,isBuffer:wp,isFormData:Ap,isArrayBufferView:bp,isString:Ep,isNumber:sc,isBoolean:Sp,isObject:Mi,isPlainObject:ni,isUndefined:un,isDate:Rp,isFile:xp,isBlob:Tp,isRegExp:zp,isFunction:Me,isStream:kp,isURLSearchParams:Op,isTypedArray:Fp,isFileList:Cp,forEach:Sn,merge:Ro,extend:Lp,trim:Np,stripBOM:Dp,inherits:Ip,toFlatObject:Pp,kindOf:Pi,kindOfTest:ot,endsWith:Bp,toArray:Mp,forEachEntry:Up,matchAll:qp,isHTMLForm:$p,hasOwnProperty:nf,hasOwnProp:nf,reduceDescriptors:lc,freezeMethods:Hp,toObjectSet:Wp,toCamelCase:jp,noop:Vp,toFiniteNumber:Zp,findKey:oc,globalThis:ac,isContextDefined:fc,ALPHABET:uc,generateString:Yp,isSpecCompliantForm:Gp,toJSONObject:Kp,isAsyncFn:Xp,isThenable:Jp};function sr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Ke=[],De=[],Qp=typeof Uint8Array<"u"?Uint8Array:Array,na=!1;function cc(){na=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)Ke[t]=e[t],De[e.charCodeAt(t)]=t;De["-".charCodeAt(0)]=62,De["_".charCodeAt(0)]=63}function e_(e){na||cc();var t,r,n,i,s,o,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[a-2]==="="?2:e[a-1]==="="?1:0,o=new Qp(a*3/4-s),n=s>0?a-4:a;var l=0;for(t=0,r=0;t<n;t+=4,r+=3)i=De[e.charCodeAt(t)]<<18|De[e.charCodeAt(t+1)]<<12|De[e.charCodeAt(t+2)]<<6|De[e.charCodeAt(t+3)],o[l++]=i>>16&255,o[l++]=i>>8&255,o[l++]=i&255;return s===2?(i=De[e.charCodeAt(t)]<<2|De[e.charCodeAt(t+1)]>>4,o[l++]=i&255):s===1&&(i=De[e.charCodeAt(t)]<<10|De[e.charCodeAt(t+1)]<<4|De[e.charCodeAt(t+2)]>>2,o[l++]=i>>8&255,o[l++]=i&255),o}function t_(e){return Ke[e>>18&63]+Ke[e>>12&63]+Ke[e>>6&63]+Ke[e&63]}function r_(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(t_(n));return i.join("")}function of(e){na||cc();for(var t,r=e.length,n=r%3,i="",s=[],o=16383,a=0,l=r-n;a<l;a+=o)s.push(r_(e,a,a+o>l?l:a+o));return n===1?(t=e[r-1],i+=Ke[t>>2],i+=Ke[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=Ke[t>>10],i+=Ke[t>>4&63],i+=Ke[t<<2&63],i+="="),s.push(i),s.join("")}function Fi(e,t,r,n,i){var s,o,a=i*8-n-1,l=(1<<a)-1,f=l>>1,u=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=s*256+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+e[t+h],h+=d,u-=8);if(s===0)s=1-f;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-f}return(p?-1:1)*o*Math.pow(2,s-n)}function hc(e,t,r,n,i,s){var o,a,l,f=s*8-i-1,u=(1<<f)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,c=n?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*l-1)*Math.pow(2,i),o=o+h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=a&255,p+=c,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;e[r+p]=o&255,p+=c,o/=256,f-=8);e[r+p-c]|=g*128}var n_={}.toString,dc=Array.isArray||function(e){return n_.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var pc=50;S.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;var i_=Ei();function Ei(){return S.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function dt(e,t){if(Ei()<t)throw new RangeError("Invalid typed array length");return S.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=S.prototype):(e===null&&(e=new S(t)),e.length=t),e}function S(e,t,r){if(!S.TYPED_ARRAY_SUPPORT&&!(this instanceof S))return new S(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return ia(this,e)}return _c(this,e,t,r)}S.poolSize=8192;S._augment=function(e){return e.__proto__=S.prototype,e};function _c(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?a_(e,t,r,n):typeof t=="string"?o_(e,t,r):f_(e,t)}S.from=function(e,t,r){return _c(null,e,t,r)};S.TYPED_ARRAY_SUPPORT&&(S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array);function gc(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s_(e,t,r,n){return gc(t),t<=0?dt(e,t):r!==void 0?typeof n=="string"?dt(e,t).fill(r,n):dt(e,t).fill(r):dt(e,t)}S.alloc=function(e,t,r){return s_(null,e,t,r)};function ia(e,t){if(gc(t),e=dt(e,t<0?0:sa(t)|0),!S.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}S.allocUnsafe=function(e){return ia(null,e)};S.allocUnsafeSlow=function(e){return ia(null,e)};function o_(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!S.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=mc(t,r)|0;e=dt(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function xo(e,t){var r=t.length<0?0:sa(t.length)|0;e=dt(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function a_(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),S.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=S.prototype):e=xo(e,t),e}function f_(e,t){if(rt(t)){var r=sa(t.length)|0;return e=dt(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||k_(t.length)?dt(e,0):xo(e,t);if(t.type==="Buffer"&&dc(t.data))return xo(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function sa(e){if(e>=Ei())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ei().toString(16)+" bytes");return e|0}function l_(e){return+e!=e&&(e=0),S.alloc(+e)}S.isBuffer=Ot;function rt(e){return!!(e!=null&&e._isBuffer)}S.compare=function(t,r){if(!rt(t)||!rt(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,s=0,o=Math.min(n,i);s<o;++s)if(t[s]!==r[s]){n=t[s],i=r[s];break}return n<i?-1:i<n?1:0};S.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};S.concat=function(t,r){if(!dc(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return S.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=S.allocUnsafe(r),s=0;for(n=0;n<t.length;++n){var o=t[n];if(!rt(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i};function mc(e,t){if(rt(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Si(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Rc(e).length;default:if(n)return Si(e).length;t=(""+t).toLowerCase(),n=!0}}S.byteLength=mc;function u_(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return w_(this,t,r);case"utf8":case"utf-8":return wc(this,t,r);case"ascii":return y_(this,t,r);case"latin1":case"binary":return v_(this,t,r);case"base64":return g_(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b_(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}S.prototype._isBuffer=!0;function Ht(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}S.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)Ht(this,r,r+1);return this};S.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)Ht(this,r,r+3),Ht(this,r+1,r+2);return this};S.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)Ht(this,r,r+7),Ht(this,r+1,r+6),Ht(this,r+2,r+5),Ht(this,r+3,r+4);return this};S.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?wc(this,0,t):u_.apply(this,arguments)};S.prototype.equals=function(t){if(!rt(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:S.compare(this,t)===0};S.prototype.inspect=function(){var t="",r=pc;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};S.prototype.compare=function(t,r,n,i,s){if(!rt(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>t.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===t)return 0;for(var o=s-i,a=n-r,l=Math.min(o,a),f=this.slice(i,s),u=t.slice(r,n),h=0;h<l;++h)if(f[h]!==u[h]){o=f[h],a=u[h];break}return o<a?-1:a<o?1:0};function yc(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=S.from(t,n)),rt(t))return t.length===0?-1:af(e,t,r,n,i);if(typeof t=="number")return t=t&255,S.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):af(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function af(e,t,r,n,i){var s=1,o=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,o/=2,a/=2,r/=2}function l(p,c){return s===1?p[c]:p.readUInt16BE(c*s)}var f;if(i){var u=-1;for(f=r;f<o;f++)if(l(e,f)===l(t,u===-1?0:f-u)){if(u===-1&&(u=f),f-u+1===a)return u*s}else u!==-1&&(f-=f-u),u=-1}else for(r+a>o&&(r=o-a),f=r;f>=0;f--){for(var h=!0,d=0;d<a;d++)if(l(e,f+d)!==l(t,d)){h=!1;break}if(h)return f}return-1}S.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};S.prototype.indexOf=function(t,r,n){return yc(this,t,r,n,!0)};S.prototype.lastIndexOf=function(t,r,n){return yc(this,t,r,n,!1)};function c_(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(o*2,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function h_(e,t,r,n){return $i(Si(t,e.length-r),e,r,n)}function vc(e,t,r,n){return $i(T_(t),e,r,n)}function d_(e,t,r,n){return vc(e,t,r,n)}function p_(e,t,r,n){return $i(Rc(t),e,r,n)}function __(e,t,r,n){return $i(C_(t,e.length-r),e,r,n)}S.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-r;if((n===void 0||n>s)&&(n=s),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return c_(this,t,r,n);case"utf8":case"utf-8":return h_(this,t,r,n);case"ascii":return vc(this,t,r,n);case"latin1":case"binary":return d_(this,t,r,n);case"base64":return p_(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return __(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g_(e,t,r){return t===0&&r===e.length?of(e):of(e.slice(t,r))}function wc(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s=e[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){var l,f,u,h;switch(a){case 1:s<128&&(o=s);break;case 2:l=e[i+1],(l&192)===128&&(h=(s&31)<<6|l&63,h>127&&(o=h));break;case 3:l=e[i+1],f=e[i+2],(l&192)===128&&(f&192)===128&&(h=(s&15)<<12|(l&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:l=e[i+1],f=e[i+2],u=e[i+3],(l&192)===128&&(f&192)===128&&(u&192)===128&&(h=(s&15)<<18|(l&63)<<12|(f&63)<<6|u&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return m_(n)}var ff=4096;function m_(e){var t=e.length;if(t<=ff)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ff));return r}function y_(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function v_(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function w_(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=x_(e[s]);return i}function b_(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}S.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var i;if(S.TYPED_ARRAY_SUPPORT)i=this.subarray(t,r),i.__proto__=S.prototype;else{var s=r-t;i=new S(s,void 0);for(var o=0;o<s;++o)i[o]=this[o+t]}return i};function ye(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||ye(t,r,this.length);for(var i=this[t],s=1,o=0;++o<r&&(s*=256);)i+=this[t+o]*s;return i};S.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||ye(t,r,this.length);for(var i=this[t+--r],s=1;r>0&&(s*=256);)i+=this[t+--r]*s;return i};S.prototype.readUInt8=function(t,r){return r||ye(t,1,this.length),this[t]};S.prototype.readUInt16LE=function(t,r){return r||ye(t,2,this.length),this[t]|this[t+1]<<8};S.prototype.readUInt16BE=function(t,r){return r||ye(t,2,this.length),this[t]<<8|this[t+1]};S.prototype.readUInt32LE=function(t,r){return r||ye(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};S.prototype.readUInt32BE=function(t,r){return r||ye(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};S.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||ye(t,r,this.length);for(var i=this[t],s=1,o=0;++o<r&&(s*=256);)i+=this[t+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};S.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||ye(t,r,this.length);for(var i=r,s=1,o=this[t+--i];i>0&&(s*=256);)o+=this[t+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};S.prototype.readInt8=function(t,r){return r||ye(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};S.prototype.readInt16LE=function(t,r){r||ye(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};S.prototype.readInt16BE=function(t,r){r||ye(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};S.prototype.readInt32LE=function(t,r){return r||ye(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};S.prototype.readInt32BE=function(t,r){return r||ye(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};S.prototype.readFloatLE=function(t,r){return r||ye(t,4,this.length),Fi(this,t,!0,23,4)};S.prototype.readFloatBE=function(t,r){return r||ye(t,4,this.length),Fi(this,t,!1,23,4)};S.prototype.readDoubleLE=function(t,r){return r||ye(t,8,this.length),Fi(this,t,!0,52,8)};S.prototype.readDoubleBE=function(t,r){return r||ye(t,8,this.length),Fi(this,t,!1,52,8)};function Ae(e,t,r,n,i,s){if(!rt(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Ae(this,t,r,n,s,0)}var o=1,a=0;for(this[r]=t&255;++a<n&&(o*=256);)this[r+a]=t/o&255;return r+n};S.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;Ae(this,t,r,n,s,0)}var o=n-1,a=1;for(this[r+o]=t&255;--o>=0&&(a*=256);)this[r+o]=t/a&255;return r+n};S.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,1,255,0),S.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function Ui(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}S.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Ui(this,t,r,!0),r+2};S.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,2,65535,0),S.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Ui(this,t,r,!1),r+2};function qi(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>(n?i:3-i)*8&255}S.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):qi(this,t,r,!0),r+4};S.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,4,4294967295,0),S.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):qi(this,t,r,!1),r+4};S.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r|0,!i){var s=Math.pow(2,8*n-1);Ae(this,t,r,n,s-1,-s)}var o=0,a=1,l=0;for(this[r]=t&255;++o<n&&(a*=256);)t<0&&l===0&&this[r+o-1]!==0&&(l=1),this[r+o]=(t/a>>0)-l&255;return r+n};S.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r|0,!i){var s=Math.pow(2,8*n-1);Ae(this,t,r,n,s-1,-s)}var o=n-1,a=1,l=0;for(this[r+o]=t&255;--o>=0&&(a*=256);)t<0&&l===0&&this[r+o+1]!==0&&(l=1),this[r+o]=(t/a>>0)-l&255;return r+n};S.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,1,127,-128),S.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};S.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Ui(this,t,r,!0),r+2};S.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,2,32767,-32768),S.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Ui(this,t,r,!1),r+2};S.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,4,2147483647,-2147483648),S.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):qi(this,t,r,!0),r+4};S.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||Ae(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),S.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):qi(this,t,r,!1),r+4};function bc(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ec(e,t,r,n,i){return i||bc(e,t,r,4),hc(e,t,r,n,23,4),r+4}S.prototype.writeFloatLE=function(t,r,n){return Ec(this,t,r,!0,n)};S.prototype.writeFloatBE=function(t,r,n){return Ec(this,t,r,!1,n)};function Sc(e,t,r,n,i){return i||bc(e,t,r,8),hc(e,t,r,n,52,8),r+8}S.prototype.writeDoubleLE=function(t,r,n){return Sc(this,t,r,!0,n)};S.prototype.writeDoubleBE=function(t,r,n){return Sc(this,t,r,!1,n)};S.prototype.copy=function(t,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var s=i-n,o;if(this===t&&n<r&&r<i)for(o=s-1;o>=0;--o)t[o+r]=this[o+n];else if(s<1e3||!S.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+r]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),r);return s};S.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),t.length===1){var s=t.charCodeAt(0);s<256&&(t=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!S.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{var a=rt(t)?t:Si(new S(t,i).toString()),l=a.length;for(o=0;o<n-r;++o)this[o+r]=a[o%l]}return this};var E_=/[^+\/0-9A-Za-z-_]/g;function S_(e){if(e=R_(e).replace(E_,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function R_(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function x_(e){return e<16?"0"+e.toString(16):e.toString(16)}function Si(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function T_(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function C_(e,t){for(var r,n,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function Rc(e){return e_(S_(e))}function $i(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function k_(e){return e!==e}function Ot(e){return e!=null&&(!!e._isBuffer||xc(e)||A_(e))}function xc(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function A_(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&xc(e.slice(0,0))}const O_=Object.freeze(Object.defineProperty({__proto__:null,Buffer:S,INSPECT_MAX_BYTES:pc,SlowBuffer:l_,isBuffer:Ot,kMaxLength:i_},Symbol.toStringTag,{value:"Module"}));function G(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}k.inherits(G,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Tc=G.prototype,Cc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Cc[e]={value:e}});Object.defineProperties(G,Cc);Object.defineProperty(Tc,"isAxiosError",{value:!0});G.from=(e,t,r,n,i,s)=>{const o=Object.create(Tc);return k.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),G.call(o,e.message,t,r,n,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const N_=null;function To(e){return k.isPlainObject(e)||k.isArray(e)}function kc(e){return k.endsWith(e,"[]")?e.slice(0,-2):e}function lf(e,t,r){return e?e.concat(t).map(function(i,s){return i=kc(i),!r&&s?"["+i+"]":i}).join(r?".":""):t}function L_(e){return k.isArray(e)&&!e.some(To)}const D_=k.toFlatObject(k,{},null,function(t){return/^is[A-Z]/.test(t)});function ji(e,t,r){if(!k.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=k.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,w){return!k.isUndefined(w[g])});const n=r.metaTokens,i=r.visitor||u,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(t);if(!k.isFunction(i))throw new TypeError("visitor must be a function");function f(c){if(c===null)return"";if(k.isDate(c))return c.toISOString();if(!l&&k.isBlob(c))throw new G("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(c)||k.isTypedArray(c)?l&&typeof Blob=="function"?new Blob([c]):S.from(c):c}function u(c,g,w){let _=c;if(c&&!w&&typeof c=="object"){if(k.endsWith(g,"{}"))g=n?g:g.slice(0,-2),c=JSON.stringify(c);else if(k.isArray(c)&&L_(c)||(k.isFileList(c)||k.endsWith(g,"[]"))&&(_=k.toArray(c)))return g=kc(g),_.forEach(function(m,E){!(k.isUndefined(m)||m===null)&&t.append(o===!0?lf([g],E,s):o===null?g:g+"[]",f(m))}),!1}return To(c)?!0:(t.append(lf(w,g,s),f(c)),!1)}const h=[],d=Object.assign(D_,{defaultVisitor:u,convertValue:f,isVisitable:To});function p(c,g){if(!k.isUndefined(c)){if(h.indexOf(c)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(c),k.forEach(c,function(_,b){(!(k.isUndefined(_)||_===null)&&i.call(t,_,k.isString(b)?b.trim():b,g,d))===!0&&p(_,g?g.concat(b):[b])}),h.pop()}}if(!k.isObject(e))throw new TypeError("data must be an object");return p(e),t}function uf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function oa(e,t){this._pairs=[],e&&ji(e,this,t)}const Ac=oa.prototype;Ac.append=function(t,r){this._pairs.push([t,r])};Ac.toString=function(t){const r=t?function(n){return t.call(this,n,uf)}:uf;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function I_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Oc(e,t,r){if(!t)return e;const n=r&&r.encode||I_,i=r&&r.serialize;let s;if(i?s=i(t,r):s=k.isURLSearchParams(t)?t.toString():new oa(t,r).toString(n),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class P_{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){k.forEach(this.handlers,function(n){n!==null&&t(n)})}}const cf=P_,Nc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},B_=typeof URLSearchParams<"u"?URLSearchParams:oa,M_=typeof FormData<"u"?FormData:null,F_=typeof Blob<"u"?Blob:null,U_=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),q_=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Je={isBrowser:!0,classes:{URLSearchParams:B_,FormData:M_,Blob:F_},isStandardBrowserEnv:U_,isStandardBrowserWebWorkerEnv:q_,protocols:["http","https","file","blob","url","data"]};function $_(e,t){return ji(e,new Je.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return Je.isNode&&k.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function j_(e){return k.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function z_(e){const t={},r=Object.keys(e);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}function Lc(e){function t(r,n,i,s){let o=r[s++];const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&k.isArray(i)?i.length:o,l?(k.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!k.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],s)&&k.isArray(i[o])&&(i[o]=z_(i[o])),!a)}if(k.isFormData(e)&&k.isFunction(e.entries)){const r={};return k.forEachEntry(e,(n,i)=>{t(j_(n),i,r,0)}),r}return null}function H_(e,t,r){if(k.isString(e))try{return(t||JSON.parse)(e),k.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const aa={transitional:Nc,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=k.isObject(t);if(s&&k.isHTMLForm(t)&&(t=new FormData(t)),k.isFormData(t))return i&&i?JSON.stringify(Lc(t)):t;if(k.isArrayBuffer(t)||k.isBuffer(t)||k.isStream(t)||k.isFile(t)||k.isBlob(t))return t;if(k.isArrayBufferView(t))return t.buffer;if(k.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return $_(t,this.formSerializer).toString();if((a=k.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ji(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),H_(t)):t}],transformResponse:[function(t){const r=this.transitional||aa.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&k.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?G.from(a,G.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Je.classes.FormData,Blob:Je.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],e=>{aa.headers[e]={}});const fa=aa,W_=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),V_=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&W_[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},hf=Symbol("internals");function Vr(e){return e&&String(e).trim().toLowerCase()}function ii(e){return e===!1||e==null?e:k.isArray(e)?e.map(ii):String(e)}function Z_(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Y_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function as(e,t,r,n,i){if(k.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!k.isString(t)){if(k.isString(n))return t.indexOf(n)!==-1;if(k.isRegExp(n))return n.test(t)}}function G_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function K_(e,t){const r=k.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,s,o){return this[n].call(this,t,i,s,o)},configurable:!0})})}class zi{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function s(a,l,f){const u=Vr(l);if(!u)throw new Error("header name must be a non-empty string");const h=k.findKey(i,u);(!h||i[h]===void 0||f===!0||f===void 0&&i[h]!==!1)&&(i[h||l]=ii(a))}const o=(a,l)=>k.forEach(a,(f,u)=>s(f,u,l));return k.isPlainObject(t)||t instanceof this.constructor?o(t,r):k.isString(t)&&(t=t.trim())&&!Y_(t)?o(V_(t),r):t!=null&&s(r,t,n),this}get(t,r){if(t=Vr(t),t){const n=k.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return Z_(i);if(k.isFunction(r))return r.call(this,i,n);if(k.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Vr(t),t){const n=k.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||as(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function s(o){if(o=Vr(o),o){const a=k.findKey(n,o);a&&(!r||as(n,n[a],a,r))&&(delete n[a],i=!0)}}return k.isArray(t)?t.forEach(s):s(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!t||as(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const r=this,n={};return k.forEach(this,(i,s)=>{const o=k.findKey(n,s);if(o){r[o]=ii(i),delete r[s];return}const a=t?G_(s):String(s).trim();a!==s&&delete r[s],r[a]=ii(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return k.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&k.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[hf]=this[hf]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Vr(o);n[a]||(K_(i,o),n[a]=!0)}return k.isArray(t)?t.forEach(s):s(t),this}}zi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(zi.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});k.freezeMethods(zi);const gt=zi;function fs(e,t){const r=this||fa,n=t||r,i=gt.from(n.headers);let s=n.data;return k.forEach(e,function(a){s=a.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Dc(e){return!!(e&&e.__CANCEL__)}function Rn(e,t,r){G.call(this,e??"canceled",G.ERR_CANCELED,t,r),this.name="CanceledError"}k.inherits(Rn,G,{__CANCEL__:!0});function X_(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new G("Request failed with status code "+r.status,[G.ERR_BAD_REQUEST,G.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const J_=Je.isStandardBrowserEnv?function(){return{write:function(r,n,i,s,o,a){const l=[];l.push(r+"="+encodeURIComponent(n)),k.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),k.isString(s)&&l.push("path="+s),k.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Q_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eg(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Ic(e,t){return e&&!Q_(t)?eg(e,t):t}const tg=Je.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(s){let o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){const a=k.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function rg(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ng(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const f=Date.now(),u=n[s];o||(o=f),r[i]=l,n[i]=f;let h=s,d=0;for(;h!==i;)d+=r[h++],h=h%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),f-o<t)return;const p=u&&f-u;return p?Math.round(d*1e3/p):void 0}}function df(e,t){let r=0;const n=ng(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-r,l=n(a),f=s<=o;r=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&f?(o-s)/l:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}const ig=typeof XMLHttpRequest<"u",sg=ig&&function(e){return new Promise(function(r,n){let i=e.data;const s=gt.from(e.headers).normalize(),o=e.responseType;let a;function l(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let f;k.isFormData(i)&&(Je.isStandardBrowserEnv||Je.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?k.isString(f=s.getContentType())&&s.setContentType(f.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let u=new XMLHttpRequest;if(e.auth){const c=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(c+":"+g))}const h=Ic(e.baseURL,e.url);u.open(e.method.toUpperCase(),Oc(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function d(){if(!u)return;const c=gt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),w={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:c,config:e,request:u};X_(function(b){r(b),l()},function(b){n(b),l()},w),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(n(new G("Request aborted",G.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new G("Network Error",G.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const w=e.transitional||Nc;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),n(new G(g,w.clarifyTimeoutError?G.ETIMEDOUT:G.ECONNABORTED,e,u)),u=null},Je.isStandardBrowserEnv){const c=tg(h)&&e.xsrfCookieName&&J_.read(e.xsrfCookieName);c&&s.set(e.xsrfHeaderName,c)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&k.forEach(s.toJSON(),function(g,w){u.setRequestHeader(w,g)}),k.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",df(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",df(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=c=>{u&&(n(!c||c.type?new Rn(null,e,u):c),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const p=rg(h);if(p&&Je.protocols.indexOf(p)===-1){n(new G("Unsupported protocol "+p+":",G.ERR_BAD_REQUEST,e));return}u.send(i||null)})},Co={http:N_,xhr:sg};k.forEach(Co,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const pf=e=>`- ${e}`,og=e=>k.isFunction(e)||e===null||e===!1,Pc={getAdapter:e=>{e=k.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let s=0;s<t;s++){r=e[s];let o;if(n=r,!og(r)&&(n=Co[(o=String(r)).toLowerCase()],n===void 0))throw new G(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+s]=n}if(!n){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(pf).join(`
`):" "+pf(s[0]):"as no adapter specified";throw new G("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Co};function ls(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rn(null,e)}function _f(e){return ls(e),e.headers=gt.from(e.headers),e.data=fs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Pc.getAdapter(e.adapter||fa.adapter)(e).then(function(n){return ls(e),n.data=fs.call(e,e.transformResponse,n),n.headers=gt.from(n.headers),n},function(n){return Dc(n)||(ls(e),n&&n.response&&(n.response.data=fs.call(e,e.transformResponse,n.response),n.response.headers=gt.from(n.response.headers))),Promise.reject(n)})}const gf=e=>e instanceof gt?e.toJSON():e;function Lr(e,t){t=t||{};const r={};function n(f,u,h){return k.isPlainObject(f)&&k.isPlainObject(u)?k.merge.call({caseless:h},f,u):k.isPlainObject(u)?k.merge({},u):k.isArray(u)?u.slice():u}function i(f,u,h){if(k.isUndefined(u)){if(!k.isUndefined(f))return n(void 0,f,h)}else return n(f,u,h)}function s(f,u){if(!k.isUndefined(u))return n(void 0,u)}function o(f,u){if(k.isUndefined(u)){if(!k.isUndefined(f))return n(void 0,f)}else return n(void 0,u)}function a(f,u,h){if(h in t)return n(f,u);if(h in e)return n(void 0,f)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(f,u)=>i(gf(f),gf(u),!0)};return k.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||i,d=h(e[u],t[u],u);k.isUndefined(d)&&h!==a||(r[u]=d)}),r}const Bc="1.6.0",la={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{la[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const mf={};la.transitional=function(t,r,n){function i(s,o){return"[Axios v"+Bc+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(t===!1)throw new G(i(o," has been removed"+(r?" in "+r:"")),G.ERR_DEPRECATED);return r&&!mf[o]&&(mf[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};function ag(e,t,r){if(typeof e!="object")throw new G("options must be an object",G.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new G("option "+s+" must be "+l,G.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new G("Unknown option "+s,G.ERR_BAD_OPTION)}}const ko={assertOptions:ag,validators:la},bt=ko.validators;class Ri{constructor(t){this.defaults=t,this.interceptors={request:new cf,response:new cf}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Lr(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&ko.assertOptions(n,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),i!=null&&(k.isFunction(i)?r.paramsSerializer={serialize:i}:ko.assertOptions(i,{encode:bt.function,serialize:bt.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&k.merge(s.common,s[r.method]);s&&k.forEach(["delete","get","head","post","put","patch","common"],c=>{delete s[c]}),r.headers=gt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const f=[];this.interceptors.response.forEach(function(g){f.push(g.fulfilled,g.rejected)});let u,h=0,d;if(!l){const c=[_f.bind(this),void 0];for(c.unshift.apply(c,a),c.push.apply(c,f),d=c.length,u=Promise.resolve(r);h<d;)u=u.then(c[h++],c[h++]);return u}d=a.length;let p=r;for(h=0;h<d;){const c=a[h++],g=a[h++];try{p=c(p)}catch(w){g.call(this,w);break}}try{u=_f.call(this,p)}catch(c){return Promise.reject(c)}for(h=0,d=f.length;h<d;)u=u.then(f[h++],f[h++]);return u}getUri(t){t=Lr(this.defaults,t);const r=Ic(t.baseURL,t.url);return Oc(r,t.params,t.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(t){Ri.prototype[t]=function(r,n){return this.request(Lr(n||{},{method:t,url:r,data:(n||{}).data}))}});k.forEach(["post","put","patch"],function(t){function r(n){return function(s,o,a){return this.request(Lr(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Ri.prototype[t]=r(),Ri.prototype[t+"Form"]=r(!0)});const si=Ri;class ua{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},t(function(s,o,a){n.reason||(n.reason=new Rn(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new ua(function(i){t=i}),cancel:t}}}const fg=ua;function lg(e){return function(r){return e.apply(null,r)}}function ug(e){return k.isObject(e)&&e.isAxiosError===!0}const Ao={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ao).forEach(([e,t])=>{Ao[t]=e});const cg=Ao;function Mc(e){const t=new si(e),r=nc(si.prototype.request,t);return k.extend(r,si.prototype,t,{allOwnKeys:!0}),k.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Mc(Lr(e,i))},r}const le=Mc(fa);le.Axios=si;le.CanceledError=Rn;le.CancelToken=fg;le.isCancel=Dc;le.VERSION=Bc;le.toFormData=ji;le.AxiosError=G;le.Cancel=le.CanceledError;le.all=function(t){return Promise.all(t)};le.spread=lg;le.isAxiosError=ug;le.mergeConfig=Lr;le.AxiosHeaders=gt;le.formToJSON=e=>Lc(k.isHTMLForm(e)?new FormData(e):e);le.getAdapter=Pc.getAdapter;le.HttpStatusCode=cg;le.default=le;const mr=le,nt=Object.create(null);nt.open="0";nt.close="1";nt.ping="2";nt.pong="3";nt.message="4";nt.upgrade="5";nt.noop="6";const oi=Object.create(null);Object.keys(nt).forEach(e=>{oi[nt[e]]=e});const Oo={type:"error",data:"parser error"},Fc=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Uc=typeof ArrayBuffer=="function",qc=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ca=({type:e,data:t},r,n)=>Fc&&t instanceof Blob?r?n(t):yf(t,n):Uc&&(t instanceof ArrayBuffer||qc(t))?r?n(t):yf(new Blob([t]),n):n(nt[e]+(t||"")),yf=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function vf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let us;function hg(e,t){if(Fc&&e.data instanceof Blob)return e.data.arrayBuffer().then(vf).then(t);if(Uc&&(e.data instanceof ArrayBuffer||qc(e.data)))return t(vf(e.data));ca(e,!1,r=>{us||(us=new TextEncoder),t(us.encode(r))})}const wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<wf.length;e++)rn[wf.charCodeAt(e)]=e;const dg=e=>{let t=e.length*.75,r=e.length,n,i=0,s,o,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),u=new Uint8Array(f);for(n=0;n<r;n+=4)s=rn[e.charCodeAt(n)],o=rn[e.charCodeAt(n+1)],a=rn[e.charCodeAt(n+2)],l=rn[e.charCodeAt(n+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|a>>2,u[i++]=(a&3)<<6|l&63;return f},pg=typeof ArrayBuffer=="function",ha=(e,t)=>{if(typeof e!="string")return{type:"message",data:$c(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:_g(e.substring(1),t)}:oi[r]?e.length>1?{type:oi[r],data:e.substring(1)}:{type:oi[r]}:Oo},_g=(e,t)=>{if(pg){const r=dg(e);return $c(r,t)}else return{base64:!0,data:e}},$c=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jc=String.fromCharCode(30),gg=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((s,o)=>{ca(s,!1,a=>{n[o]=a,++i===r&&t(n.join(jc))})})},mg=(e,t)=>{const r=e.split(jc),n=[];for(let i=0;i<r.length;i++){const s=ha(r[i],t);if(n.push(s),s.type==="error")break}return n};function yg(){return new TransformStream({transform(e,t){hg(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let cs;function Dn(e){return e.reduce((t,r)=>t+r.length,0)}function In(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function vg(e,t){cs||(cs=new TextDecoder);const r=[];let n=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(Dn(r)<1)break;const l=In(r,1);s=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Dn(r)<2)break;const l=In(r,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Dn(r)<8)break;const l=In(r,8),f=new DataView(l.buffer,l.byteOffset,l.length),u=f.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(Oo);break}i=u*Math.pow(2,32)+f.getUint32(4),n=3}else{if(Dn(r)<i)break;const l=In(r,i);a.enqueue(ha(s?l:cs.decode(l),t)),n=0}if(i===0||i>e){a.enqueue(Oo);break}}}})}const zc=4;function ae(e){if(e)return wg(e)}function wg(e){for(var t in ae.prototype)e[t]=ae.prototype[t];return e}ae.prototype.on=ae.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ae.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ae.prototype.off=ae.prototype.removeListener=ae.prototype.removeAllListeners=ae.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ae.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};ae.prototype.emitReserved=ae.prototype.emit;ae.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ae.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Pe=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function Hc(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const bg=Pe.setTimeout,Eg=Pe.clearTimeout;function Hi(e,t){t.useNativeTimers?(e.setTimeoutFn=bg.bind(Pe),e.clearTimeoutFn=Eg.bind(Pe)):(e.setTimeoutFn=Pe.setTimeout.bind(Pe),e.clearTimeoutFn=Pe.clearTimeout.bind(Pe))}const Sg=1.33;function Rg(e){return typeof e=="string"?xg(e):Math.ceil((e.byteLength||e.size)*Sg)}function xg(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Tg(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Cg(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}let kg=class extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}},da=class extends ae{constructor(t){super(),this.writable=!1,Hi(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new kg(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=ha(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Tg(t);return r.length?"?"+r:""}};const Wc="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),No=64,Ag={};let bf=0,Pn=0,Ef;function Sf(e){let t="";do t=Wc[e%No]+t,e=Math.floor(e/No);while(e>0);return t}function Vc(){const e=Sf(+new Date);return e!==Ef?(bf=0,Ef=e):e+"."+Sf(bf++)}for(;Pn<No;Pn++)Ag[Wc[Pn]]=Pn;let Zc=!1;try{Zc=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Og=Zc;function Yc(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Og))return new XMLHttpRequest}catch{}if(!t)try{return new Pe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Ng(){}const Lg=function(){return new Yc({xdomain:!1}).responseType!=null}();let Dg=class extends da{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}const r=t&&t.forceBase64;this.supportsBinary=Lg&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};mg(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,gg(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Vc()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Cr(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}},Cr=class ai extends ae{constructor(t,r){super(),Hi(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;const r=Hc(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const n=this.xhr=new Yc(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=ai.requestsCount++,ai.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Ng,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ai.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Cr.requestsCount=0;Cr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Rf);else if(typeof addEventListener=="function"){const e="onpagehide"in Pe?"pagehide":"unload";addEventListener(e,Rf,!1)}}function Rf(){for(let e in Cr.requests)Cr.requests.hasOwnProperty(e)&&Cr.requests[e].abort()}const pa=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0))(),Bn=Pe.WebSocket||Pe.MozWebSocket,xf=!0,Ig="arraybuffer",Tf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";let Pg=class extends da{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=Tf?{}:Hc(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=xf&&!Tf?r?new Bn(t,r):new Bn(t):new Bn(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;ca(n,this.supportsBinary,s=>{const o={};try{xf&&this.ws.send(s)}catch{}i&&pa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Vc()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}check(){return!!Bn}};class Bg extends da{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const r=vg(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),i=yg();i.readable.pipeTo(t.writable),this.writer=i.writable.getWriter();const s=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),s())}).catch(a=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this.writer.write(o).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;this.writer.write(n).then(()=>{i&&pa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const Mg={websocket:Pg,webtransport:Bg,polling:Dg},Fg=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ug=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lo(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=Fg.exec(e||""),s={},o=14;for(;o--;)s[Ug[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=qg(s,s.path),s.queryKey=$g(s,s.query),s}function qg(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function $g(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}let Gc=class Er extends ae{constructor(t,r={}){super(),this.binaryType=Ig,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=Lo(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=Lo(r.host).host),Hi(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Cg(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=zc,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new Mg[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Er.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;Er.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Er.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function s(){n||(n=!0,u(),r.close(),r=null)}const o=h=>{const d=new Error("probe error: "+h);d.transport=r.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function l(){o("socket closed")}function f(h){r&&h.name!==r.name&&s()}const u=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",l),this.off("upgrading",f)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",l),this.once("upgrading",f),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Er.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=Rg(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){Er.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const i=t.length;for(;n<i;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}};Gc.protocol=zc;function jg(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Lo(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const zg=typeof ArrayBuffer=="function",Hg=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Kc=Object.prototype.toString,Wg=typeof Blob=="function"||typeof Blob<"u"&&Kc.call(Blob)==="[object BlobConstructor]",Vg=typeof File=="function"||typeof File<"u"&&Kc.call(File)==="[object FileConstructor]";function _a(e){return zg&&(e instanceof ArrayBuffer||Hg(e))||Wg&&e instanceof Blob||Vg&&e instanceof File}function fi(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(fi(e[r]))return!0;return!1}if(_a(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return fi(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&fi(e[r]))return!0;return!1}function Zg(e){const t=[],r=e.data,n=e;return n.data=Do(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Do(e,t){if(!e)return e;if(_a(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Do(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Do(e[n],t));return r}return e}function Yg(e,t){return e.data=Io(e.data,t),delete e.attachments,e}function Io(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Io(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Io(e[r],t));return e}const Gg=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Kg=5;var Z;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));let Xg=class{constructor(t){this.replacer=t}encode(t){return(t.type===Z.EVENT||t.type===Z.ACK)&&fi(t)?this.encodeAsBinary({type:t.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Z.BINARY_EVENT||t.type===Z.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Zg(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}};function Cf(e){return Object.prototype.toString.call(e)==="[object Object]"}let Jg=class Xc extends ae{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Z.BINARY_EVENT;n||r.type===Z.BINARY_ACK?(r.type=n?Z.EVENT:Z.ACK,this.reconstructor=new Qg(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(_a(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Z[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Z.BINARY_EVENT||n.type===Z.BINARY_ACK){const s=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(s,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(s,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(s,r+1))}if(t.charAt(++r)){const s=this.tryParse(t.substr(r));if(Xc.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Z.CONNECT:return Cf(r);case Z.DISCONNECT:return r===void 0;case Z.CONNECT_ERROR:return typeof r=="string"||Cf(r);case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Gg.indexOf(r[0])===-1);case Z.ACK:case Z.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},Qg=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Yg(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};const em=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jg,Encoder:Xg,get PacketType(){return Z},protocol:Kg},Symbol.toStringTag,{value:"Module"}));function $e(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const tm=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let Jc=class extends ae{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[$e(t,"open",this.onopen.bind(this)),$e(t,"packet",this.onpacket.bind(this)),$e(t,"error",this.onerror.bind(this)),$e(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(tm.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:Z.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,a=r.pop();this._registerAckCallback(o,a),n.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(s),r.apply(this,[null,...o])}}emitWithAck(t,...r){const n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{r.push((o,a)=>n?o?s(o):i(a):i(o)),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Z.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Z.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(t);break;case Z.ACK:case Z.BINARY_ACK:this.onack(t);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:Z.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}};function Fr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Fr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Fr.prototype.reset=function(){this.attempts=0};Fr.prototype.setMin=function(e){this.ms=e};Fr.prototype.setMax=function(e){this.max=e};Fr.prototype.setJitter=function(e){this.jitter=e};let Po=class extends ae{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Hi(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||em;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Gc(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=$e(r,"open",function(){n.onopen(),t&&t()}),s=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},o=$e(r,"error",s);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),r.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push($e(t,"ping",this.onping.bind(this)),$e(t,"data",this.ondata.bind(this)),$e(t,"error",this.onerror.bind(this)),$e(t,"close",this.onclose.bind(this)),$e(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){pa(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Jc(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};const Zr={};function li(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=jg(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=Zr[i]&&s in Zr[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new Po(n,t):(Zr[i]||(Zr[i]=new Po(n,t)),l=Zr[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(li,{Manager:Po,Socket:Jc,io:li,connect:li});function Qc(){throw new Error("setTimeout has not been defined")}function eh(){throw new Error("clearTimeout has not been defined")}var Et=Qc,St=eh;typeof globalThis.setTimeout=="function"&&(Et=setTimeout);typeof globalThis.clearTimeout=="function"&&(St=clearTimeout);function th(e){if(Et===setTimeout)return setTimeout(e,0);if((Et===Qc||!Et)&&setTimeout)return Et=setTimeout,setTimeout(e,0);try{return Et(e,0)}catch{try{return Et.call(null,e,0)}catch{return Et.call(this,e,0)}}}function rm(e){if(St===clearTimeout)return clearTimeout(e);if((St===eh||!St)&&clearTimeout)return St=clearTimeout,clearTimeout(e);try{return St(e)}catch{try{return St.call(null,e)}catch{return St.call(this,e)}}}var pt=[],kr=!1,Wt,ui=-1;function nm(){!kr||!Wt||(kr=!1,Wt.length?pt=Wt.concat(pt):ui=-1,pt.length&&rh())}function rh(){if(!kr){var e=th(nm);kr=!0;for(var t=pt.length;t;){for(Wt=pt,pt=[];++ui<t;)Wt&&Wt[ui].run();ui=-1,t=pt.length}Wt=null,kr=!1,rm(e)}}function Oe(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];pt.push(new nh(e,t)),pt.length===1&&!kr&&th(rh)}function nh(e,t){this.fun=e,this.array=t}nh.prototype.run=function(){this.fun.apply(null,this.array)};var im="browser",sm="browser",om=!0,am={},fm=[],lm="",um={},cm={},hm={};function or(){}var dm=or,pm=or,_m=or,gm=or,mm=or,ym=or,vm=or;function wm(e){throw new Error("process.binding is not supported")}function bm(){return"/"}function Em(e){throw new Error("process.chdir is not supported")}function Sm(){return 0}var Sr=globalThis.performance||{},Rm=Sr.now||Sr.mozNow||Sr.msNow||Sr.oNow||Sr.webkitNow||function(){return new Date().getTime()};function xm(e){var t=Rm.call(Sr)*.001,r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r=r-e[0],n=n-e[1],n<0&&(r--,n+=1e9)),[r,n]}var Tm=new Date;function Cm(){var e=new Date,t=e-Tm;return t/1e3}var B={nextTick:Oe,title:im,browser:om,env:am,argv:fm,version:lm,versions:um,on:dm,addListener:pm,once:_m,off:gm,removeListener:mm,removeAllListeners:ym,emit:vm,binding:wm,cwd:bm,chdir:Em,umask:Sm,hrtime:xm,platform:sm,release:cm,config:hm,uptime:Cm};const km="/home/chris/livestream-app/node_modules/bufferutil";var Mn={exports:{}},Fn={exports:{}};function Am(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const Ce={},Om=Object.freeze(Object.defineProperty({__proto__:null,default:Ce},Symbol.toStringTag,{value:"Module"})),Nm=sr(Om);function ih(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var Lm=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ga=function(e){return Lm.exec(e).slice(1)};function xi(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;e=n+"/"+e,t=n.charAt(0)==="/"}return e=ih(va(e.split("/"),function(i){return!!i}),!t).join("/"),(t?"/":"")+e||"."}function ma(e){var t=ya(e),r=Im(e,-1)==="/";return e=ih(va(e.split("/"),function(n){return!!n}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function ya(e){return e.charAt(0)==="/"}function sh(){var e=Array.prototype.slice.call(arguments,0);return ma(va(e,function(t,r){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function oh(e,t){e=xi(e).substr(1),t=xi(t).substr(1);function r(f){for(var u=0;u<f.length&&f[u]==="";u++);for(var h=f.length-1;h>=0&&f[h]==="";h--);return u>h?[]:f.slice(u,h-u+1)}for(var n=r(e.split("/")),i=r(t.split("/")),s=Math.min(n.length,i.length),o=s,a=0;a<s;a++)if(n[a]!==i[a]){o=a;break}for(var l=[],a=o;a<n.length;a++)l.push("..");return l=l.concat(i.slice(o)),l.join("/")}var ah="/",fh=":";function lh(e){var t=ga(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function uh(e,t){var r=ga(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function ch(e){return ga(e)[3]}const Dm={extname:ch,basename:uh,dirname:lh,sep:ah,delimiter:fh,relative:oh,join:sh,isAbsolute:ya,normalize:ma,resolve:xi};function va(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var Im="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};const Pm=Object.freeze(Object.defineProperty({__proto__:null,basename:uh,default:Dm,delimiter:fh,dirname:lh,extname:ch,isAbsolute:ya,join:sh,normalize:ma,relative:oh,resolve:xi,sep:ah},Symbol.toStringTag,{value:"Module"})),Bm=sr(Pm);var Un;function hh(){if(typeof Un>"u"){var e=new ArrayBuffer(2),t=new Uint8Array(e),r=new Uint16Array(e);if(t[0]=1,t[1]=2,r[0]===258)Un="BE";else if(r[0]===513)Un="LE";else throw new Error("unable to figure out endianess")}return Un}function dh(){return typeof globalThis.location<"u"?globalThis.location.hostname:""}function ph(){return[]}function _h(){return 0}function gh(){return Number.MAX_VALUE}function mh(){return Number.MAX_VALUE}function yh(){return[]}function vh(){return"Browser"}function wh(){return typeof globalThis.navigator<"u"?globalThis.navigator.appVersion:""}function bh(){}function Eh(){}function Mm(){return"javascript"}function Fm(){return"browser"}function wa(){return"/tmp"}var Sh=wa,Rh=`
`;const Um={EOL:Rh,tmpdir:Sh,tmpDir:wa,networkInterfaces:bh,getNetworkInterfaces:Eh,release:wh,type:vh,cpus:yh,totalmem:mh,freemem:gh,uptime:_h,loadavg:ph,hostname:dh,endianness:hh},qm=Object.freeze(Object.defineProperty({__proto__:null,EOL:Rh,arch:Mm,cpus:yh,default:Um,endianness:hh,freemem:gh,getNetworkInterfaces:Eh,hostname:dh,loadavg:ph,networkInterfaces:bh,platform:Fm,release:wh,tmpDir:wa,tmpdir:Sh,totalmem:mh,type:vh,uptime:_h},Symbol.toStringTag,{value:"Module"})),$m=sr(qm);var hs,kf;function jm(){if(kf)return hs;kf=1;var e=Nm,t=Bm,r=$m,n=typeof __webpack_require__=="function"?__non_webpack_require__:Am,i=B.config&&B.config.variables||{},s=!!{}.PREBUILDS_ONLY,o=B.versions.modules,a=L()?"electron":O()?"node-webkit":"node",l={}.npm_config_arch||r.arch(),f={}.npm_config_platform||r.platform(),u={}.LIBC||(F(f)?"musl":"glibc"),h={}.ARM_VERSION||(l==="arm64"?"8":i.arm_version)||"",d=(B.versions.uv||"").split(".")[0];hs=p;function p(P){return n(p.resolve(P))}p.resolve=p.path=function(P){P=t.resolve(P||".");try{var U=n(t.join(P,"package.json")).name.toUpperCase().replace(/-/g,"_");({})[U+"_PREBUILD"]&&(P={}[U+"_PREBUILD"])}catch{}if(!s){var q=g(t.join(P,"build/Release"),w);if(q)return q;var X=g(t.join(P,"build/Debug"),w);if(X)return X}var oe=qe(P);if(oe)return oe;var H=qe(t.dirname(B.execPath));if(H)return H;var te=["platform="+f,"arch="+l,"runtime="+a,"abi="+o,"uv="+d,h?"armv="+h:"","libc="+u,"node="+B.versions.node,B.versions.electron?"electron="+B.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+te+`
    loaded from: `+P+`
`);function qe(Ne){var wt=c(t.join(Ne,"prebuilds")).map(_),ue=wt.filter(b(f,l)).sort(m)[0];if(ue){var Te=t.join(Ne,"prebuilds",ue.name),ge=c(Te).map(E),Ve=ge.filter(T(a,o)),dr=Ve.sort(A(a))[0];if(dr)return t.join(Te,dr.file)}}};function c(P){try{return e.readdirSync(P)}catch{return[]}}function g(P,U){var q=c(P).filter(U);return q[0]&&t.join(P,q[0])}function w(P){return/\.node$/.test(P)}function _(P){var U=P.split("-");if(U.length===2){var q=U[0],X=U[1].split("+");if(q&&X.length&&X.every(Boolean))return{name:P,platform:q,architectures:X}}}function b(P,U){return function(q){return q==null||q.platform!==P?!1:q.architectures.includes(U)}}function m(P,U){return P.architectures.length-U.architectures.length}function E(P){var U=P.split("."),q=U.pop(),X={file:P,specificity:0};if(q==="node"){for(var oe=0;oe<U.length;oe++){var H=U[oe];if(H==="node"||H==="electron"||H==="node-webkit")X.runtime=H;else if(H==="napi")X.napi=!0;else if(H.slice(0,3)==="abi")X.abi=H.slice(3);else if(H.slice(0,2)==="uv")X.uv=H.slice(2);else if(H.slice(0,4)==="armv")X.armv=H.slice(4);else if(H==="glibc"||H==="musl")X.libc=H;else continue;X.specificity++}return X}}function T(P,U){return function(q){return!(q==null||q.runtime!==P&&!C(q)||q.abi!==U&&!q.napi||q.uv&&q.uv!==d||q.armv&&q.armv!==h||q.libc&&q.libc!==u)}}function C(P){return P.runtime==="node"&&P.napi}function A(P){return function(U,q){return U.runtime!==q.runtime?U.runtime===P?-1:1:U.abi!==q.abi?U.abi?-1:1:U.specificity!==q.specificity?U.specificity>q.specificity?-1:1:0}}function O(){return!!(B.versions&&B.versions.nw)}function L(){return B.versions&&B.versions.electron||{}.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function F(P){return P==="linux"&&e.existsSync("/etc/alpine-release")}return p.parseTags=E,p.matchTags=T,p.compareTags=A,p.parseTuple=_,p.matchTuple=b,p.compareTuples=m,hs}var Af;function xh(){return Af||(Af=1,typeof B.addon=="function"?Fn.exports=B.addon.bind(B):Fn.exports=jm()),Fn.exports}var ds,Of;function zm(){return Of||(Of=1,ds={mask:(r,n,i,s,o)=>{for(var a=0;a<o;a++)i[s+a]=r[a]^n[a&3]},unmask:(r,n)=>{const i=r.length;for(var s=0;s<i;s++)r[s]^=n[s&3]}}),ds}var Nf;function Hm(){if(Nf)return Mn.exports;Nf=1;try{Mn.exports=xh()(km)}catch{Mn.exports=zm()}return Mn.exports}const Wm="/home/chris/livestream-app/node_modules/utf-8-validate";var qn={exports:{}},ps,Lf;function Vm(){if(Lf)return ps;Lf=1;function e(t){const r=t.length;let n=0;for(;n<r;)if(!(t[n]&128))n++;else if((t[n]&224)===192){if(n+1===r||(t[n+1]&192)!==128||(t[n]&254)===192)return!1;n+=2}else if((t[n]&240)===224){if(n+2>=r||(t[n+1]&192)!==128||(t[n+2]&192)!==128||t[n]===224&&(t[n+1]&224)===128||t[n]===237&&(t[n+1]&224)===160)return!1;n+=3}else if((t[n]&248)===240){if(n+3>=r||(t[n+1]&192)!==128||(t[n+2]&192)!==128||(t[n+3]&192)!==128||t[n]===240&&(t[n+1]&240)===128||t[n]===244&&t[n+1]>143||t[n]>244)return!1;n+=4}else return!1;return!0}return ps=e,ps}var Df;function Zm(){if(Df)return qn.exports;Df=1;try{qn.exports=xh()(Wm)}catch{qn.exports=Vm()}return qn.exports}var yr={exports:{}},_s,If;function Th(){return If||(If=1,_s=function(t,r){var n="000000000"+t;return n.substr(n.length-r)}),_s}var gs,Pf;function Ym(){if(Pf)return gs;Pf=1;var e=Th(),t=typeof window=="object"?window:self,r=Object.keys(t).length,n=navigator.mimeTypes?navigator.mimeTypes.length:0,i=e((n+navigator.userAgent.length).toString(36)+r.toString(36),4);return gs=function(){return i},gs}var ms,Bf;function Gm(){if(Bf)return ms;Bf=1;var e,t=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof self<"u"&&self.crypto;if(t){var r=Math.pow(2,32)-1;e=function(){return Math.abs(t.getRandomValues(new Uint32Array(1))[0]/r)}}else e=Math.random;return ms=e,ms}var ys,Mf;function Km(){if(Mf)return ys;Mf=1;var e=Ym(),t=Th(),r=Gm(),n=0,i=4,s=36,o=Math.pow(s,i);function a(){return t((r()*o<<0).toString(s),i)}function l(){return n=n<o?n:0,n++,n-1}function f(){var u="c",h=new Date().getTime().toString(s),d=t(l().toString(s),i),p=e(),c=a()+a();return u+h+d+p+c}return f.slug=function(){var h=new Date().getTime().toString(36),d=l().toString(36).slice(-4),p=e().slice(0,1)+e().slice(-1),c=a().slice(-2);return h.slice(-2)+d+p+c},f.isCuid=function(h){return typeof h!="string"?!1:!!h.startsWith("c")},f.isSlug=function(h){if(typeof h!="string")return!1;var d=h.length;return d>=7&&d<=10},f.fingerprint=e,ys=f,ys}var $n={exports:{}},Ff;function Ur(){return Ff||(Ff=1,typeof Object.create=="function"?$n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:$n.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),$n.exports}var vs,Uf;function Xm(){return Uf||(Uf=1,vs=function(t,r,n){var i,s=t.length;if(!(r>=s||n===0)){n=r+n>s?s-r:n;var o=s-n;for(i=r;i<o;++i)t[i]=t[i+n];t.length=o}}),vs}var Bo;typeof Object.create=="function"?Bo=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:Bo=function(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t};const _e=Bo;var Jm=/%[sdj%]/g;function Wi(e){if(!Ut(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(ze(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(e).replace(Jm,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),o=n[r];r<i;o=n[++r])_t(o)||!yt(o)?s+=" "+o:s+=" "+ze(o);return s}function Vi(e,t){if(Qe(globalThis.process))return function(){return Vi(e,t).apply(this,arguments)};if(B.noDeprecation===!0)return e;var r=!1;function n(){if(!r){if(B.throwDeprecation)throw new Error(t);B.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n}var jn={},ws;function ba(e){if(Qe(ws)&&(ws={}.NODE_DEBUG||""),e=e.toUpperCase(),!jn[e])if(new RegExp("\\b"+e+"\\b","i").test(ws)){var t=0;jn[e]=function(){var r=Wi.apply(null,arguments);console.error("%s %d: %s",e,t,r)}}else jn[e]=function(){};return jn[e]}function ze(e,t){var r={seen:[],stylize:e0};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),Zi(t)?r.showHidden=t:t&&Ta(r,t),Qe(r.showHidden)&&(r.showHidden=!1),Qe(r.depth)&&(r.depth=2),Qe(r.colors)&&(r.colors=!1),Qe(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Qm),Ti(r,e,r.depth)}ze.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};ze.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Qm(e,t){var r=ze.styles[t];return r?"\x1B["+ze.colors[r][0]+"m"+e+"\x1B["+ze.colors[r][1]+"m":e}function e0(e,t){return e}function t0(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function Ti(e,t,r){if(e.customInspect&&t&&Gt(t.inspect)&&t.inspect!==ze&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return Ut(n)||(n=Ti(e,n,r)),n}var i=r0(e,t);if(i)return i;var s=Object.keys(t),o=t0(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),Ar(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return bs(t);if(s.length===0){if(Gt(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Yt(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Dr(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ar(t))return bs(t)}var l="",f=!1,u=["{","}"];if(Ea(t)&&(f=!0,u=["[","]"]),Gt(t)){var h=t.name?": "+t.name:"";l=" [Function"+h+"]"}if(Yt(t)&&(l=" "+RegExp.prototype.toString.call(t)),Dr(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Ar(t)&&(l=" "+bs(t)),s.length===0&&(!f||t.length==0))return u[0]+l+u[1];if(r<0)return Yt(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var d;return f?d=n0(e,t,r,o,s):d=s.map(function(p){return Mo(e,t,r,o,p,f)}),e.seen.pop(),i0(d,l,u)}function r0(e,t){if(Qe(t))return e.stylize("undefined","undefined");if(Ut(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Ra(t))return e.stylize(""+t,"number");if(Zi(t))return e.stylize(""+t,"boolean");if(_t(t))return e.stylize("null","null")}function bs(e){return"["+Error.prototype.toString.call(e)+"]"}function n0(e,t,r,n,i){for(var s=[],o=0,a=t.length;o<a;++o)Oh(t,String(o))?s.push(Mo(e,t,r,n,String(o),!0)):s.push("");return i.forEach(function(l){l.match(/^\d+$/)||s.push(Mo(e,t,r,n,l,!0))}),s}function Mo(e,t,r,n,i,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?l.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),Oh(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(_t(r)?a=Ti(e,l.value,null):a=Ti(e,l.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(f){return"  "+f}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(f){return"   "+f}).join(`
`))):a=e.stylize("[Circular]","special")),Qe(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function i0(e,t,r){var n=e.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function Ea(e){return Array.isArray(e)}function Zi(e){return typeof e=="boolean"}function _t(e){return e===null}function Sa(e){return e==null}function Ra(e){return typeof e=="number"}function Ut(e){return typeof e=="string"}function Ch(e){return typeof e=="symbol"}function Qe(e){return e===void 0}function Yt(e){return yt(e)&&xa(e)==="[object RegExp]"}function yt(e){return typeof e=="object"&&e!==null}function Dr(e){return yt(e)&&xa(e)==="[object Date]"}function Ar(e){return yt(e)&&(xa(e)==="[object Error]"||e instanceof Error)}function Gt(e){return typeof e=="function"}function Ci(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}function kh(e){return S.isBuffer(e)}function xa(e){return Object.prototype.toString.call(e)}function Es(e){return e<10?"0"+e.toString(10):e.toString(10)}var s0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function o0(){var e=new Date,t=[Es(e.getHours()),Es(e.getMinutes()),Es(e.getSeconds())].join(":");return[e.getDate(),s0[e.getMonth()],t].join(" ")}function Ah(){console.log("%s - %s",o0(),Wi.apply(null,arguments))}function Ta(e,t){if(!t||!yt(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Oh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const a0={inherits:_e,_extend:Ta,log:Ah,isBuffer:kh,isPrimitive:Ci,isFunction:Gt,isError:Ar,isDate:Dr,isObject:yt,isRegExp:Yt,isUndefined:Qe,isSymbol:Ch,isString:Ut,isNumber:Ra,isNullOrUndefined:Sa,isNull:_t,isBoolean:Zi,isArray:Ea,inspect:ze,deprecate:Vi,format:Wi,debuglog:ba},f0=Object.freeze(Object.defineProperty({__proto__:null,_extend:Ta,debuglog:ba,default:a0,deprecate:Vi,format:Wi,inherits:_e,inspect:ze,isArray:Ea,isBoolean:Zi,isBuffer:kh,isDate:Dr,isError:Ar,isFunction:Gt,isNull:_t,isNullOrUndefined:Sa,isNumber:Ra,isObject:yt,isPrimitive:Ci,isRegExp:Yt,isString:Ut,isSymbol:Ch,isUndefined:Qe,log:Ah},Symbol.toStringTag,{value:"Module"}));function qf(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var l0=Object.prototype.hasOwnProperty,$f=Object.keys||function(e){var t=[];for(var r in e)l0.call(e,r)&&t.push(r);return t},jf=Array.prototype.slice,Ss;function Nh(){return typeof Ss<"u"?Ss:Ss=function(){return function(){}.name==="foo"}()}function zf(e){return Object.prototype.toString.call(e)}function Hf(e){return Ot(e)||typeof globalThis.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?!!(e instanceof DataView||e.buffer&&e.buffer instanceof ArrayBuffer):!1}function xe(e,t){e||Re(e,!0,t,"==",cn)}var u0=/\s*function\s+([^\(\s]*)\s*/;function Lh(e){if(Gt(e)){if(Nh())return e.name;var t=e.toString(),r=t.match(u0);return r&&r[1]}}xe.AssertionError=Yi;function Yi(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c0(this),this.generatedMessage=!0);var t=e.stackStartFunction||Re;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=Lh(t),s=n.indexOf(`
`+i);if(s>=0){var o=n.indexOf(`
`,s+1);n=n.substring(o+1)}this.stack=n}}}_e(Yi,Error);function Wf(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function Vf(e){if(Nh()||!Gt(e))return ze(e);var t=Lh(e),r=t?": "+t:"";return"[Function"+r+"]"}function c0(e){return Wf(Vf(e.actual),128)+" "+e.operator+" "+Wf(Vf(e.expected),128)}function Re(e,t,r,n,i){throw new Yi({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}xe.fail=Re;function cn(e,t){e||Re(e,!0,t,"==",cn)}xe.ok=cn;xe.equal=Ca;function Ca(e,t,r){e!=t&&Re(e,t,r,"==",Ca)}xe.notEqual=ka;function ka(e,t,r){e==t&&Re(e,t,r,"!=",ka)}xe.deepEqual=Aa;function Aa(e,t,r){Ir(e,t,!1)||Re(e,t,r,"deepEqual",Aa)}xe.deepStrictEqual=Oa;function Oa(e,t,r){Ir(e,t,!0)||Re(e,t,r,"deepStrictEqual",Oa)}function Ir(e,t,r,n){if(e===t)return!0;if(Ot(e)&&Ot(t))return qf(e,t)===0;if(Dr(e)&&Dr(t))return e.getTime()===t.getTime();if(Yt(e)&&Yt(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if((e===null||typeof e!="object")&&(t===null||typeof t!="object"))return r?e===t:e==t;if(Hf(e)&&Hf(t)&&zf(e)===zf(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return qf(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0;if(Ot(e)!==Ot(t))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(e);return i!==-1&&i===n.expected.indexOf(t)?!0:(n.actual.push(e),n.expected.push(t),h0(e,t,r,n))}function Zf(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function h0(e,t,r,n){if(e==null||t===null||t===void 0)return!1;if(Ci(e)||Ci(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=Zf(e),s=Zf(t);if(i&&!s||!i&&s)return!1;if(i)return e=jf.call(e),t=jf.call(t),Ir(e,t,r);var o=$f(e),a=$f(t),l,f;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),f=o.length-1;f>=0;f--)if(o[f]!==a[f])return!1;for(f=o.length-1;f>=0;f--)if(l=o[f],!Ir(e[l],t[l],r,n))return!1;return!0}xe.notDeepEqual=Na;function Na(e,t,r){Ir(e,t,!1)&&Re(e,t,r,"notDeepEqual",Na)}xe.notDeepStrictEqual=La;function La(e,t,r){Ir(e,t,!0)&&Re(e,t,r,"notDeepStrictEqual",La)}xe.strictEqual=Da;function Da(e,t,r){e!==t&&Re(e,t,r,"===",Da)}xe.notStrictEqual=Ia;function Ia(e,t,r){e===t&&Re(e,t,r,"!==",Ia)}function Yf(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function d0(e){var t;try{e()}catch(r){t=r}return t}function Dh(e,t,r,n){var i;if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof r=="string"&&(n=r,r=null),i=d0(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&Re(i,r,"Missing expected exception"+n);var s=typeof n=="string",o=!e&&Ar(i),a=!e&&i&&!r;if((o&&s&&Yf(i,r)||a)&&Re(i,r,"Got unwanted exception"+n),e&&i&&r&&!Yf(i,r)||!e&&i)throw i}xe.throws=Ih;function Ih(e,t,r){Dh(!0,e,t,r)}xe.doesNotThrow=Ph;function Ph(e,t,r){Dh(!1,e,t,r)}xe.ifError=Bh;function Bh(e){if(e)throw e}const p0=Object.freeze(Object.defineProperty({__proto__:null,AssertionError:Yi,assert:cn,deepEqual:Aa,deepStrictEqual:Oa,default:xe,doesNotThrow:Ph,equal:Ca,fail:Re,ifError:Bh,notDeepEqual:Na,notDeepStrictEqual:La,notEqual:ka,notStrictEqual:Ia,ok:cn,strictEqual:Da,throws:Ih},Symbol.toStringTag,{value:"Module"})),Pa=sr(p0);var Rs,Gf;function _0(){if(Gf)return Rs;Gf=1;var e=Pa,t=typeof window<"u";function r(){var i;return t?(window._nanoScheduler||(window._nanoScheduler=new n(!0)),i=window._nanoScheduler):i=new n,i}function n(i){this.hasWindow=i,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}return n.prototype.push=function(i){e.equal(typeof i,"function","nanoscheduler.push: cb should be type function"),this.queue.push(i),this.schedule()},n.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var i=this;this.method(function(s){for(var o;i.queue.length&&s.timeRemaining()>0;)o=i.queue.shift(),o(s);i.scheduled=!1,i.queue.length&&i.schedule()})}},n.prototype.setTimeout=function(i){setTimeout(i,0,{timeRemaining:function(){return 1}})},Rs=r,Rs}var xs,Kf;function g0(){if(Kf)return xs;Kf=1;var e=_0()(),t=Pa,r;n.disabled=!0;try{r=window.performance,n.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!r.mark}catch{}xs=n;function n(s){if(t.equal(typeof s,"string","nanotiming: name should be type string"),n.disabled)return i;var o=(r.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,a="start-"+o+"-"+s;r.mark(a);function l(f){var u="end-"+o+"-"+s;r.mark(u),e.push(function(){var h=null;try{var d=s+" ["+o+"]";r.measure(d,a,u),r.clearMarks(a),r.clearMarks(u)}catch(p){h=p}f&&f(h,s)})}return l.uuid=o,l}function i(s){s&&e.push(function(){s(new Error("nanotiming: performance API unavailable"))})}return xs}var Ts,Xf;function m0(){if(Xf)return Ts;Xf=1;var e=Xm(),t=g0(),r=Pa;Ts=n;function n(i){if(!(this instanceof n))return new n(i);this._name=i||"nanobus",this._starListeners=[],this._listeners={}}return n.prototype.emit=function(i){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.emit: eventName should be type string or symbol");for(var s=[],o=1,a=arguments.length;o<a;o++)s.push(arguments[o]);var l=t(this._name+"('"+i.toString()+"')"),f=this._listeners[i];return f&&f.length>0&&this._emit(this._listeners[i],s),this._starListeners.length>0&&this._emit(this._starListeners,i,s,l.uuid),l(),this},n.prototype.on=n.prototype.addListener=function(i,s){return r.ok(typeof i=="string"||typeof i=="symbol","nanobus.on: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.on: listener should be type function"),i==="*"?this._starListeners.push(s):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].push(s)),this},n.prototype.prependListener=function(i,s){return r.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.prependListener: listener should be type function"),i==="*"?this._starListeners.unshift(s):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].unshift(s)),this},n.prototype.once=function(i,s){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.once: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.once: listener should be type function");var o=this;this.on(i,a);function a(){s.apply(o,arguments),o.removeListener(i,a)}return this},n.prototype.prependOnceListener=function(i,s){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.prependOnceListener: listener should be type function");var o=this;this.prependListener(i,a);function a(){s.apply(o,arguments),o.removeListener(i,a)}return this},n.prototype.removeListener=function(i,s){if(r.ok(typeof i=="string"||typeof i=="symbol","nanobus.removeListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.removeListener: listener should be type function"),i==="*")return this._starListeners=this._starListeners.slice(),o(this._starListeners,s);return typeof this._listeners[i]<"u"&&(this._listeners[i]=this._listeners[i].slice()),o(this._listeners[i],s);function o(a,l){if(a){var f=a.indexOf(l);if(f!==-1)return e(a,f,1),!0}}},n.prototype.removeAllListeners=function(i){return i?i==="*"?this._starListeners=[]:this._listeners[i]=[]:(this._starListeners=[],this._listeners={}),this},n.prototype.listeners=function(i){var s=i!=="*"?this._listeners[i]:this._starListeners,o=[];if(s)for(var a=s.length,l=0;l<a;l++)o.push(s[l]);return o},n.prototype._emit=function(i,s,o,a){if(!(typeof i>"u")&&i.length!==0){o===void 0&&(o=s,s=null),s&&(a!==void 0?o=[s].concat(o,a):o=[s].concat(o));for(var l=i.length,f=0;f<l;f++){var u=i[f];u.apply(u,o)}}},Ts}var zn={exports:{}},Cs,Jf;function y0(){if(Jf)return Cs;Jf=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;Cs=function(u,h){h=h||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return h.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(h){var d=parseFloat(h[1]),p=(h[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var h=Math.abs(u);return h>=n?Math.round(u/n)+"d":h>=r?Math.round(u/r)+"h":h>=t?Math.round(u/t)+"m":h>=e?Math.round(u/e)+"s":u+"ms"}function l(u){var h=Math.abs(u);return h>=n?f(u,h,n,"day"):h>=r?f(u,h,r,"hour"):h>=t?f(u,h,t,"minute"):h>=e?f(u,h,e,"second"):u+" ms"}function f(u,h,d,p){var c=h>=d*1.5;return Math.round(u/d)+" "+p+(c?"s":"")}return Cs}var ks,Qf;function v0(){if(Qf)return ks;Qf=1;function e(t){n.debug=n,n.default=n,n.coerce=f,n.disable=o,n.enable=s,n.enabled=a,n.humanize=y0(),n.destroy=u,Object.keys(t).forEach(h=>{n[h]=t[h]}),n.names=[],n.skips=[],n.formatters={};function r(h){let d=0;for(let p=0;p<h.length;p++)d=(d<<5)-d+h.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=r;function n(h){let d,p=null,c,g;function w(..._){if(!w.enabled)return;const b=w,m=Number(new Date),E=m-(d||m);b.diff=E,b.prev=d,b.curr=m,d=m,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let T=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(A,O)=>{if(A==="%%")return"%";T++;const L=n.formatters[O];if(typeof L=="function"){const F=_[T];A=L.call(b,F),_.splice(T,1),T--}return A}),n.formatArgs.call(b,_),(b.log||n.log).apply(b,_)}return w.namespace=h,w.useColors=n.useColors(),w.color=n.selectColor(h),w.extend=i,w.destroy=n.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(c!==n.namespaces&&(c=n.namespaces,g=n.enabled(h)),g),set:_=>{p=_}}),typeof n.init=="function"&&n.init(w),w}function i(h,d){const p=n(this.namespace+(typeof d>"u"?":":d)+h);return p.log=this.log,p}function s(h){n.save(h),n.namespaces=h,n.names=[],n.skips=[];let d;const p=(typeof h=="string"?h:"").split(/[\s,]+/),c=p.length;for(d=0;d<c;d++)p[d]&&(h=p[d].replace(/\*/g,".*?"),h[0]==="-"?n.skips.push(new RegExp("^"+h.slice(1)+"$")):n.names.push(new RegExp("^"+h+"$")))}function o(){const h=[...n.names.map(l),...n.skips.map(l).map(d=>"-"+d)].join(",");return n.enable(""),h}function a(h){if(h[h.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(h))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(h))return!0;return!1}function l(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function f(h){return h instanceof Error?h.stack||h.message:h}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return ks=e,ks}var el;function w0(){return el||(el=1,function(e,t){t.formatArgs=n,t.save=i,t.load=s,t.useColors=r,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;l.splice(1,0,f,"color: inherit");let u=0,h=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(h=u))}),l.splice(h,0,f)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function s(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof B<"u"&&"env"in B&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=v0()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(zn,zn.exports)),zn.exports}var As,tl;function b0(){return tl||(tl=1,As=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}),As}var Hn={exports:{}},Wn={exports:{}};const xn=sr(O_);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var rl;function Mh(){return rl||(rl=1,function(e,t){var r=xn,n=r.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(o,a,l){return n(o,a,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=n(o);return a!==void 0?typeof l=="string"?f.fill(a,l):f.fill(a):f.fill(0),f},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(Wn,Wn.exports)),Wn.exports}var nl;function E0(){if(nl)return Hn.exports;nl=1;var e=65536,t=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=Mh().Buffer,i=globalThis.crypto||globalThis.msCrypto;i&&i.getRandomValues?Hn.exports=s:Hn.exports=r;function s(o,a){if(o>t)throw new RangeError("requested too many random bytes");var l=n.allocUnsafe(o);if(o>0)if(o>e)for(var f=0;f<o;f+=e)i.getRandomValues(l.slice(f,f+e));else i.getRandomValues(l);return typeof a=="function"?B.nextTick(function(){a(null,l)}):l}return Hn.exports}var Vn={exports:{}},S0;function Dt(){}Dt.prototype=Object.create(null);function j(){j.init.call(this)}j.EventEmitter=j;j.usingDomains=!1;j.prototype.domain=void 0;j.prototype._events=void 0;j.prototype._maxListeners=void 0;j.defaultMaxListeners=10;j.init=function(){this.domain=null,j.usingDomains&&S0.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Dt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};j.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function Fh(e){return e._maxListeners===void 0?j.defaultMaxListeners:e._maxListeners}j.prototype.getMaxListeners=function(){return Fh(this)};function R0(e,t,r){if(t)e.call(r);else for(var n=e.length,i=Tn(e,n),s=0;s<n;++s)i[s].call(r)}function x0(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,s=Tn(e,i),o=0;o<i;++o)s[o].call(r,n)}function T0(e,t,r,n,i){if(t)e.call(r,n,i);else for(var s=e.length,o=Tn(e,s),a=0;a<s;++a)o[a].call(r,n,i)}function C0(e,t,r,n,i,s){if(t)e.call(r,n,i,s);else for(var o=e.length,a=Tn(e,o),l=0;l<o;++l)a[l].call(r,n,i,s)}function k0(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,s=Tn(e,i),o=0;o<i;++o)s[o].apply(r,n)}j.prototype.emit=function(t){var r,n,i,s,o,a,l,f=t==="error";if(a=this._events,a)f=f&&a.error==null;else if(!f)return!1;if(l=this.domain,f){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var u=new Error('Uncaught, unspecified "error" event. ('+r+")");throw u.context=r,u}return!1}if(n=a[t],!n)return!1;var h=typeof n=="function";switch(i=arguments.length,i){case 1:R0(n,h,this);break;case 2:x0(n,h,this,arguments[1]);break;case 3:T0(n,h,this,arguments[1],arguments[2]);break;case 4:C0(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),o=1;o<i;o++)s[o-1]=arguments[o];k0(n,h,this,s)}return!0};function Uh(e,t,r,n){var i,s,o;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=new Dt,e._eventsCount=0),!o)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=Fh(e),i&&i>0&&o.length>i)){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,A0(a)}return e}function A0(e){typeof console.warn=="function"?console.warn(e):console.log(e)}j.prototype.addListener=function(t,r){return Uh(this,t,r,!1)};j.prototype.on=j.prototype.addListener;j.prototype.prependListener=function(t,r){return Uh(this,t,r,!0)};function qh(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}j.prototype.once=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,qh(this,t,r)),this};j.prototype.prependOnceListener=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,qh(this,t,r)),this};j.prototype.removeListener=function(t,r){var n,i,s,o,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new Dt:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length;o-- >0;)if(n[o]===r||n[o].listener&&n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new Dt,this;delete i[t]}else O0(n,s);i.removeListener&&this.emit("removeListener",t,a||r)}return this};j.prototype.removeAllListeners=function(t){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new Dt,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new Dt:delete n[t]),this;if(arguments.length===0){for(var i=Object.keys(n),s=0,o;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new Dt,this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r)do this.removeListener(t,r[r.length-1]);while(r[0]);return this};j.prototype.listeners=function(t){var r,n,i=this._events;return i?(r=i[t],r?typeof r=="function"?n=[r.listener||r]:n=N0(r):n=[]):n=[],n};j.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):$h.call(e,t)};j.prototype.listenerCount=$h;function $h(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}j.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function O0(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function Tn(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function N0(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}const L0=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:j,default:j},Symbol.toStringTag,{value:"Module"})),jh=sr(L0);var Os,il;function zh(){return il||(il=1,Os=jh.EventEmitter),Os}const Hh=sr(f0);var Ns,sl;function D0(){if(sl)return Ns;sl=1;function e(c,g){var w=Object.keys(c);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(c);g&&(_=_.filter(function(b){return Object.getOwnPropertyDescriptor(c,b).enumerable})),w.push.apply(w,_)}return w}function t(c){for(var g=1;g<arguments.length;g++){var w=arguments[g]!=null?arguments[g]:{};g%2?e(Object(w),!0).forEach(function(_){r(c,_,w[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(w)):e(Object(w)).forEach(function(_){Object.defineProperty(c,_,Object.getOwnPropertyDescriptor(w,_))})}return c}function r(c,g,w){return g=o(g),g in c?Object.defineProperty(c,g,{value:w,enumerable:!0,configurable:!0,writable:!0}):c[g]=w,c}function n(c,g){if(!(c instanceof g))throw new TypeError("Cannot call a class as a function")}function i(c,g){for(var w=0;w<g.length;w++){var _=g[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(c,o(_.key),_)}}function s(c,g,w){return g&&i(c.prototype,g),w&&i(c,w),Object.defineProperty(c,"prototype",{writable:!1}),c}function o(c){var g=a(c,"string");return typeof g=="symbol"?g:String(g)}function a(c,g){if(typeof c!="object"||c===null)return c;var w=c[Symbol.toPrimitive];if(w!==void 0){var _=w.call(c,g||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(c)}var l=xn,f=l.Buffer,u=Hh,h=u.inspect,d=h&&h.custom||"inspect";function p(c,g,w){f.prototype.copy.call(c,g,w)}return Ns=function(){function c(){n(this,c),this.head=null,this.tail=null,this.length=0}return s(c,[{key:"push",value:function(w){var _={data:w,next:null};this.length>0?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(w){var _={data:w,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var _=this.head,b=""+_.data;_=_.next;)b+=w+_.data;return b}},{key:"concat",value:function(w){if(this.length===0)return f.alloc(0);for(var _=f.allocUnsafe(w>>>0),b=this.head,m=0;b;)p(b.data,_,m),m+=b.data.length,b=b.next;return _}},{key:"consume",value:function(w,_){var b;return w<this.head.data.length?(b=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?b=this.shift():b=_?this._getString(w):this._getBuffer(w),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var _=this.head,b=1,m=_.data;for(w-=m.length;_=_.next;){var E=_.data,T=w>E.length?E.length:w;if(T===E.length?m+=E:m+=E.slice(0,w),w-=T,w===0){T===E.length?(++b,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=E.slice(T));break}++b}return this.length-=b,m}},{key:"_getBuffer",value:function(w){var _=f.allocUnsafe(w),b=this.head,m=1;for(b.data.copy(_),w-=b.data.length;b=b.next;){var E=b.data,T=w>E.length?E.length:w;if(E.copy(_,_.length-w,0,T),w-=T,w===0){T===E.length?(++m,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=E.slice(T));break}++m}return this.length-=m,_}},{key:d,value:function(w,_){return h(this,t(t({},_),{},{depth:0,customInspect:!1}))}}]),c}(),Ns}var Ls,ol;function Wh(){if(ol)return Ls;ol=1;function e(o,a){var l=this,f=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return f||u?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,B.nextTick(i,this,o)):B.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(h){!a&&h?l._writableState?l._writableState.errorEmitted?B.nextTick(r,l):(l._writableState.errorEmitted=!0,B.nextTick(t,l,h)):B.nextTick(t,l,h):a?(B.nextTick(r,l),a(h)):B.nextTick(r,l)}),this)}function t(o,a){i(o,a),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var l=o._readableState,f=o._writableState;l&&l.autoDestroy||f&&f.autoDestroy?o.destroy(a):o.emit("error",a)}return Ls={destroy:e,undestroy:n,errorOrDestroy:s},Ls}var Ds={},al;function qr(){if(al)return Ds;al=1;function e(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var t={};function r(a,l,f){f||(f=Error);function u(d,p,c){return typeof l=="string"?l:l(d,p,c)}var h=function(d){e(p,d);function p(c,g,w){return d.call(this,u(c,g,w))||this}return p}(f);h.prototype.name=f.name,h.prototype.code=a,t[a]=h}function n(a,l){if(Array.isArray(a)){var f=a.length;return a=a.map(function(u){return String(u)}),f>2?"one of ".concat(l," ").concat(a.slice(0,f-1).join(", "),", or ")+a[f-1]:f===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,f){return a.substr(!f||f<0?0:+f,l.length)===l}function s(a,l,f){return(f===void 0||f>a.length)&&(f=a.length),a.substring(f-l.length,f)===l}function o(a,l,f){return typeof f!="number"&&(f=0),f+l.length>a.length?!1:a.indexOf(l,f)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,l,f){var u;typeof l=="string"&&i(l,"not ")?(u="must not be",l=l.replace(/^not /,"")):u="must be";var h;if(s(a," argument"))h="The ".concat(a," ").concat(u," ").concat(n(l,"type"));else{var d=o(a,".")?"property":"argument";h='The "'.concat(a,'" ').concat(d," ").concat(u," ").concat(n(l,"type"))}return h+=". Received type ".concat(typeof f),h},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ds.codes=t,Ds}var Is,fl;function Vh(){if(fl)return Is;fl=1;var e=qr().codes.ERR_INVALID_OPT_VALUE;function t(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,o){var a=t(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?s:"highWaterMark";throw new e(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return Is={getHighWaterMark:r},Is}var Ps,ll;function I0(){if(ll)return Ps;ll=1,Ps=e;function e(r,n){if(t("noDeprecation"))return r;var i=!1;function s(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function t(r){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return Ps}var Bs,ul;function Zh(){if(ul)return Bs;ul=1,Bs=O;function e(x){var R=this;this.next=null,this.entry=null,this.finish=function(){dr(R,x)}}var t;O.WritableState=C;var r={deprecate:I0()},n=zh(),i=xn.Buffer,s=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(x){return i.from(x)}function a(x){return i.isBuffer(x)||x instanceof s}var l=Wh(),f=Vh(),u=f.getHighWaterMark,h=qr().codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,c=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,w=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,m=h.ERR_UNKNOWN_ENCODING,E=l.errorOrDestroy;Ur()(O,n);function T(){}function C(x,R,D){t=t||Pr(),x=x||{},typeof D!="boolean"&&(D=R instanceof t),this.objectMode=!!x.objectMode,D&&(this.objectMode=this.objectMode||!!x.writableObjectMode),this.highWaterMark=u(this,x,"writableHighWaterMark",D),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=x.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=x.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){H(R,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=x.emitClose!==!1,this.autoDestroy=!!x.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}C.prototype.getBuffer=function(){for(var R=this.bufferedRequest,D=[];R;)D.push(R),R=R.next;return D},function(){try{Object.defineProperty(C.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var A;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(R){return A.call(this,R)?!0:this!==O?!1:R&&R._writableState instanceof C}})):A=function(R){return R instanceof this};function O(x){t=t||Pr();var R=this instanceof t;if(!R&&!A.call(O,this))return new O(x);this._writableState=new C(x,this,R),this.writable=!0,x&&(typeof x.write=="function"&&(this._write=x.write),typeof x.writev=="function"&&(this._writev=x.writev),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.final=="function"&&(this._final=x.final)),n.call(this)}O.prototype.pipe=function(){E(this,new g)};function L(x,R){var D=new b;E(x,D),B.nextTick(R,D)}function F(x,R,D,$){var V;return D===null?V=new _:typeof D!="string"&&!R.objectMode&&(V=new d("chunk",["string","Buffer"],D)),V?(E(x,V),B.nextTick($,V),!1):!0}O.prototype.write=function(x,R,D){var $=this._writableState,V=!1,y=!$.objectMode&&a(x);return y&&!i.isBuffer(x)&&(x=o(x)),typeof R=="function"&&(D=R,R=null),y?R="buffer":R||(R=$.defaultEncoding),typeof D!="function"&&(D=T),$.ending?L(this,D):(y||F(this,$,x,D))&&($.pendingcb++,V=U(this,$,y,x,R,D)),V},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var x=this._writableState;x.corked&&(x.corked--,!x.writing&&!x.corked&&!x.bufferProcessing&&x.bufferedRequest&&Ne(this,x))},O.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new m(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function P(x,R,D){return!x.objectMode&&x.decodeStrings!==!1&&typeof R=="string"&&(R=i.from(R,D)),R}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function U(x,R,D,$,V,y){if(!D){var v=P(R,$,V);$!==v&&(D=!0,V="buffer",$=v)}var N=R.objectMode?1:$.length;R.length+=N;var M=R.length<R.highWaterMark;if(M||(R.needDrain=!0),R.writing||R.corked){var se=R.lastBufferedRequest;R.lastBufferedRequest={chunk:$,encoding:V,isBuf:D,callback:y,next:null},se?se.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else q(x,R,!1,N,$,V,y);return M}function q(x,R,D,$,V,y,v){R.writelen=$,R.writecb=v,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new w("write")):D?x._writev(V,R.onwrite):x._write(V,y,R.onwrite),R.sync=!1}function X(x,R,D,$,V){--R.pendingcb,D?(B.nextTick(V,$),B.nextTick(ge,x,R),x._writableState.errorEmitted=!0,E(x,$)):(V($),x._writableState.errorEmitted=!0,E(x,$),ge(x,R))}function oe(x){x.writing=!1,x.writecb=null,x.length-=x.writelen,x.writelen=0}function H(x,R){var D=x._writableState,$=D.sync,V=D.writecb;if(typeof V!="function")throw new c;if(oe(D),R)X(x,D,$,R,V);else{var y=wt(D)||x.destroyed;!y&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&Ne(x,D),$?B.nextTick(te,x,D,y,V):te(x,D,y,V)}}function te(x,R,D,$){D||qe(x,R),R.pendingcb--,$(),ge(x,R)}function qe(x,R){R.length===0&&R.needDrain&&(R.needDrain=!1,x.emit("drain"))}function Ne(x,R){R.bufferProcessing=!0;var D=R.bufferedRequest;if(x._writev&&D&&D.next){var $=R.bufferedRequestCount,V=new Array($),y=R.corkedRequestsFree;y.entry=D;for(var v=0,N=!0;D;)V[v]=D,D.isBuf||(N=!1),D=D.next,v+=1;V.allBuffers=N,q(x,R,!0,R.length,V,"",y.finish),R.pendingcb++,R.lastBufferedRequest=null,y.next?(R.corkedRequestsFree=y.next,y.next=null):R.corkedRequestsFree=new e(R),R.bufferedRequestCount=0}else{for(;D;){var M=D.chunk,se=D.encoding,W=D.callback,ee=R.objectMode?1:M.length;if(q(x,R,!1,ee,M,se,W),D=D.next,R.bufferedRequestCount--,R.writing)break}D===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=D,R.bufferProcessing=!1}O.prototype._write=function(x,R,D){D(new p("_write()"))},O.prototype._writev=null,O.prototype.end=function(x,R,D){var $=this._writableState;return typeof x=="function"?(D=x,x=null,R=null):typeof R=="function"&&(D=R,R=null),x!=null&&this.write(x,R),$.corked&&($.corked=1,this.uncork()),$.ending||Ve(this,$,D),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wt(x){return x.ending&&x.length===0&&x.bufferedRequest===null&&!x.finished&&!x.writing}function ue(x,R){x._final(function(D){R.pendingcb--,D&&E(x,D),R.prefinished=!0,x.emit("prefinish"),ge(x,R)})}function Te(x,R){!R.prefinished&&!R.finalCalled&&(typeof x._final=="function"&&!R.destroyed?(R.pendingcb++,R.finalCalled=!0,B.nextTick(ue,x,R)):(R.prefinished=!0,x.emit("prefinish")))}function ge(x,R){var D=wt(R);if(D&&(Te(x,R),R.pendingcb===0&&(R.finished=!0,x.emit("finish"),R.autoDestroy))){var $=x._readableState;(!$||$.autoDestroy&&$.endEmitted)&&x.destroy()}return D}function Ve(x,R,D){R.ending=!0,ge(x,R),D&&(R.finished?B.nextTick(D):x.once("finish",D)),R.ended=!0,x.writable=!1}function dr(x,R,D){var $=x.entry;for(x.entry=null;$;){var V=$.callback;R.pendingcb--,V(D),$=$.next}R.corkedRequestsFree.next=x}return Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),O.prototype.destroy=l.destroy,O.prototype._undestroy=l.undestroy,O.prototype._destroy=function(x,R){R(x)},Bs}var Ms,cl;function Pr(){if(cl)return Ms;cl=1;var e=Object.keys||function(f){var u=[];for(var h in f)u.push(h);return u};Ms=o;var t=Yh(),r=Zh();Ur()(o,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(f){if(!(this instanceof o))return new o(f);t.call(this,f),r.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||B.nextTick(l,this)}function l(f){f.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),Ms}var Fs={},hl;function Fo(){if(hl)return Fs;hl=1;var e=Mh().Buffer,t=e.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(_){if(!_)return"utf8";for(var b;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(b)return;_=(""+_).toLowerCase(),b=!0}}function n(_){var b=r(_);if(typeof b!="string"&&(e.isEncoding===t||!t(_)))throw new Error("Unknown encoding: "+_);return b||_}Fs.StringDecoder=i;function i(_){this.encoding=n(_);var b;switch(this.encoding){case"utf16le":this.text=h,this.end=d,b=4;break;case"utf8":this.fillLast=l,b=4;break;case"base64":this.text=p,this.end=c,b=3;break;default:this.write=g,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(b)}i.prototype.write=function(_){if(_.length===0)return"";var b,m;if(this.lastNeed){if(b=this.fillLast(_),b===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<_.length?b?b+this.text(_,m):this.text(_,m):b||""},i.prototype.end=u,i.prototype.text=f,i.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function s(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function o(_,b,m){var E=b.length-1;if(E<m)return 0;var T=s(b[E]);return T>=0?(T>0&&(_.lastNeed=T-1),T):--E<m||T===-2?0:(T=s(b[E]),T>=0?(T>0&&(_.lastNeed=T-2),T):--E<m||T===-2?0:(T=s(b[E]),T>=0?(T>0&&(T===2?T=0:_.lastNeed=T-3),T):0))}function a(_,b,m){if((b[0]&192)!==128)return _.lastNeed=0,"�";if(_.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return _.lastNeed=1,"�";if(_.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return _.lastNeed=2,"�"}}function l(_){var b=this.lastTotal-this.lastNeed,m=a(this,_);if(m!==void 0)return m;if(this.lastNeed<=_.length)return _.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,b,0,_.length),this.lastNeed-=_.length}function f(_,b){var m=o(this,_,b);if(!this.lastNeed)return _.toString("utf8",b);this.lastTotal=m;var E=_.length-(m-this.lastNeed);return _.copy(this.lastChar,0,E),_.toString("utf8",b,E)}function u(_){var b=_&&_.length?this.write(_):"";return this.lastNeed?b+"�":b}function h(_,b){if((_.length-b)%2===0){var m=_.toString("utf16le",b);if(m){var E=m.charCodeAt(m.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",b,_.length-1)}function d(_){var b=_&&_.length?this.write(_):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,m)}return b}function p(_,b){var m=(_.length-b)%3;return m===0?_.toString("base64",b):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",b,_.length-m))}function c(_){var b=_&&_.length?this.write(_):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function g(_){return _.toString(this.encoding)}function w(_){return _&&_.length?this.write(_):""}return Fs}var Us,dl;function Ba(){if(dl)return Us;dl=1;var e=qr().codes.ERR_STREAM_PREMATURE_CLOSE;function t(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];s.apply(this,l)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=t(a||r);var l=o.readable||o.readable!==!1&&s.readable,f=o.writable||o.writable!==!1&&s.writable,u=function(){s.writable||d()},h=s._writableState&&s._writableState.finished,d=function(){f=!1,h=!0,l||a.call(s)},p=s._readableState&&s._readableState.endEmitted,c=function(){l=!1,p=!0,f||a.call(s)},g=function(m){a.call(s,m)},w=function(){var m;if(l&&!p)return(!s._readableState||!s._readableState.ended)&&(m=new e),a.call(s,m);if(f&&!h)return(!s._writableState||!s._writableState.ended)&&(m=new e),a.call(s,m)},_=function(){s.req.on("finish",d)};return n(s)?(s.on("complete",d),s.on("abort",w),s.req?_():s.on("request",_)):f&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",c),s.on("finish",d),o.error!==!1&&s.on("error",g),s.on("close",w),function(){s.removeListener("complete",d),s.removeListener("abort",w),s.removeListener("request",_),s.req&&s.req.removeListener("finish",d),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",d),s.removeListener("end",c),s.removeListener("error",g),s.removeListener("close",w)}}return Us=i,Us}var qs,pl;function P0(){if(pl)return qs;pl=1;var e;function t(m,E,T){return E=r(E),E in m?Object.defineProperty(m,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):m[E]=T,m}function r(m){var E=n(m,"string");return typeof E=="symbol"?E:String(E)}function n(m,E){if(typeof m!="object"||m===null)return m;var T=m[Symbol.toPrimitive];if(T!==void 0){var C=T.call(m,E||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(m)}var i=Ba(),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function d(m,E){return{value:m,done:E}}function p(m){var E=m[s];if(E!==null){var T=m[h].read();T!==null&&(m[f]=null,m[s]=null,m[o]=null,E(d(T,!1)))}}function c(m){B.nextTick(p,m)}function g(m,E){return function(T,C){m.then(function(){if(E[l]){T(d(void 0,!0));return}E[u](T,C)},C)}}var w=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((e={get stream(){return this[h]},next:function(){var E=this,T=this[a];if(T!==null)return Promise.reject(T);if(this[l])return Promise.resolve(d(void 0,!0));if(this[h].destroyed)return new Promise(function(L,F){B.nextTick(function(){E[a]?F(E[a]):L(d(void 0,!0))})});var C=this[f],A;if(C)A=new Promise(g(C,this));else{var O=this[h].read();if(O!==null)return Promise.resolve(d(O,!1));A=new Promise(this[u])}return this[f]=A,A}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var E=this;return new Promise(function(T,C){E[h].destroy(null,function(A){if(A){C(A);return}T(d(void 0,!0))})})}),e),w),b=function(E){var T,C=Object.create(_,(T={},t(T,h,{value:E,writable:!0}),t(T,s,{value:null,writable:!0}),t(T,o,{value:null,writable:!0}),t(T,a,{value:null,writable:!0}),t(T,l,{value:E._readableState.endEmitted,writable:!0}),t(T,u,{value:function(O,L){var F=C[h].read();F?(C[f]=null,C[s]=null,C[o]=null,O(d(F,!1))):(C[s]=O,C[o]=L)},writable:!0}),T));return C[f]=null,i(E,function(A){if(A&&A.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=C[o];O!==null&&(C[f]=null,C[s]=null,C[o]=null,O(A)),C[a]=A;return}var L=C[s];L!==null&&(C[f]=null,C[s]=null,C[o]=null,L(d(void 0,!0))),C[l]=!0}),E.on("readable",c.bind(null,C)),C};return qs=b,qs}var $s,_l;function B0(){return _l||(_l=1,$s=function(){throw new Error("Readable.from is not available in the browser")}),$s}var js,gl;function Yh(){if(gl)return js;gl=1,js=L;var e;L.ReadableState=O,jh.EventEmitter;var t=function(v,N){return v.listeners(N).length},r=zh(),n=xn.Buffer,i=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(y){return n.from(y)}function o(y){return n.isBuffer(y)||y instanceof i}var a=Hh,l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var f=D0(),u=Wh(),h=Vh(),d=h.getHighWaterMark,p=qr().codes,c=p.ERR_INVALID_ARG_TYPE,g=p.ERR_STREAM_PUSH_AFTER_EOF,w=p.ERR_METHOD_NOT_IMPLEMENTED,_=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b,m,E;Ur()(L,r);var T=u.errorOrDestroy,C=["error","close","destroy","pause","resume"];function A(y,v,N){if(typeof y.prependListener=="function")return y.prependListener(v,N);!y._events||!y._events[v]?y.on(v,N):Array.isArray(y._events[v])?y._events[v].unshift(N):y._events[v]=[N,y._events[v]]}function O(y,v,N){e=e||Pr(),y=y||{},typeof N!="boolean"&&(N=v instanceof e),this.objectMode=!!y.objectMode,N&&(this.objectMode=this.objectMode||!!y.readableObjectMode),this.highWaterMark=d(this,y,"readableHighWaterMark",N),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=y.emitClose!==!1,this.autoDestroy=!!y.autoDestroy,this.destroyed=!1,this.defaultEncoding=y.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,y.encoding&&(b||(b=Fo().StringDecoder),this.decoder=new b(y.encoding),this.encoding=y.encoding)}function L(y){if(e=e||Pr(),!(this instanceof L))return new L(y);var v=this instanceof e;this._readableState=new O(y,this,v),this.readable=!0,y&&(typeof y.read=="function"&&(this._read=y.read),typeof y.destroy=="function"&&(this._destroy=y.destroy)),r.call(this)}Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(v){this._readableState&&(this._readableState.destroyed=v)}}),L.prototype.destroy=u.destroy,L.prototype._undestroy=u.undestroy,L.prototype._destroy=function(y,v){v(y)},L.prototype.push=function(y,v){var N=this._readableState,M;return N.objectMode?M=!0:typeof y=="string"&&(v=v||N.defaultEncoding,v!==N.encoding&&(y=n.from(y,v),v=""),M=!0),F(this,y,v,!1,M)},L.prototype.unshift=function(y){return F(this,y,null,!0,!1)};function F(y,v,N,M,se){l("readableAddChunk",v);var W=y._readableState;if(v===null)W.reading=!1,H(y,W);else{var ee;if(se||(ee=U(W,v)),ee)T(y,ee);else if(W.objectMode||v&&v.length>0)if(typeof v!="string"&&!W.objectMode&&Object.getPrototypeOf(v)!==n.prototype&&(v=s(v)),M)W.endEmitted?T(y,new _):P(y,W,v,!0);else if(W.ended)T(y,new g);else{if(W.destroyed)return!1;W.reading=!1,W.decoder&&!N?(v=W.decoder.write(v),W.objectMode||v.length!==0?P(y,W,v,!1):Ne(y,W)):P(y,W,v,!1)}else M||(W.reading=!1,Ne(y,W))}return!W.ended&&(W.length<W.highWaterMark||W.length===0)}function P(y,v,N,M){v.flowing&&v.length===0&&!v.sync?(v.awaitDrain=0,y.emit("data",N)):(v.length+=v.objectMode?1:N.length,M?v.buffer.unshift(N):v.buffer.push(N),v.needReadable&&te(y)),Ne(y,v)}function U(y,v){var N;return!o(v)&&typeof v!="string"&&v!==void 0&&!y.objectMode&&(N=new c("chunk",["string","Buffer","Uint8Array"],v)),N}L.prototype.isPaused=function(){return this._readableState.flowing===!1},L.prototype.setEncoding=function(y){b||(b=Fo().StringDecoder);var v=new b(y);this._readableState.decoder=v,this._readableState.encoding=this._readableState.decoder.encoding;for(var N=this._readableState.buffer.head,M="";N!==null;)M+=v.write(N.data),N=N.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var q=1073741824;function X(y){return y>=q?y=q:(y--,y|=y>>>1,y|=y>>>2,y|=y>>>4,y|=y>>>8,y|=y>>>16,y++),y}function oe(y,v){return y<=0||v.length===0&&v.ended?0:v.objectMode?1:y!==y?v.flowing&&v.length?v.buffer.head.data.length:v.length:(y>v.highWaterMark&&(v.highWaterMark=X(y)),y<=v.length?y:v.ended?v.length:(v.needReadable=!0,0))}L.prototype.read=function(y){l("read",y),y=parseInt(y,10);var v=this._readableState,N=y;if(y!==0&&(v.emittedReadable=!1),y===0&&v.needReadable&&((v.highWaterMark!==0?v.length>=v.highWaterMark:v.length>0)||v.ended))return l("read: emitReadable",v.length,v.ended),v.length===0&&v.ended?D(this):te(this),null;if(y=oe(y,v),y===0&&v.ended)return v.length===0&&D(this),null;var M=v.needReadable;l("need readable",M),(v.length===0||v.length-y<v.highWaterMark)&&(M=!0,l("length less than watermark",M)),v.ended||v.reading?(M=!1,l("reading or ended",M)):M&&(l("do read"),v.reading=!0,v.sync=!0,v.length===0&&(v.needReadable=!0),this._read(v.highWaterMark),v.sync=!1,v.reading||(y=oe(N,v)));var se;return y>0?se=R(y,v):se=null,se===null?(v.needReadable=v.length<=v.highWaterMark,y=0):(v.length-=y,v.awaitDrain=0),v.length===0&&(v.ended||(v.needReadable=!0),N!==y&&v.ended&&D(this)),se!==null&&this.emit("data",se),se};function H(y,v){if(l("onEofChunk"),!v.ended){if(v.decoder){var N=v.decoder.end();N&&N.length&&(v.buffer.push(N),v.length+=v.objectMode?1:N.length)}v.ended=!0,v.sync?te(y):(v.needReadable=!1,v.emittedReadable||(v.emittedReadable=!0,qe(y)))}}function te(y){var v=y._readableState;l("emitReadable",v.needReadable,v.emittedReadable),v.needReadable=!1,v.emittedReadable||(l("emitReadable",v.flowing),v.emittedReadable=!0,B.nextTick(qe,y))}function qe(y){var v=y._readableState;l("emitReadable_",v.destroyed,v.length,v.ended),!v.destroyed&&(v.length||v.ended)&&(y.emit("readable"),v.emittedReadable=!1),v.needReadable=!v.flowing&&!v.ended&&v.length<=v.highWaterMark,x(y)}function Ne(y,v){v.readingMore||(v.readingMore=!0,B.nextTick(wt,y,v))}function wt(y,v){for(;!v.reading&&!v.ended&&(v.length<v.highWaterMark||v.flowing&&v.length===0);){var N=v.length;if(l("maybeReadMore read 0"),y.read(0),N===v.length)break}v.readingMore=!1}L.prototype._read=function(y){T(this,new w("_read()"))},L.prototype.pipe=function(y,v){var N=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=y;break;case 1:M.pipes=[M.pipes,y];break;default:M.pipes.push(y);break}M.pipesCount+=1,l("pipe count=%d opts=%j",M.pipesCount,v);var se=(!v||v.end!==!1)&&y!==B.stdout&&y!==B.stderr,W=se?pr:Wr;M.endEmitted?B.nextTick(W):N.once("end",W),y.on("unpipe",ee);function ee(_r,gr){l("onunpipe"),_r===N&&gr&&gr.hasUnpiped===!1&&(gr.hasUnpiped=!0,yp())}function pr(){l("onend"),y.end()}var Ln=ue(N);y.on("drain",Ln);var tf=!1;function yp(){l("cleanup"),y.removeListener("close",is),y.removeListener("finish",ss),y.removeListener("drain",Ln),y.removeListener("error",ns),y.removeListener("unpipe",ee),N.removeListener("end",pr),N.removeListener("end",Wr),N.removeListener("data",rf),tf=!0,M.awaitDrain&&(!y._writableState||y._writableState.needDrain)&&Ln()}N.on("data",rf);function rf(_r){l("ondata");var gr=y.write(_r);l("dest.write",gr),gr===!1&&((M.pipesCount===1&&M.pipes===y||M.pipesCount>1&&V(M.pipes,y)!==-1)&&!tf&&(l("false write response, pause",M.awaitDrain),M.awaitDrain++),N.pause())}function ns(_r){l("onerror",_r),Wr(),y.removeListener("error",ns),t(y,"error")===0&&T(y,_r)}A(y,"error",ns);function is(){y.removeListener("finish",ss),Wr()}y.once("close",is);function ss(){l("onfinish"),y.removeListener("close",is),Wr()}y.once("finish",ss);function Wr(){l("unpipe"),N.unpipe(y)}return y.emit("pipe",N),M.flowing||(l("pipe resume"),N.resume()),y};function ue(y){return function(){var N=y._readableState;l("pipeOnDrain",N.awaitDrain),N.awaitDrain&&N.awaitDrain--,N.awaitDrain===0&&t(y,"data")&&(N.flowing=!0,x(y))}}L.prototype.unpipe=function(y){var v=this._readableState,N={hasUnpiped:!1};if(v.pipesCount===0)return this;if(v.pipesCount===1)return y&&y!==v.pipes?this:(y||(y=v.pipes),v.pipes=null,v.pipesCount=0,v.flowing=!1,y&&y.emit("unpipe",this,N),this);if(!y){var M=v.pipes,se=v.pipesCount;v.pipes=null,v.pipesCount=0,v.flowing=!1;for(var W=0;W<se;W++)M[W].emit("unpipe",this,{hasUnpiped:!1});return this}var ee=V(v.pipes,y);return ee===-1?this:(v.pipes.splice(ee,1),v.pipesCount-=1,v.pipesCount===1&&(v.pipes=v.pipes[0]),y.emit("unpipe",this,N),this)},L.prototype.on=function(y,v){var N=r.prototype.on.call(this,y,v),M=this._readableState;return y==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):y==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,l("on readable",M.length,M.reading),M.length?te(this):M.reading||B.nextTick(ge,this)),N},L.prototype.addListener=L.prototype.on,L.prototype.removeListener=function(y,v){var N=r.prototype.removeListener.call(this,y,v);return y==="readable"&&B.nextTick(Te,this),N},L.prototype.removeAllListeners=function(y){var v=r.prototype.removeAllListeners.apply(this,arguments);return(y==="readable"||y===void 0)&&B.nextTick(Te,this),v};function Te(y){var v=y._readableState;v.readableListening=y.listenerCount("readable")>0,v.resumeScheduled&&!v.paused?v.flowing=!0:y.listenerCount("data")>0&&y.resume()}function ge(y){l("readable nexttick read 0"),y.read(0)}L.prototype.resume=function(){var y=this._readableState;return y.flowing||(l("resume"),y.flowing=!y.readableListening,Ve(this,y)),y.paused=!1,this};function Ve(y,v){v.resumeScheduled||(v.resumeScheduled=!0,B.nextTick(dr,y,v))}function dr(y,v){l("resume",v.reading),v.reading||y.read(0),v.resumeScheduled=!1,y.emit("resume"),x(y),v.flowing&&!v.reading&&y.read(0)}L.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function x(y){var v=y._readableState;for(l("flow",v.flowing);v.flowing&&y.read()!==null;);}L.prototype.wrap=function(y){var v=this,N=this._readableState,M=!1;y.on("end",function(){if(l("wrapped end"),N.decoder&&!N.ended){var ee=N.decoder.end();ee&&ee.length&&v.push(ee)}v.push(null)}),y.on("data",function(ee){if(l("wrapped data"),N.decoder&&(ee=N.decoder.write(ee)),!(N.objectMode&&ee==null)&&!(!N.objectMode&&(!ee||!ee.length))){var pr=v.push(ee);pr||(M=!0,y.pause())}});for(var se in y)this[se]===void 0&&typeof y[se]=="function"&&(this[se]=function(pr){return function(){return y[pr].apply(y,arguments)}}(se));for(var W=0;W<C.length;W++)y.on(C[W],this.emit.bind(this,C[W]));return this._read=function(ee){l("wrapped _read",ee),M&&(M=!1,y.resume())},this},typeof Symbol=="function"&&(L.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=P0()),m(this)}),Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(L.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(L.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(v){this._readableState&&(this._readableState.flowing=v)}}),L._fromList=R,Object.defineProperty(L.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function R(y,v){if(v.length===0)return null;var N;return v.objectMode?N=v.buffer.shift():!y||y>=v.length?(v.decoder?N=v.buffer.join(""):v.buffer.length===1?N=v.buffer.first():N=v.buffer.concat(v.length),v.buffer.clear()):N=v.buffer.consume(y,v.decoder),N}function D(y){var v=y._readableState;l("endReadable",v.endEmitted),v.endEmitted||(v.ended=!0,B.nextTick($,v,y))}function $(y,v){if(l("endReadableNT",y.endEmitted,y.length),!y.endEmitted&&y.length===0&&(y.endEmitted=!0,v.readable=!1,v.emit("end"),y.autoDestroy)){var N=v._writableState;(!N||N.autoDestroy&&N.finished)&&v.destroy()}}typeof Symbol=="function"&&(L.from=function(y,v){return E===void 0&&(E=B0()),E(L,y,v)});function V(y,v){for(var N=0,M=y.length;N<M;N++)if(y[N]===v)return N;return-1}return js}var zs,ml;function Gh(){if(ml)return zs;ml=1,zs=a;var e=qr().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,s=Pr();Ur()(a,s);function o(u,h){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(p===null)return this.emit("error",new r);d.writechunk=null,d.writecb=null,h!=null&&this.push(h),p(u);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);s.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function l(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,d){f(u,h,d)}):f(this,null,null)}a.prototype.push=function(u,h){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,h)},a.prototype._transform=function(u,h,d){d(new t("_transform()"))},a.prototype._write=function(u,h,d){var p=this._transformState;if(p.writecb=d,p.writechunk=u,p.writeencoding=h,!p.transforming){var c=this._readableState;(p.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},a.prototype._read=function(u){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(u,h){s.prototype._destroy.call(this,u,function(d){h(d)})};function f(u,h,d){if(h)return u.emit("error",h);if(d!=null&&u.push(d),u._writableState.length)throw new i;if(u._transformState.transforming)throw new n;return u.push(null)}return zs}var Hs,yl;function M0(){if(yl)return Hs;yl=1,Hs=t;var e=Gh();Ur()(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,n,i){i(null,r)},Hs}var Ws,vl;function F0(){if(vl)return Ws;vl=1;var e;function t(d){var p=!1;return function(){p||(p=!0,d.apply(void 0,arguments))}}var r=qr().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(d){if(d)throw d}function o(d){return d.setHeader&&typeof d.abort=="function"}function a(d,p,c,g){g=t(g);var w=!1;d.on("close",function(){w=!0}),e===void 0&&(e=Ba()),e(d,{readable:p,writable:c},function(b){if(b)return g(b);w=!0,g()});var _=!1;return function(b){if(!w&&!_){if(_=!0,o(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();g(b||new i("pipe"))}}}function l(d){d()}function f(d,p){return d.pipe(p)}function u(d){return!d.length||typeof d[d.length-1]!="function"?s:d.pop()}function h(){for(var d=arguments.length,p=new Array(d),c=0;c<d;c++)p[c]=arguments[c];var g=u(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new n("streams");var w,_=p.map(function(b,m){var E=m<p.length-1,T=m>0;return a(b,E,T,function(C){w||(w=C),C&&_.forEach(l),!E&&(_.forEach(l),g(w))})});return p.reduce(f)}return Ws=h,Ws}var wl;function U0(){return wl||(wl=1,function(e,t){t=e.exports=Yh(),t.Stream=t,t.Readable=t,t.Writable=Zh(),t.Duplex=Pr(),t.Transform=Gh(),t.PassThrough=M0(),t.finished=Ba(),t.pipeline=F0()}(Vn,Vn.exports)),Vn.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Vs,bl;function q0(){if(bl)return Vs;bl=1;let e;return Vs=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(e||(e=Promise.resolve())).then(t).catch(r=>setTimeout(()=>{throw r},0)),Vs}var Zs,El;function $0(){if(El)return Zs;El=1;function e(r,n){for(const i in n)Object.defineProperty(r,i,{value:n[i],enumerable:!0,configurable:!0});return r}function t(r,n,i){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof n=="object"&&(i=n,n=""),n&&(i.code=n);try{return e(r,i)}catch{i.message=r.message,i.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),e(new o,i)}}return Zs=t,Zs}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ys,Sl;function j0(){if(Sl)return Ys;Sl=1;const e=w0()("simple-peer"),t=b0(),r=E0(),n=U0(),i=q0(),s=$0(),{Buffer:o}=xn,a=64*1024,l=5*1e3,f=5*1e3;function u(p){return p.replace(/a=ice-options:trickle\s\n/g,"")}function h(p){console.warn(p)}class d extends n.Duplex{constructor(c){if(c=Object.assign({allowHalfOpen:!1},c),super(c),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",c),this.channelName=c.initiator?c.channelName||r(20).toString("hex"):null,this.initiator=c.initiator||!1,this.channelConfig=c.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,c.config),this.offerOptions=c.offerOptions||{},this.answerOptions=c.answerOptions||{},this.sdpTransform=c.sdpTransform||(g=>g),this.streams=c.streams||(c.stream?[c.stream]:[]),this.trickle=c.trickle!==void 0?c.trickle:!0,this.allowHalfTrickle=c.allowHalfTrickle!==void 0?c.allowHalfTrickle:!1,this.iceCompleteTimeout=c.iceCompleteTimeout||l,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=c.wrtc&&typeof c.wrtc=="object"?c.wrtc:t(),!this._wrtc)throw s(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(g){this.destroy(s(g,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=g=>{this._onIceCandidate(g)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(g=>{this.destroy(s(g,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=g=>{this._setupData(g)},this.streams&&this.streams.forEach(g=>{this.addStream(g)}),this._pc.ontrack=g=>{this._onTrack(g)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(c){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof c=="string")try{c=JSON.parse(c)}catch{c={}}this._debug("signal()"),c.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),c.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(c.transceiverRequest.kind,c.transceiverRequest.init)),c.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(c.candidate):this._pendingCandidates.push(c.candidate)),c.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(c)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(g=>{this._addIceCandidate(g)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(g=>{this.destroy(s(g,"ERR_SET_REMOTE_DESCRIPTION"))}),!c.sdp&&!c.candidate&&!c.renegotiate&&!c.transceiverRequest&&this.destroy(s(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(c){const g=new this._wrtc.RTCIceCandidate(c);this._pc.addIceCandidate(g).catch(w=>{!g.address||g.address.endsWith(".local")?h("Ignoring unsupported ICE candidate."):this.destroy(s(w,"ERR_ADD_ICE_CANDIDATE"))})}send(c){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(c)}}addTransceiver(c,g){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(c,g),this._needsNegotiation()}catch(w){this.destroy(s(w,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:c,init:g}})}}addStream(c){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),c.getTracks().forEach(g=>{this.addTrack(g,c)})}}addTrack(c,g){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const w=this._senderMap.get(c)||new Map;let _=w.get(g);if(!_)_=this._pc.addTrack(c,g),w.set(g,_),this._senderMap.set(c,w),this._needsNegotiation();else throw _.removed?s(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):s(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(c,g,w){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const _=this._senderMap.get(c),b=_?_.get(w):null;if(!b)throw s(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");g&&this._senderMap.set(g,_),b.replaceTrack!=null?b.replaceTrack(g):this.destroy(s(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(c,g){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const w=this._senderMap.get(c),_=w?w.get(g):null;if(!_)throw s(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{_.removed=!0,this._pc.removeTrack(_)}catch(b){b.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(_):this.destroy(s(b,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(c){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),c.getTracks().forEach(g=>{this.removeTrack(g,c)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,i(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(c){this._destroy(c,()=>{})}_destroy(c,g){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",c&&(c.message||c)),i(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",c&&(c.message||c)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,c&&this.emit("error",c),this.emit("close"),g()}))}_setupData(c){if(!c.channel)return this.destroy(s(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=c.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=a),this.channelName=this._channel.label,this._channel.onmessage=w=>{this._onChannelMessage(w)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=w=>{const _=w.error instanceof Error?w.error:new Error(`Datachannel error: ${w.message} ${w.filename}:${w.lineno}:${w.colno}`);this.destroy(s(_,"ERR_DATA_CHANNEL"))};let g=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(g&&this._onChannelClose(),g=!0):g=!1},f)}_read(){}_write(c,g,w){if(this.destroyed)return w(s(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(c)}catch(_){return this.destroy(s(_,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>a?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=w):w(null)}else this._debug("write before connect"),this._chunk=c,this._cb=w}_onFinish(){if(this.destroyed)return;const c=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?c():this.once("connect",c)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=u(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const g=()=>{if(this.destroyed)return;const b=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})},w=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?g():this.once("_iceComplete",g))},_=b=>{this.destroy(s(b,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(w).catch(_)}).catch(c=>{this.destroy(s(c,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(c=>{!c.mid&&c.sender.track&&!c.requested&&(c.requested=!0,this.addTransceiver(c.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=u(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const g=()=>{if(this.destroyed)return;const b=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()},w=()=>{this.destroyed||(this.trickle||this._iceComplete?g():this.once("_iceComplete",g))},_=b=>{this.destroy(s(b,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(w).catch(_)}).catch(c=>{this.destroy(s(c,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(s(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const c=this._pc.iceConnectionState,g=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",c,g),this.emit("iceStateChange",c,g),(c==="connected"||c==="completed")&&(this._pcReady=!0,this._maybeReady()),c==="failed"&&this.destroy(s(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),c==="closed"&&this.destroy(s(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(c){const g=w=>(Object.prototype.toString.call(w.values)==="[object Array]"&&w.values.forEach(_=>{Object.assign(w,_)}),w);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(w=>{const _=[];w.forEach(b=>{_.push(g(b))}),c(null,_)},w=>c(w)):this._pc.getStats.length>0?this._pc.getStats(w=>{if(this.destroyed)return;const _=[];w.result().forEach(b=>{const m={};b.names().forEach(E=>{m[E]=b.stat(E)}),m.id=b.id,m.type=b.type,m.timestamp=b.timestamp,_.push(g(m))}),c(null,_)},w=>c(w)):c(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const c=()=>{this.destroyed||this.getStats((g,w)=>{if(this.destroyed)return;g&&(w=[]);const _={},b={},m={};let E=!1;w.forEach(C=>{(C.type==="remotecandidate"||C.type==="remote-candidate")&&(_[C.id]=C),(C.type==="localcandidate"||C.type==="local-candidate")&&(b[C.id]=C),(C.type==="candidatepair"||C.type==="candidate-pair")&&(m[C.id]=C)});const T=C=>{E=!0;let A=b[C.localCandidateId];A&&(A.ip||A.address)?(this.localAddress=A.ip||A.address,this.localPort=Number(A.port)):A&&A.ipAddress?(this.localAddress=A.ipAddress,this.localPort=Number(A.portNumber)):typeof C.googLocalAddress=="string"&&(A=C.googLocalAddress.split(":"),this.localAddress=A[0],this.localPort=Number(A[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let O=_[C.remoteCandidateId];O&&(O.ip||O.address)?(this.remoteAddress=O.ip||O.address,this.remotePort=Number(O.port)):O&&O.ipAddress?(this.remoteAddress=O.ipAddress,this.remotePort=Number(O.portNumber)):typeof C.googRemoteAddress=="string"&&(O=C.googRemoteAddress.split(":"),this.remoteAddress=O[0],this.remotePort=Number(O[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(w.forEach(C=>{C.type==="transport"&&C.selectedCandidatePairId&&T(m[C.selectedCandidatePairId]),(C.type==="googCandidatePair"&&C.googActiveConnection==="true"||(C.type==="candidatepair"||C.type==="candidate-pair")&&C.selected)&&T(C)}),!E&&(!Object.keys(m).length||Object.keys(b).length)){setTimeout(c,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(A){return this.destroy(s(A,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const C=this._cb;this._cb=null,C(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};c()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>a||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(c=>{this._pc.removeTrack(c),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(c){this.destroyed||(c.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:c.candidate.candidate,sdpMLineIndex:c.candidate.sdpMLineIndex,sdpMid:c.candidate.sdpMid}}):!c.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),c.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(c){if(this.destroyed)return;let g=c.data;g instanceof ArrayBuffer&&(g=o.from(g)),this.push(g)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const c=this._cb;this._cb=null,c(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(c){this.destroyed||c.streams.forEach(g=>{this._debug("on track"),this.emit("track",c.track,g),this._remoteTracks.push({track:c.track,stream:g}),!this._remoteStreams.some(w=>w.id===g.id)&&(this._remoteStreams.push(g),i(()=>{this._debug("on stream"),this.emit("stream",g)}))})}_debug(){const c=[].slice.call(arguments);c[0]="["+this._id+"] "+c[0],e.apply(null,c)}}return d.WEBRTC_SUPPORT=!!t(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:globalThis.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},Ys=d,Ys}var Rl;function z0(){if(Rl)return yr.exports;Rl=1;const e=Km(),t=Ur(),r=m0(),n=j0();t(o,r);const i="ERR_CONNECTION_TIMEOUT",s="ERR_PREMATURE_CLOSE";function o(a,l={}){if(!(this instanceof o))return new o(a);r.call(this);const{connectionTimeout:f=10*1e3}=l;this.id=null,this.socket=a,this._connectionTimeout=f,this._peers={},this._sessionQueues={},this._timers=new Map,this.socket.on("simple-signal[discover]",this._onDiscover.bind(this)),this.socket.on("simple-signal[offer]",this._onOffer.bind(this)),this.socket.on("simple-signal[signal]",this._onSignal.bind(this)),this.socket.on("simple-signal[reject]",this._onReject.bind(this))}return o.prototype._onDiscover=function(a){this.id=a.id,this.emit("discover",a.discoveryData)},o.prototype._onOffer=function({initiator:a,metadata:l,sessionId:f,signal:u}){this._sessionQueues[f]=[u];const h={initiator:a,metadata:l,sessionId:f};h.accept=this._accept.bind(this,h),h.reject=this._reject.bind(this,h),this.emit("request",h)},o.prototype._accept=function(a,l={},f={}){f.initiator=!1;const u=this._peers[a.sessionId]=new n(f);return u.on("signal",h=>{this.socket.emit("simple-signal[signal]",{signal:h,metadata:l,sessionId:a.sessionId,target:a.initiator})}),u.once("close",()=>{this._closePeer(a.sessionId)}),this._sessionQueues[a.sessionId].forEach(h=>{u.signal(h)}),delete this._sessionQueues[a.sessionId],new Promise((h,d)=>{this._onSafeConnect(u,()=>{this._clearTimer(a.sessionId),h({peer:u,metadata:a.metadata})}),u.once("close",()=>{d({metadata:{code:s}})}),this._startTimer(a.sessionId,p=>{d({metadata:p}),this._closePeer(a.sessionId)})})},o.prototype._reject=function(a,l={}){delete this._sessionQueues[a.sessionId],this._clearTimer(a.sessionId),this.socket.emit("simple-signal[reject]",{metadata:l,sessionId:a.sessionId,target:a.initiator})},o.prototype._onReject=function({sessionId:a,metadata:l}){const f=this._peers[a];f&&f.reject(l)},o.prototype._onSignal=function({sessionId:a,signal:l,metadata:f}){const u=this._peers[a];u?(u.signal(l),f!==void 0&&u.resolveMetadata&&u.resolveMetadata(f)):(this._sessionQueues[a]=this._sessionQueues[a]||[],this._sessionQueues[a].push(l))},o.prototype.connect=function(a,l={},f={}){if(!this.id)throw new Error("Must complete discovery first.");f.initiator=!0;const u=e();var h=!0;const d=this._peers[u]=new n(f);return d.once("close",()=>{this._closePeer(u)}),d.on("signal",p=>{const c=p.sdp&&h?"simple-signal[offer]":"simple-signal[signal]";p.sdp&&(h=!1),this.socket.emit(c,{signal:p,metadata:l,sessionId:u,target:a})}),new Promise((p,c)=>{d.resolveMetadata=g=>{d.resolveMetadata=null,this._onSafeConnect(d,()=>{this._clearTimer(u),p({peer:d,metadata:g})})},d.reject=g=>{c({metadata:g}),this._closePeer(u)},d.once("close",()=>{c({metadata:{code:s}})}),this._startTimer(u,g=>d.reject(g))})},o.prototype._onSafeConnect=function(a,l){const f=[];function u(d){f.push({name:"stream",args:[d]})}function h(d,p){f.push({name:"track",args:[d,p]})}a.on("stream",u),a.on("track",h),a.once("connect",()=>{setTimeout(()=>{a.emit("connect"),setTimeout(()=>{f.forEach(({name:d,args:p})=>{a.emit(d,...p)})},0)},0),a.removeListener("stream",u),a.removeListener("track",h),l(a)})},o.prototype._closePeer=function(a){const l=this._peers[a];this._clearTimer(a),delete this._peers[a],l&&l.destroy()},o.prototype._startTimer=function(a,l){if(this._connectionTimeout!==-1){const f=setTimeout(()=>{this._clearTimer(a),l({code:i})},this._connectionTimeout);this._timers.set(a,f)}},o.prototype._clearTimer=function(a){this._timers.has(a)&&(clearTimeout(this._timers.get(a)),this._timers.delete(a))},o.prototype.discover=function(a={}){this.socket.emit("simple-signal[discover]",a)},o.prototype.peers=function(){return Object.values(this._peers)},o.prototype.destroy=function(){this.socket.close(),this.peers().forEach(a=>a.destroy()),this.id=null,this.socket=null,this._peers=null,this._sessionQueues=null},yr.exports=o,yr.exports.SimplePeer=n,yr.exports.ERR_CONNECTION_TIMEOUT=i,yr.exports.ERR_PREMATURE_CLOSE=s,yr.exports}/*! https://mths.be/punycode v1.4.1 by @mathias */var Gs=2147483647,an=36,Kh=1,Uo=26,H0=38,W0=700,V0=72,Z0=128,Y0="-",G0=/[^\x20-\x7E]/,K0=/[\x2E\u3002\uFF0E\uFF61]/g,X0={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ks=an-Kh,Rr=Math.floor,Xs=String.fromCharCode;function xl(e){throw new RangeError(X0[e])}function J0(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function Q0(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(K0,".");var i=e.split("."),s=J0(i,t).join(".");return n+s}function ey(e){for(var t=[],r=0,n=e.length,i,s;r<n;)i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(s=e.charCodeAt(r++),(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),r--)):t.push(i);return t}function Tl(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function ty(e,t,r){var n=0;for(e=r?Rr(e/W0):e>>1,e+=Rr(e/t);e>Ks*Uo>>1;n+=an)e=Rr(e/Ks);return Rr(n+(Ks+1)*e/(e+H0))}function ry(e){var t,r,n,i,s,o,a,l,f,u,h,d=[],p,c,g,w;for(e=ey(e),p=e.length,t=Z0,r=0,s=V0,o=0;o<p;++o)h=e[o],h<128&&d.push(Xs(h));for(n=i=d.length,i&&d.push(Y0);n<p;){for(a=Gs,o=0;o<p;++o)h=e[o],h>=t&&h<a&&(a=h);for(c=n+1,a-t>Rr((Gs-r)/c)&&xl("overflow"),r+=(a-t)*c,t=a,o=0;o<p;++o)if(h=e[o],h<t&&++r>Gs&&xl("overflow"),h==t){for(l=r,f=an;u=f<=s?Kh:f>=s+Uo?Uo:f-s,!(l<u);f+=an)w=l-u,g=an-u,d.push(Xs(Tl(u+w%g,0))),l=Rr(w/g);d.push(Xs(Tl(l,0))),s=ty(r,c,n==i),r=0,++n}++r,++t}return d.join("")}function ny(e){return Q0(e,function(t){return G0.test(t)?"xn--"+ry(t):t})}function iy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Xh=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function Yr(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function sy(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Cl(oy(e),function(i){var s=encodeURIComponent(Yr(i))+r;return Xh(e[i])?Cl(e[i],function(o){return s+encodeURIComponent(Yr(o))}).join(t):s+encodeURIComponent(Yr(e[i]))}).join(t):n?encodeURIComponent(Yr(n))+r+encodeURIComponent(Yr(e)):""}function Cl(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var oy=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function kl(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var f=e[l].replace(s,"%20"),u=f.indexOf(r),h,d,p,c;u>=0?(h=f.substr(0,u),d=f.substr(u+1)):(h=f,d=""),p=decodeURIComponent(h),c=decodeURIComponent(d),iy(i,p)?Xh(i[p])?i[p].push(c):i[p]=[i[p],c]:i[p]=c}return i}const qo={parse:Cn,resolve:gy,resolveObject:my,format:_y,Url:et};function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ay=/^([a-z0-9.+-]+:)/i,fy=/:[0-9]*$/,ly=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,uy=["<",">",'"',"`"," ","\r",`
`,"	"],cy=["{","}","|","\\","^","`"].concat(uy),$o=["'"].concat(cy),Al=["%","/","?",";","#"].concat($o),Ol=["/","?","#"],hy=255,Nl=/^[+a-z0-9A-Z_-]{0,63}$/,dy=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,py={javascript:!0,"javascript:":!0},jo={javascript:!0,"javascript:":!0},Or={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Cn(e,t,r){if(e&&yt(e)&&e instanceof et)return e;var n=new et;return n.parse(e,t,r),n}et.prototype.parse=function(e,t,r){return Jh(this,e,t,r)};function Jh(e,t,r,n){if(!Ut(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=i!==-1&&i<t.indexOf("#")?"?":"#",o=t.split(s),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(s);var l=t;if(l=l.trim(),!n&&t.split("#").length===1){var f=ly.exec(l);if(f)return e.path=l,e.href=l,e.pathname=f[1],f[2]?(e.search=f[2],r?e.query=kl(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var u=ay.exec(l);if(u){u=u[0];var h=u.toLowerCase();e.protocol=h,l=l.substr(u.length)}if(n||u||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=l.substr(0,2)==="//";d&&!(u&&jo[u])&&(l=l.substr(2),e.slashes=!0)}var p,c,g,w;if(!jo[u]&&(d||u&&!Or[u])){var _=-1;for(p=0;p<Ol.length;p++)c=l.indexOf(Ol[p]),c!==-1&&(_===-1||c<_)&&(_=c);var b,m;for(_===-1?m=l.lastIndexOf("@"):m=l.lastIndexOf("@",_),m!==-1&&(b=l.slice(0,m),l=l.slice(m+1),e.auth=decodeURIComponent(b)),_=-1,p=0;p<Al.length;p++)c=l.indexOf(Al[p]),c!==-1&&(_===-1||c<_)&&(_=c);_===-1&&(_=l.length),e.host=l.slice(0,_),l=l.slice(_),Qh(e),e.hostname=e.hostname||"";var E=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!E){var T=e.hostname.split(/\./);for(p=0,g=T.length;p<g;p++){var C=T[p];if(C&&!C.match(Nl)){for(var A="",O=0,L=C.length;O<L;O++)C.charCodeAt(O)>127?A+="x":A+=C[O];if(!A.match(Nl)){var F=T.slice(0,p),P=T.slice(p+1),U=C.match(dy);U&&(F.push(U[1]),P.unshift(U[2])),P.length&&(l="/"+P.join(".")+l),e.hostname=F.join(".");break}}}}e.hostname.length>hy?e.hostname="":e.hostname=e.hostname.toLowerCase(),E||(e.hostname=ny(e.hostname)),w=e.port?":"+e.port:"";var q=e.hostname||"";e.host=q+w,e.href+=e.host,E&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!py[h])for(p=0,g=$o.length;p<g;p++){var X=$o[p];if(l.indexOf(X)!==-1){var oe=encodeURIComponent(X);oe===X&&(oe=escape(X)),l=l.split(X).join(oe)}}var H=l.indexOf("#");H!==-1&&(e.hash=l.substr(H),l=l.slice(0,H));var te=l.indexOf("?");if(te!==-1?(e.search=l.substr(te),e.query=l.substr(te+1),r&&(e.query=kl(e.query)),l=l.slice(0,te)):r&&(e.search="",e.query={}),l&&(e.pathname=l),Or[h]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){w=e.pathname||"";var qe=e.search||"";e.path=w+qe}return e.href=Ma(e),e}function _y(e){return Ut(e)&&(e=Jh({},e)),Ma(e)}function Ma(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",s=!1,o="";e.host?s=t+e.host:e.hostname&&(s=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(s+=":"+e.port)),e.query&&yt(e.query)&&Object.keys(e.query).length&&(o=sy(e.query));var a=e.search||o&&"?"+o||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||Or[r])&&s!==!1?(s="//"+(s||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),r+s+n+a+i}et.prototype.format=function(){return Ma(this)};function gy(e,t){return Cn(e,!1,!0).resolve(t)}et.prototype.resolve=function(e){return this.resolveObject(Cn(e,!1,!0)).format()};function my(e,t){return e?Cn(e,!1,!0).resolveObject(t):t}et.prototype.resolveObject=function(e){if(Ut(e)){var t=new et;t.parse(e,!1,!0),e=t}for(var r=new et,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=e[l])}return Or[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var f;if(e.protocol&&e.protocol!==r.protocol){if(!Or[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var d=u[h];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!jo[e.protocol]){for(f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),f[0]!==""&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var p=r.pathname||"",c=r.search||"";r.path=p+c}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&r.pathname.charAt(0)==="/",w=e.host||e.pathname&&e.pathname.charAt(0)==="/",_=w||g||r.host&&e.pathname,b=_,m=r.pathname&&r.pathname.split("/")||[],E=r.protocol&&!Or[r.protocol];f=e.pathname&&e.pathname.split("/")||[],E&&(r.hostname="",r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(f[0]===""?f[0]=e.host:f.unshift(e.host)),e.host=null),_=_&&(f[0]===""||m[0]===""));var T;if(w)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,m=f;else if(f.length)m||(m=[]),m.pop(),m=m.concat(f),r.search=e.search,r.query=e.query;else if(!Sa(e.search))return E&&(r.hostname=r.host=m.shift(),T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),r.search=e.search,r.query=e.query,(!_t(r.pathname)||!_t(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=m.slice(-1)[0],A=(r.host||e.host||m.length>1)&&(C==="."||C==="..")||C==="",O=0,L=m.length;L>=0;L--)C=m[L],C==="."?m.splice(L,1):C===".."?(m.splice(L,1),O++):O&&(m.splice(L,1),O--);if(!_&&!b)for(;O--;O)m.unshift("..");_&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),A&&m.join("/").substr(-1)!=="/"&&m.push("");var F=m[0]===""||m[0]&&m[0].charAt(0)==="/";return E&&(r.hostname=r.host=F?"":m.length?m.shift():"",T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),_=_||r.host&&m.length,_&&!F&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),(!_t(r.pathname)||!_t(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};et.prototype.parseHost=function(){return Qh(this)};function Qh(e){var t=e.host,r=fy.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}var Fa=hn(globalThis.fetch)&&hn(globalThis.ReadableStream),Gr;function yy(){if(typeof Gr<"u")return Gr;try{new globalThis.Blob([new ArrayBuffer(1)]),Gr=!0}catch{Gr=!1}return Gr}var $t;function Ua(e){$t||($t=new globalThis.XMLHttpRequest,$t.open("GET",globalThis.location.host?"/":"https://example.com"));try{return $t.responseType=e,$t.responseType===e}catch{return!1}}var qa=typeof globalThis.ArrayBuffer<"u",vy=qa&&hn(globalThis.ArrayBuffer.prototype.slice),wy=qa&&Ua("arraybuffer"),by=!Fa&&vy&&Ua("ms-stream"),Ey=!Fa&&qa&&Ua("moz-chunked-arraybuffer"),ed=hn($t.overrideMimeType),Sy=hn(globalThis.VBArray);function hn(e){return typeof e=="function"}$t=null;function ar(){this.head=null,this.tail=null,this.length=0}ar.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};ar.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};ar.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};ar.prototype.clear=function(){this.head=this.tail=null,this.length=0};ar.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r};ar.prototype.concat=function(e){if(this.length===0)return S.alloc(0);if(this.length===1)return this.head.data;for(var t=S.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var td=Fo();ne.ReadableState=rd;var Q=ba("stream");_e(ne,j);function Ry(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function xy(e,t){return e.listeners(t).length}function rd(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Fe&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new ar,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new td.StringDecoder(e.encoding),this.encoding=e.encoding)}function ne(e){if(!(this instanceof ne))return new ne(e);this._readableState=new rd(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),j.call(this)}ne.prototype.push=function(e,t){var r=this._readableState;return!r.objectMode&&typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=S.from(e,t),t="")),nd(this,r,e,t,!1)};ne.prototype.unshift=function(e){var t=this._readableState;return nd(this,t,e,"",!0)};ne.prototype.isPaused=function(){return this._readableState.flowing===!1};function nd(e,t,r,n,i){var s=ky(t,r);if(s)e.emit("error",s);else if(r===null)t.reading=!1,Ay(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var l;t.decoder&&!i&&!n&&(r=t.decoder.write(r),l=!t.objectMode&&r.length===0),i||(t.reading=!1),l||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Gi(e))),Oy(e,t)}else i||(t.reading=!1);return Ty(t)}function Ty(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}ne.prototype.setEncoding=function(e){return this._readableState.decoder=new td.StringDecoder(e),this._readableState.encoding=e,this};var Ll=8388608;function Cy(e){return e>=Ll?e=Ll:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Dl(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Cy(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}ne.prototype.read=function(e){Q("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Q("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Js(this):Gi(this),null;if(e=Dl(e,t),e===0&&t.ended)return t.length===0&&Js(this),null;var n=t.needReadable;Q("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,Q("length less than watermark",n)),t.ended||t.reading?(n=!1,Q("reading or ended",n)):n&&(Q("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Dl(r,t)));var i;return e>0?i=id(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Js(this)),i!==null&&this.emit("data",i),i};function ky(e,t){var r=null;return!S.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Ay(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Gi(e)}}function Gi(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Q("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Oe(Il,e):Il(e))}function Il(e){Q("emit readable"),e.emit("readable"),$a(e)}function Oy(e,t){t.readingMore||(t.readingMore=!0,Oe(Ny,e,t))}function Ny(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Q("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}ne.prototype._read=function(e){this.emit("error",new Error("not implemented"))};ne.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,Q("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||t.end!==!1,s=i?a:u;n.endEmitted?Oe(s):r.once("end",s),e.on("unpipe",o);function o(_){Q("onunpipe"),_===r&&u()}function a(){Q("onend"),e.end()}var l=Ly(r);e.on("drain",l);var f=!1;function u(){Q("cleanup"),e.removeListener("close",c),e.removeListener("finish",g),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",u),r.removeListener("data",d),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}var h=!1;r.on("data",d);function d(_){Q("ondata"),h=!1;var b=e.write(_);b===!1&&!h&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&sd(n.pipes,e)!==-1)&&!f&&(Q("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,h=!0),r.pause())}function p(_){Q("onerror",_),w(),e.removeListener("error",p),xy(e,"error")===0&&e.emit("error",_)}Ry(e,"error",p);function c(){e.removeListener("finish",g),w()}e.once("close",c);function g(){Q("onfinish"),e.removeListener("close",c),w()}e.once("finish",g);function w(){Q("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(Q("pipe resume"),r.resume()),e};function Ly(e){return function(){var t=e._readableState;Q("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,$a(e))}}ne.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var s=sd(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};ne.prototype.on=function(e,t){var r=j.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Gi(this):Oe(Dy,this))}return r};ne.prototype.addListener=ne.prototype.on;function Dy(e){Q("readable nexttick read 0"),e.read(0)}ne.prototype.resume=function(){var e=this._readableState;return e.flowing||(Q("resume"),e.flowing=!0,Iy(this,e)),this};function Iy(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Oe(Py,e,t))}function Py(e,t){t.reading||(Q("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),$a(e),t.flowing&&!t.reading&&e.read(0)}ne.prototype.pause=function(){return Q("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Q("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function $a(e){var t=e._readableState;for(Q("flow",t.flowing);t.flowing&&e.read()!==null;);}ne.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(Q("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),e.on("data",function(o){if(Q("wrapped data"),t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&o==null)&&!(!t.objectMode&&(!o||!o.length))){var a=n.push(o);a||(r=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(o){return function(){return e[o].apply(e,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return qy(s,function(o){e.on(o,n.emit.bind(n,o))}),n._read=function(o){Q("wrapped _read",o),r&&(r=!1,e.resume())},n};ne._fromList=id;function id(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=By(e,t.buffer,t.decoder),r}function By(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?My(e,t):Fy(e,t),n}function My(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),e-=o,e===0){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}function Fy(e,t){var r=S.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),e-=o,e===0){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}function Js(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Oe(Uy,t,e))}function Uy(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function qy(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function sd(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}pe.WritableState=ja;_e(pe,j);function $y(){}function jy(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function ja(e,t){Object.defineProperty(this,"buffer",{get:Vi(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Fe&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){Gy(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ld(this)}ja.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};function pe(e){if(!(this instanceof pe)&&!(this instanceof Fe))return new pe(e);this._writableState=new ja(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),j.call(this)}pe.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function zy(e,t){var r=new Error("write after end");e.emit("error",r),Oe(t,r)}function Hy(e,t,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):!S.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),Oe(n,s),i=!1),i}pe.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return typeof t=="function"&&(r=t,t=null),S.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=$y),n.ended?zy(this,r):Hy(this,n,e,r)&&(n.pendingcb++,i=Vy(this,n,e,t,r)),i};pe.prototype.cork=function(){var e=this._writableState;e.corked++};pe.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&od(this,e))};pe.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Wy(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=S.from(t,r)),t}function Vy(e,t,r,n,i){r=Wy(t,r,n),S.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new jy(r,n,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else zo(e,t,!1,s,r,n,i);return o}function zo(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function Zy(e,t,r,n,i){--t.pendingcb,r?Oe(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function Yy(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Gy(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(Yy(r),t)Zy(e,r,n,t,i);else{var s=ad(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&od(e,r),n?Oe(Pl,e,r,s,i):Pl(e,r,s,i)}}function Pl(e,t,r,n){r||Ky(e,t),t.pendingcb--,n(),fd(e,t)}function Ky(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function od(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;zo(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new ld(t)}else{for(;r;){var a=r.chunk,l=r.encoding,f=r.callback,u=t.objectMode?1:a.length;if(zo(e,t,!1,u,a,l,f),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}pe.prototype._write=function(e,t,r){r(new Error("not implemented"))};pe.prototype._writev=null;pe.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Xy(this,n,r)};function ad(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Bl(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function fd(e,t){var r=ad(t);return r&&(t.pendingcb===0?(Bl(e,t),t.finished=!0,e.emit("finish")):Bl(e,t)),r}function Xy(e,t,r){t.ending=!0,fd(e,t),r&&(t.finished?Oe(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function ld(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}_e(Fe,ne);var Ml=Object.keys(pe.prototype);for(var Qs=0;Qs<Ml.length;Qs++){var eo=Ml[Qs];Fe.prototype[eo]||(Fe.prototype[eo]=pe.prototype[eo])}function Fe(e){if(!(this instanceof Fe))return new Fe(e);ne.call(this,e),pe.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Jy)}function Jy(){this.allowHalfOpen||this._writableState.ended||Oe(Qy,this)}function Qy(e){e.end()}_e(Ue,Fe);function ev(e){this.afterTransform=function(t,r){return tv(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function tv(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function Ue(e){if(!(this instanceof Ue))return new Ue(e);Fe.call(this,e),this._transformState=new ev(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){Fl(t,r)}):Fl(t)})}Ue.prototype.push=function(e,t){return this._transformState.needTransform=!1,Fe.prototype.push.call(this,e,t)};Ue.prototype._transform=function(e,t,r){throw new Error("Not implemented")};Ue.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ue.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function Fl(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}_e(dn,Ue);function dn(e){if(!(this instanceof dn))return new dn(e);Ue.call(this,e)}dn.prototype._transform=function(e,t,r){r(null,e)};_e(We,j);We.Readable=ne;We.Writable=pe;We.Duplex=Fe;We.Transform=Ue;We.PassThrough=dn;We.Stream=We;function We(){j.call(this)}We.prototype.pipe=function(e,t){var r=this;function n(u){e.writable&&e.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",a));var s=!1;function o(){s||(s=!0,e.end())}function a(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function l(u){if(f(),j.listenerCount(this,"error")===0)throw u}r.on("error",l),e.on("error",l);function f(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",f),r.removeListener("close",f),e.removeListener("close",f)}return r.on("end",f),r.on("close",f),e.on("close",f),e.emit("pipe",r),e};var jt={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function Ki(e,t,r){var n=this;ne.call(n),n._mode=r,n.headers={},n.rawHeaders=[],n.trailers={},n.rawTrailers=[],n.on("end",function(){B.nextTick(function(){n.emit("close")})});var i;if(r==="fetch"){n._fetchResponse=t,n.url=t.url,n.statusCode=t.status,n.statusMessage=t.statusText;for(var s,o,a=t.headers[Symbol.iterator]();s=(o=a.next()).value,!o.done;)n.headers[s[0].toLowerCase()]=s[1],n.rawHeaders.push(s[0],s[1]);var l=t.body.getReader();i=function(){l.read().then(function(d){if(!n._destroyed){if(d.done){n.push(null);return}n.push(new S(d.value)),i()}})},i()}else{n._xhr=e,n._pos=0,n.url=e.responseURL,n.statusCode=e.status,n.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(d){var p=d.match(/^([^:]+):\s*(.*)/);if(p){var c=p[1].toLowerCase();c==="set-cookie"?(n.headers[c]===void 0&&(n.headers[c]=[]),n.headers[c].push(p[2])):n.headers[c]!==void 0?n.headers[c]+=", "+p[2]:n.headers[c]=p[2],n.rawHeaders.push(p[1],p[2])}}),n._charset="x-user-defined",!ed){var u=n.rawHeaders["mime-type"];if(u){var h=u.match(/;\s*charset=([^;])(;|$)/);h&&(n._charset=h[1].toLowerCase())}n._charset||(n._charset="utf-8")}}}_e(Ki,ne);Ki.prototype._read=function(){};Ki.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==jt.DONE)break;try{r=new globalThis.VBArray(t.responseBody).toArray()}catch{}if(r!==null){e.push(new S(r));break}case"text":try{r=t.responseText}catch{e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if(e._charset==="x-user-defined"){for(var i=new S(n.length),s=0;s<n.length;s++)i[s]=n.charCodeAt(s)&255;e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==jt.DONE||!t.response)break;r=t.response,e.push(new S(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==jt.LOADING||!r)break;e.push(new S(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==jt.LOADING)break;var o=new globalThis.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new S(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(r);break}e._xhr.readyState===jt.DONE&&e._mode!=="ms-stream"&&e.push(null)};function rv(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(Ot(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")}function nv(e,t){return Fa&&t?"fetch":Ey?"moz-chunked-arraybuffer":by?"ms-stream":wy&&e?"arraybuffer":Sy&&e?"text:vbarray":"text"}function Ee(e){var t=this;pe.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new S(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(i){t.setHeader(i,e.headers[i])});var r,n=!0;if(e.mode==="disable-fetch")n=!1,r=!0;else if(e.mode==="prefer-streaming")r=!1;else if(e.mode==="allow-wrong-content-type")r=!ed;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");t._mode=nv(r,n),t.on("finish",function(){t._onFinish()})}_e(Ee,pe);var iv=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Ee.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();iv.indexOf(n)===-1&&(r._headers[n]={name:e,value:t})};Ee.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};Ee.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};Ee.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(yy()?n=new globalThis.Blob(e._body.map(function(o){return rv(o)}),{type:(r["content-type"]||{}).value||""}):n=S.concat(e._body).toString()),e._mode==="fetch"){var i=Object.keys(r).map(function(o){return[r[o].name,r[o].value]});globalThis.fetch(e._opts.url,{method:e._opts.method,headers:i,body:n,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(o){e._fetchResponse=o,e._connect()},function(o){e.emit("error",o)})}else{var s=e._xhr=new globalThis.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(o){B.nextTick(function(){e.emit("error",o)});return}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(o){s.setRequestHeader(r[o].name,r[o].value)}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case jt.LOADING:case jt.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(n)}catch(o){B.nextTick(function(){e.emit("error",o)});return}}}};function sv(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}Ee.prototype._onXHRProgress=function(){var e=this;!sv(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};Ee.prototype._connect=function(){var e=this;e._destroyed||(e._response=new Ki(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};Ee.prototype._write=function(e,t,r){var n=this;n._body.push(e),r()};Ee.prototype.abort=Ee.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};Ee.prototype.end=function(e,t,r){var n=this;typeof e=="function"&&(r=e,e=void 0),pe.prototype.end.call(n,e,t,r)};Ee.prototype.flushHeaders=function(){};Ee.prototype.setTimeout=function(){};Ee.prototype.setNoDelay=function(){};Ee.prototype.setSocketKeepAlive=function(){};function ud(e,t){typeof e=="string"&&(e=Cn(e));var r=globalThis.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||r,i=e.hostname||e.host,s=e.port,o=e.path||"/";i&&i.indexOf(":")!==-1&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(s?":"+s:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new Ee(e);return t&&a.on("response",t),a}function ov(e,t){var r=ud(e,t);return r.end(),r}function cd(){}cd.defaultMaxSockets=4;var av=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],fv={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};const Mt={request:ud,get:ov,Agent:cd,METHODS:av,STATUS_CODES:fv},hd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function lv(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function mt(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var s=0;s<n;s++)e[i+s]=t[r+s]}var ki=Uint8Array,Be=Uint16Array,Ai=Int32Array,uv=4,Ul=0,ql=1,cv=2;function $r(e){for(var t=e.length;--t>=0;)e[t]=0}var hv=0,dd=1,dv=2,pv=3,_v=258,za=29,kn=256,pn=kn+1+za,Nr=30,Ha=19,pd=2*pn+1,Vt=15,to=16,gv=7,Wa=256,_d=16,gd=17,md=18,Ho=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ci=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mv=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],yd=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],yv=512,ct=new Array((pn+2)*2);$r(ct);var fn=new Array(Nr*2);$r(fn);var _n=new Array(yv);$r(_n);var gn=new Array(_v-pv+1);$r(gn);var Va=new Array(za);$r(Va);var Oi=new Array(Nr);$r(Oi);function ro(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var vd,wd,bd;function no(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Ed(e){return e<256?_n[e]:_n[256+(e>>>7)]}function mn(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function ke(e,t,r){e.bi_valid>to-r?(e.bi_buf|=t<<e.bi_valid&65535,mn(e,e.bi_buf),e.bi_buf=t>>to-e.bi_valid,e.bi_valid+=r-to):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Xe(e,t,r){ke(e,r[t*2],r[t*2+1])}function Sd(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function vv(e){e.bi_valid===16?(mn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function wv(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,u,h,d,p,c,g=0;for(d=0;d<=Vt;d++)e.bl_count[d]=0;for(r[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<pd;f++)u=e.heap[f],d=r[r[u*2+1]*2+1]+1,d>l&&(d=l,g++),r[u*2+1]=d,!(u>n)&&(e.bl_count[d]++,p=0,u>=a&&(p=o[u-a]),c=r[u*2],e.opt_len+=c*(d+p),s&&(e.static_len+=c*(i[u*2+1]+p)));if(g!==0){do{for(d=l-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(d=l;d!==0;d--)for(u=e.bl_count[d];u!==0;)h=e.heap[--f],!(h>n)&&(r[h*2+1]!==d&&(e.opt_len+=(d-r[h*2+1])*r[h*2],r[h*2+1]=d),u--)}}function Rd(e,t,r){var n=new Array(Vt+1),i=0,s,o;for(s=1;s<=Vt;s++)n[s]=i=i+r[s-1]<<1;for(o=0;o<=t;o++){var a=e[o*2+1];a!==0&&(e[o*2]=Sd(n[a]++,a))}}function bv(){var e,t,r,n,i,s=new Array(Vt+1);for(r=0,n=0;n<za-1;n++)for(Va[n]=r,e=0;e<1<<Ho[n];e++)gn[r++]=n;for(gn[r-1]=n,i=0,n=0;n<16;n++)for(Oi[n]=i,e=0;e<1<<ci[n];e++)_n[i++]=n;for(i>>=7;n<Nr;n++)for(Oi[n]=i<<7,e=0;e<1<<ci[n]-7;e++)_n[256+i++]=n;for(t=0;t<=Vt;t++)s[t]=0;for(e=0;e<=143;)ct[e*2+1]=8,e++,s[8]++;for(;e<=255;)ct[e*2+1]=9,e++,s[9]++;for(;e<=279;)ct[e*2+1]=7,e++,s[7]++;for(;e<=287;)ct[e*2+1]=8,e++,s[8]++;for(Rd(ct,pn+1,s),e=0;e<Nr;e++)fn[e*2+1]=5,fn[e*2]=Sd(e,5);vd=new ro(ct,Ho,kn+1,pn,Vt),wd=new ro(fn,ci,0,Nr,Vt),bd=new ro(new Array(0),mv,0,Ha,gv)}function xd(e){var t;for(t=0;t<pn;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Nr;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Ha;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Wa*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Td(e){e.bi_valid>8?mn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Ev(e,t,r,n){Td(e),n&&(mn(e,r),mn(e,~r)),mt(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function $l(e,t,r,n){var i=t*2,s=r*2;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function io(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&$l(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!$l(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function jl(e,t,r){var n,i,s=0,o,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,n===0?Xe(e,i,t):(o=gn[i],Xe(e,o+kn+1,t),a=Ho[o],a!==0&&(i-=Va[o],ke(e,i,a)),n--,o=Ed(n),Xe(e,o,r),a=ci[o],a!==0&&(n-=Oi[o],ke(e,n,a)));while(s<e.last_lit);Xe(e,Wa,t)}function Wo(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems,o,a,l=-1,f;for(e.heap_len=0,e.heap_max=pd,o=0;o<s;o++)r[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,r[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=n[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)io(e,r,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],io(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[f*2]=r[o*2]+r[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[o*2+1]=r[a*2+1]=f,e.heap[1]=f++,io(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],wv(e,t),Rd(r,l,e.bl_count)}function zl(e,t,r){var n,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=t[(n+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[_d*2]++):a<=10?e.bl_tree[gd*2]++:e.bl_tree[md*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))}function Hl(e,t,r){var n,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),n=0;n<=r;n++)if(s=o,o=t[(n+1)*2+1],!(++a<l&&s===o)){if(a<f)do Xe(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Xe(e,s,e.bl_tree),a--),Xe(e,_d,e.bl_tree),ke(e,a-3,2)):a<=10?(Xe(e,gd,e.bl_tree),ke(e,a-3,3)):(Xe(e,md,e.bl_tree),ke(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}}function Sv(e){var t;for(zl(e,e.dyn_ltree,e.l_desc.max_code),zl(e,e.dyn_dtree,e.d_desc.max_code),Wo(e,e.bl_desc),t=Ha-1;t>=3&&e.bl_tree[yd[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Rv(e,t,r,n){var i;for(ke(e,t-257,5),ke(e,r-1,5),ke(e,n-4,4),i=0;i<n;i++)ke(e,e.bl_tree[yd[i]*2+1],3);Hl(e,e.dyn_ltree,t-1),Hl(e,e.dyn_dtree,r-1)}function xv(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Ul;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return ql;for(r=32;r<kn;r++)if(e.dyn_ltree[r*2]!==0)return ql;return Ul}var Wl=!1;function Tv(e){Wl||(bv(),Wl=!0),e.l_desc=new no(e.dyn_ltree,vd),e.d_desc=new no(e.dyn_dtree,wd),e.bl_desc=new no(e.bl_tree,bd),e.bi_buf=0,e.bi_valid=0,xd(e)}function Cd(e,t,r,n){ke(e,(hv<<1)+(n?1:0),3),Ev(e,t,r,!0)}function Cv(e){ke(e,dd<<1,3),Xe(e,Wa,ct),vv(e)}function kv(e,t,r,n){var i,s,o=0;e.level>0?(e.strm.data_type===cv&&(e.strm.data_type=xv(e)),Wo(e,e.l_desc),Wo(e,e.d_desc),o=Sv(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&t!==-1?Cd(e,t,r,n):e.strategy===uv||s===i?(ke(e,(dd<<1)+(n?1:0),3),jl(e,ct,fn)):(ke(e,(dv<<1)+(n?1:0),3),Rv(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),jl(e,e.dyn_ltree,e.dyn_dtree)),xd(e),n&&Td(e)}function It(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(gn[r]+kn+1)*2]++,e.dyn_dtree[Ed(t)*2]++),e.last_lit===e.lit_bufsize-1}function Vo(e,t,r,n){for(var i=e&65535|0,s=e>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function Av(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var Ov=Av();function me(e,t,r,n){var i=Ov,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1}var fr=0,Nv=1,Lv=3,Pt=4,Vl=5,kt=0,Zl=1,Bt=-2,Dv=-3,so=-5,Iv=-1,Pv=1,Zn=2,Bv=3,Mv=4,Fv=2,Za=8,Uv=9,qv=29,$v=256,Zo=$v+1+qv,jv=30,zv=19,Hv=2*Zo+1,Wv=15,J=3,Nt=258,He=Nt+J+1,Vv=32,Ya=42,Yo=69,hi=73,di=91,pi=103,Zt=113,nn=666,de=1,An=2,Xt=3,jr=4,Zv=3;function Lt(e,t){return e.msg=hd[t],t}function Yl(e){return(e<<1)-(e>4?9:0)}function zt(e){for(var t=e.length;--t>=0;)e[t]=0}function Rt(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(mt(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function we(e,t){kv(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Rt(e.strm)}function K(e,t){e.pending_buf[e.pending++]=t}function Kr(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function Yv(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,mt(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=Vo(e.adler,t,i,r):e.state.wrap===2&&(e.adler=me(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function kd(e,t){var r=e.max_chain_length,n=e.strstart,i,s,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-He?e.strstart-(e.w_size-He):0,f=e.window,u=e.w_mask,h=e.prev,d=e.strstart+Nt,p=f[n+o-1],c=f[n+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==c||f[i+o-1]!==p||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<d);if(s=Nt-(d-n),n=d-Nt,s>o){if(e.match_start=t,o=s,s>=a)break;p=f[n+o-1],c=f[n+o]}}while((t=h[t&u])>l&&--r!==0);return o<=e.lookahead?o:e.lookahead}function On(e){var t=e.w_size,r,n,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-He)){mt(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);s+=t}if(e.strm.avail_in===0)break;if(n=Yv(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=J)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+J-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<J)););}while(e.lookahead<He&&e.strm.avail_in!==0)}function Gv(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(On(e),e.lookahead===0&&t===fr)return de;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,we(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-He&&(we(e,!1),e.strm.avail_out===0))return de}return e.insert=0,t===Pt?(we(e,!0),e.strm.avail_out===0?Xt:jr):(e.strstart>e.block_start&&(we(e,!1),e.strm.avail_out===0),de)}function oo(e,t){for(var r,n;;){if(e.lookahead<He){if(On(e),e.lookahead<He&&t===fr)return de;if(e.lookahead===0)break}if(r=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-He&&(e.match_length=kd(e,r)),e.match_length>=J)if(n=It(e,e.strstart-e.match_start,e.match_length-J),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=J){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(we(e,!1),e.strm.avail_out===0))return de}return e.insert=e.strstart<J-1?e.strstart:J-1,t===Pt?(we(e,!0),e.strm.avail_out===0?Xt:jr):e.last_lit&&(we(e,!1),e.strm.avail_out===0)?de:An}function vr(e,t){for(var r,n,i;;){if(e.lookahead<He){if(On(e),e.lookahead<He&&t===fr)return de;if(e.lookahead===0)break}if(r=0,e.lookahead>=J&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=J-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-He&&(e.match_length=kd(e,r),e.match_length<=5&&(e.strategy===Pv||e.match_length===J&&e.strstart-e.match_start>4096)&&(e.match_length=J-1)),e.prev_length>=J&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-J,n=It(e,e.strstart-1-e.prev_match,e.prev_length-J),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+J-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=J-1,e.strstart++,n&&(we(e,!1),e.strm.avail_out===0))return de}else if(e.match_available){if(n=It(e,0,e.window[e.strstart-1]),n&&we(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return de}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=It(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<J-1?e.strstart:J-1,t===Pt?(we(e,!0),e.strm.avail_out===0?Xt:jr):e.last_lit&&(we(e,!1),e.strm.avail_out===0)?de:An}function Kv(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=Nt){if(On(e),e.lookahead<=Nt&&t===fr)return de;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=J&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+Nt;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=Nt-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=J?(r=It(e,1,e.match_length-J),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(we(e,!1),e.strm.avail_out===0))return de}return e.insert=0,t===Pt?(we(e,!0),e.strm.avail_out===0?Xt:jr):e.last_lit&&(we(e,!1),e.strm.avail_out===0)?de:An}function Xv(e,t){for(var r;;){if(e.lookahead===0&&(On(e),e.lookahead===0)){if(t===fr)return de;break}if(e.match_length=0,r=It(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(we(e,!1),e.strm.avail_out===0))return de}return e.insert=0,t===Pt?(we(e,!0),e.strm.avail_out===0?Xt:jr):e.last_lit&&(we(e,!1),e.strm.avail_out===0)?de:An}function Ze(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var xr;xr=[new Ze(0,0,0,0,Gv),new Ze(4,4,8,4,oo),new Ze(4,5,16,8,oo),new Ze(4,6,32,32,oo),new Ze(4,4,16,16,vr),new Ze(8,16,32,32,vr),new Ze(8,16,128,128,vr),new Ze(8,32,128,256,vr),new Ze(32,128,258,1024,vr),new Ze(32,258,258,4096,vr)];function Jv(e){e.window_size=2*e.w_size,zt(e.head),e.max_lazy_match=xr[e.level].max_lazy,e.good_match=xr[e.level].good_length,e.nice_match=xr[e.level].nice_length,e.max_chain_length=xr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=J-1,e.match_available=0,e.ins_h=0}function Qv(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Za,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Be(Hv*2),this.dyn_dtree=new Be((2*jv+1)*2),this.bl_tree=new Be((2*zv+1)*2),zt(this.dyn_ltree),zt(this.dyn_dtree),zt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Be(Wv+1),this.heap=new Be(2*Zo+1),zt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Be(2*Zo+1),zt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ew(e){var t;return!e||!e.state?Lt(e,Bt):(e.total_in=e.total_out=0,e.data_type=Fv,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Ya:Zt,e.adler=t.wrap===2?0:1,t.last_flush=fr,Tv(t),kt)}function Ad(e){var t=ew(e);return t===kt&&Jv(e.state),t}function tw(e,t,r,n,i,s){if(!e)return Bt;var o=1;if(t===Iv&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>Uv||r!==Za||n<8||n>15||t<0||t>9||s<0||s>Mv)return Lt(e,Bt);n===8&&(n=9);var a=new Qv;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+J-1)/J),a.window=new ki(a.w_size*2),a.head=new Be(a.hash_size),a.prev=new Be(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new ki(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=s,a.method=r,Ad(e)}function rw(e,t){var r,n,i,s;if(!e||!e.state||t>Vl||t<0)return e?Lt(e,Bt):Bt;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===nn&&t!==Pt)return Lt(e,e.avail_out===0?so:Bt);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===Ya)if(n.wrap===2)e.adler=0,K(n,31),K(n,139),K(n,8),n.gzhead?(K(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),K(n,n.gzhead.time&255),K(n,n.gzhead.time>>8&255),K(n,n.gzhead.time>>16&255),K(n,n.gzhead.time>>24&255),K(n,n.level===9?2:n.strategy>=Zn||n.level<2?4:0),K(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(K(n,n.gzhead.extra.length&255),K(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=me(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Yo):(K(n,0),K(n,0),K(n,0),K(n,0),K(n,0),K(n,n.level===9?2:n.strategy>=Zn||n.level<2?4:0),K(n,Zv),n.status=Zt);else{var o=Za+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=Zn||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=Vv),o+=31-o%31,n.status=Zt,Kr(n,o),n.strstart!==0&&(Kr(n,e.adler>>>16),Kr(n,e.adler&65535)),e.adler=1}if(n.status===Yo)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),Rt(e),i=n.pending,n.pending===n.pending_buf_size));)K(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=hi)}else n.status=hi;if(n.status===hi)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),Rt(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,K(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=di)}else n.status=di;if(n.status===di)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),Rt(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,K(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=me(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=pi)}else n.status=pi;if(n.status===pi&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Rt(e),n.pending+2<=n.pending_buf_size&&(K(n,e.adler&255),K(n,e.adler>>8&255),e.adler=0,n.status=Zt)):n.status=Zt),n.pending!==0){if(Rt(e),e.avail_out===0)return n.last_flush=-1,kt}else if(e.avail_in===0&&Yl(t)<=Yl(r)&&t!==Pt)return Lt(e,so);if(n.status===nn&&e.avail_in!==0)return Lt(e,so);if(e.avail_in!==0||n.lookahead!==0||t!==fr&&n.status!==nn){var l=n.strategy===Zn?Xv(n,t):n.strategy===Bv?Kv(n,t):xr[n.level].func(n,t);if((l===Xt||l===jr)&&(n.status=nn),l===de||l===Xt)return e.avail_out===0&&(n.last_flush=-1),kt;if(l===An&&(t===Nv?Cv(n):t!==Vl&&(Cd(n,0,0,!1),t===Lv&&(zt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Rt(e),e.avail_out===0))return n.last_flush=-1,kt}return t!==Pt?kt:n.wrap<=0?Zl:(n.wrap===2?(K(n,e.adler&255),K(n,e.adler>>8&255),K(n,e.adler>>16&255),K(n,e.adler>>24&255),K(n,e.total_in&255),K(n,e.total_in>>8&255),K(n,e.total_in>>16&255),K(n,e.total_in>>24&255)):(Kr(n,e.adler>>>16),Kr(n,e.adler&65535)),Rt(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?kt:Zl)}function nw(e){var t;return!e||!e.state?Bt:(t=e.state.status,t!==Ya&&t!==Yo&&t!==hi&&t!==di&&t!==pi&&t!==Zt&&t!==nn?Lt(e,Bt):(e.state=null,t===Zt?Lt(e,Dv):kt))}var Yn=30,iw=12;function sw(e,t){var r,n,i,s,o,a,l,f,u,h,d,p,c,g,w,_,b,m,E,T,C,A,O,L,F;r=e.state,n=e.next_in,L=e.input,i=n+(e.avail_in-5),s=e.next_out,F=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=r.dmax,f=r.wsize,u=r.whave,h=r.wnext,d=r.window,p=r.hold,c=r.bits,g=r.lencode,w=r.distcode,_=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{c<15&&(p+=L[n++]<<c,c+=8,p+=L[n++]<<c,c+=8),m=g[p&_];t:for(;;){if(E=m>>>24,p>>>=E,c-=E,E=m>>>16&255,E===0)F[s++]=m&65535;else if(E&16){T=m&65535,E&=15,E&&(c<E&&(p+=L[n++]<<c,c+=8),T+=p&(1<<E)-1,p>>>=E,c-=E),c<15&&(p+=L[n++]<<c,c+=8,p+=L[n++]<<c,c+=8),m=w[p&b];r:for(;;){if(E=m>>>24,p>>>=E,c-=E,E=m>>>16&255,E&16){if(C=m&65535,E&=15,c<E&&(p+=L[n++]<<c,c+=8,c<E&&(p+=L[n++]<<c,c+=8)),C+=p&(1<<E)-1,C>l){e.msg="invalid distance too far back",r.mode=Yn;break e}if(p>>>=E,c-=E,E=s-o,C>E){if(E=C-E,E>u&&r.sane){e.msg="invalid distance too far back",r.mode=Yn;break e}if(A=0,O=d,h===0){if(A+=f-E,E<T){T-=E;do F[s++]=d[A++];while(--E);A=s-C,O=F}}else if(h<E){if(A+=f+h-E,E-=h,E<T){T-=E;do F[s++]=d[A++];while(--E);if(A=0,h<T){E=h,T-=E;do F[s++]=d[A++];while(--E);A=s-C,O=F}}}else if(A+=h-E,E<T){T-=E;do F[s++]=d[A++];while(--E);A=s-C,O=F}for(;T>2;)F[s++]=O[A++],F[s++]=O[A++],F[s++]=O[A++],T-=3;T&&(F[s++]=O[A++],T>1&&(F[s++]=O[A++]))}else{A=s-C;do F[s++]=F[A++],F[s++]=F[A++],F[s++]=F[A++],T-=3;while(T>2);T&&(F[s++]=F[A++],T>1&&(F[s++]=F[A++]))}}else if(E&64){e.msg="invalid distance code",r.mode=Yn;break e}else{m=w[(m&65535)+(p&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){r.mode=iw;break e}else{e.msg="invalid literal/length code",r.mode=Yn;break e}else{m=g[(m&65535)+(p&(1<<E)-1)];continue t}break}}while(n<i&&s<a);T=c>>3,n-=T,c-=T<<3,p&=(1<<c)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<a?257+(a-s):257-(s-a),r.hold=p,r.bits=c}var wr=15,Gl=852,Kl=592,Xl=0,ao=1,Jl=2,ow=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],aw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],fw=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],lw=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function ln(e,t,r,n,i,s,o,a){var l=a.bits,f=0,u=0,h=0,d=0,p=0,c=0,g=0,w=0,_=0,b=0,m,E,T,C,A,O=null,L=0,F,P=new Be(wr+1),U=new Be(wr+1),q=null,X=0,oe,H,te;for(f=0;f<=wr;f++)P[f]=0;for(u=0;u<n;u++)P[t[r+u]]++;for(p=l,d=wr;d>=1&&P[d]===0;d--);if(p>d&&(p=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(h=1;h<d&&P[h]===0;h++);for(p<h&&(p=h),w=1,f=1;f<=wr;f++)if(w<<=1,w-=P[f],w<0)return-1;if(w>0&&(e===Xl||d!==1))return-1;for(U[1]=0,f=1;f<wr;f++)U[f+1]=U[f]+P[f];for(u=0;u<n;u++)t[r+u]!==0&&(o[U[t[r+u]]++]=u);if(e===Xl?(O=q=o,F=19):e===ao?(O=ow,L-=257,q=aw,X-=257,F=256):(O=fw,q=lw,F=-1),b=0,u=0,f=h,A=s,c=p,g=0,T=-1,_=1<<p,C=_-1,e===ao&&_>Gl||e===Jl&&_>Kl)return 1;for(;;){oe=f-g,o[u]<F?(H=0,te=o[u]):o[u]>F?(H=q[X+o[u]],te=O[L+o[u]]):(H=32+64,te=0),m=1<<f-g,E=1<<c,h=E;do E-=m,i[A+(b>>g)+E]=oe<<24|H<<16|te|0;while(E!==0);for(m=1<<f-1;b&m;)m>>=1;if(m!==0?(b&=m-1,b+=m):b=0,u++,--P[f]===0){if(f===d)break;f=t[r+o[u]]}if(f>p&&(b&C)!==T){for(g===0&&(g=p),A+=h,c=f-g,w=1<<c;c+g<d&&(w-=P[c+g],!(w<=0));)c++,w<<=1;if(_+=1<<c,e===ao&&_>Gl||e===Jl&&_>Kl)return 1;T=b&C,i[T]=p<<24|c<<16|A-s|0}}return b!==0&&(i[A+b]=f-g<<24|64<<16|0),a.bits=p,0}var uw=0,Od=1,Nd=2,Ql=4,cw=5,Gn=6,yn=0,hw=1,dw=2,Ft=-2,pw=-3,_w=-4,gw=-5,eu=8,Ld=1,tu=2,ru=3,nu=4,iu=5,su=6,ou=7,au=8,fu=9,lu=10,uu=11,ft=12,fo=13,cu=14,lo=15,hu=16,du=17,pu=18,_u=19,Kn=20,Xn=21,gu=22,mu=23,yu=24,vu=25,wu=26,uo=27,bu=28,Eu=29,re=30,mw=31,yw=32,vw=852,ww=592;function Su(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function bw(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Be(320),this.work=new Be(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ew(e){var t;return!e||!e.state?Ft:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Ld,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Ai(vw),t.distcode=t.distdyn=new Ai(ww),t.sane=1,t.back=-1,yn)}function Dd(e){var t;return!e||!e.state?Ft:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Ew(e))}function Sw(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Ft:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Dd(e))}function Rw(e,t){var r,n;return e?(n=new bw,e.state=n,n.window=null,r=Sw(e,t),r!==yn&&(e.state=null),r):Ft}var Ru=!0,co,ho;function xw(e){if(Ru){var t;for(co=new Ai(512),ho=new Ai(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ln(Od,e.lens,0,288,co,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ln(Nd,e.lens,0,32,ho,0,e.work,{bits:5}),Ru=!1}e.lencode=co,e.lenbits=9,e.distcode=ho,e.distbits=5}function Tw(e,t,r,n){var i,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new ki(s.wsize)),n>=s.wsize?(mt(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),mt(s.window,t,r-n,i,s.wnext),n-=i,n?(mt(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function Cw(e,t){var r,n,i,s,o,a,l,f,u,h,d,p,c,g,w=0,_,b,m,E,T,C,A,O,L=new ki(4),F,P,U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Ft;r=e.state,r.mode===ft&&(r.mode=fo),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,f=r.hold,u=r.bits,h=a,d=l,O=yn;e:for(;;)switch(r.mode){case Ld:if(r.wrap===0){r.mode=fo;break}for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.wrap&2&&f===35615){r.check=0,L[0]=f&255,L[1]=f>>>8&255,r.check=me(r.check,L,2,0),f=0,u=0,r.mode=tu;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=re;break}if((f&15)!==eu){e.msg="unknown compression method",r.mode=re;break}if(f>>>=4,u-=4,A=(f&15)+8,r.wbits===0)r.wbits=A;else if(A>r.wbits){e.msg="invalid window size",r.mode=re;break}r.dmax=1<<A,e.adler=r.check=1,r.mode=f&512?lu:ft,f=0,u=0;break;case tu:for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.flags=f,(r.flags&255)!==eu){e.msg="unknown compression method",r.mode=re;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=re;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&(L[0]=f&255,L[1]=f>>>8&255,r.check=me(r.check,L,2,0)),f=0,u=0,r.mode=ru;case ru:for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.head&&(r.head.time=f),r.flags&512&&(L[0]=f&255,L[1]=f>>>8&255,L[2]=f>>>16&255,L[3]=f>>>24&255,r.check=me(r.check,L,4,0)),f=0,u=0,r.mode=nu;case nu:for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&(L[0]=f&255,L[1]=f>>>8&255,r.check=me(r.check,L,2,0)),f=0,u=0,r.mode=iu;case iu:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&(L[0]=f&255,L[1]=f>>>8&255,r.check=me(r.check,L,2,0)),f=0,u=0}else r.head&&(r.head.extra=null);r.mode=su;case su:if(r.flags&1024&&(p=r.length,p>a&&(p=a),p&&(r.head&&(A=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),mt(r.head.extra,n,s,p,A)),r.flags&512&&(r.check=me(r.check,n,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=ou;case ou:if(r.flags&2048){if(a===0)break e;p=0;do A=n[s+p++],r.head&&A&&r.length<65536&&(r.head.name+=String.fromCharCode(A));while(A&&p<a);if(r.flags&512&&(r.check=me(r.check,n,p,s)),a-=p,s+=p,A)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=au;case au:if(r.flags&4096){if(a===0)break e;p=0;do A=n[s+p++],r.head&&A&&r.length<65536&&(r.head.comment+=String.fromCharCode(A));while(A&&p<a);if(r.flags&512&&(r.check=me(r.check,n,p,s)),a-=p,s+=p,A)break e}else r.head&&(r.head.comment=null);r.mode=fu;case fu:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=re;break}f=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=ft;break;case lu:for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}e.adler=r.check=Su(f),f=0,u=0,r.mode=uu;case uu:if(r.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,dw;e.adler=r.check=1,r.mode=ft;case ft:if(t===cw||t===Gn)break e;case fo:if(r.last){f>>>=u&7,u-=u&7,r.mode=uo;break}for(;u<3;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}switch(r.last=f&1,f>>>=1,u-=1,f&3){case 0:r.mode=cu;break;case 1:if(xw(r),r.mode=Kn,t===Gn){f>>>=2,u-=2;break e}break;case 2:r.mode=du;break;case 3:e.msg="invalid block type",r.mode=re}f>>>=2,u-=2;break;case cu:for(f>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=re;break}if(r.length=f&65535,f=0,u=0,r.mode=lo,t===Gn)break e;case lo:r.mode=hu;case hu:if(p=r.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;mt(i,n,s,p,o),a-=p,s+=p,l-=p,o+=p,r.length-=p;break}r.mode=ft;break;case du:for(;u<14;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.nlen=(f&31)+257,f>>>=5,u-=5,r.ndist=(f&31)+1,f>>>=5,u-=5,r.ncode=(f&15)+4,f>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=re;break}r.have=0,r.mode=pu;case pu:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.lens[U[r.have++]]=f&7,f>>>=3,u-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,F={bits:r.lenbits},O=ln(uw,r.lens,0,19,r.lencode,0,r.work,F),r.lenbits=F.bits,O){e.msg="invalid code lengths set",r.mode=re;break}r.have=0,r.mode=_u;case _u:for(;r.have<r.nlen+r.ndist;){for(;w=r.lencode[f&(1<<r.lenbits)-1],_=w>>>24,b=w>>>16&255,m=w&65535,!(_<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(m<16)f>>>=_,u-=_,r.lens[r.have++]=m;else{if(m===16){for(P=_+2;u<P;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f>>>=_,u-=_,r.have===0){e.msg="invalid bit length repeat",r.mode=re;break}A=r.lens[r.have-1],p=3+(f&3),f>>>=2,u-=2}else if(m===17){for(P=_+3;u<P;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=_,u-=_,A=0,p=3+(f&7),f>>>=3,u-=3}else{for(P=_+7;u<P;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=_,u-=_,A=0,p=11+(f&127),f>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=re;break}for(;p--;)r.lens[r.have++]=A}}if(r.mode===re)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=re;break}if(r.lenbits=9,F={bits:r.lenbits},O=ln(Od,r.lens,0,r.nlen,r.lencode,0,r.work,F),r.lenbits=F.bits,O){e.msg="invalid literal/lengths set",r.mode=re;break}if(r.distbits=6,r.distcode=r.distdyn,F={bits:r.distbits},O=ln(Nd,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,F),r.distbits=F.bits,O){e.msg="invalid distances set",r.mode=re;break}if(r.mode=Kn,t===Gn)break e;case Kn:r.mode=Xn;case Xn:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,sw(e,d),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,f=r.hold,u=r.bits,r.mode===ft&&(r.back=-1);break}for(r.back=0;w=r.lencode[f&(1<<r.lenbits)-1],_=w>>>24,b=w>>>16&255,m=w&65535,!(_<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(b&&!(b&240)){for(E=_,T=b,C=m;w=r.lencode[C+((f&(1<<E+T)-1)>>E)],_=w>>>24,b=w>>>16&255,m=w&65535,!(E+_<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=E,u-=E,r.back+=E}if(f>>>=_,u-=_,r.back+=_,r.length=m,b===0){r.mode=wu;break}if(b&32){r.back=-1,r.mode=ft;break}if(b&64){e.msg="invalid literal/length code",r.mode=re;break}r.extra=b&15,r.mode=gu;case gu:if(r.extra){for(P=r.extra;u<P;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=mu;case mu:for(;w=r.distcode[f&(1<<r.distbits)-1],_=w>>>24,b=w>>>16&255,m=w&65535,!(_<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(!(b&240)){for(E=_,T=b,C=m;w=r.distcode[C+((f&(1<<E+T)-1)>>E)],_=w>>>24,b=w>>>16&255,m=w&65535,!(E+_<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=E,u-=E,r.back+=E}if(f>>>=_,u-=_,r.back+=_,b&64){e.msg="invalid distance code",r.mode=re;break}r.offset=m,r.extra=b&15,r.mode=yu;case yu:if(r.extra){for(P=r.extra;u<P;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=re;break}r.mode=vu;case vu:if(l===0)break e;if(p=d-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=re;break}p>r.wnext?(p-=r.wnext,c=r.wsize-p):c=r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,c=o-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do i[o++]=g[c++];while(--p);r.length===0&&(r.mode=Xn);break;case wu:if(l===0)break e;i[o++]=r.length,l--,r.mode=Xn;break;case uo:if(r.wrap){for(;u<32;){if(a===0)break e;a--,f|=n[s++]<<u,u+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?me(r.check,i,d,o-d):Vo(r.check,i,d,o-d)),d=l,(r.flags?f:Su(f))!==r.check){e.msg="incorrect data check",r.mode=re;break}f=0,u=0}r.mode=bu;case bu:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=re;break}f=0,u=0}r.mode=Eu;case Eu:O=hw;break e;case re:O=pw;break e;case mw:return _w;case yw:default:return Ft}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<re&&(r.mode<uo||t!==Ql))&&Tw(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?me(r.check,i,d,e.next_out-d):Vo(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===ft?128:0)+(r.mode===Kn||r.mode===lo?256:0),(h===0&&d===0||t===Ql)&&O===yn&&(O=gw),O}function kw(e){if(!e||!e.state)return Ft;var t=e.state;return t.window&&(t.window=null),e.state=null,yn}var Ga=0,zr=1,Xi=2,vn=3,Ni=4,Br=5,wn=6,bn=7,Id=0,Pd=1,Bd=2,Md=3,Fd=4,Ud=5,Aw=6,Ji=0,qd=1,Ow=2,Nw=-1,Lw=-2,Dw=-3,Iw=-5,Pw=0,Bw=1,Mw=9,Fw=-1,Uw=1,qw=2,$w=3,jw=4,zw=0,Hw=0,Ww=1,Vw=2,$d=8;function at(e){if(e<zr||e>bn)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}at.prototype.init=function(e,t,r,n,i){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,(this.mode===vn||this.mode===Ni)&&(this.windowBits+=16),this.mode===bn&&(this.windowBits+=32),(this.mode===Br||this.mode===wn)&&(this.windowBits=-this.windowBits),this.strm=new lv;var s;switch(this.mode){case zr:case vn:case Br:s=tw(this.strm,this.level,$d,this.windowBits,this.memLevel,this.strategy);break;case Xi:case Ni:case wn:case bn:s=Rw(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(s!==Ji){this._error(s);return}this.write_in_progress=!1,this.init_done=!0};at.prototype.params=function(){throw new Error("deflateParams Not supported")};at.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===Ga)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};at.prototype.write=function(e,t,r,n,i,s,o){this._writeCheck(),this.write_in_progress=!0;var a=this;return B.nextTick(function(){a.write_in_progress=!1;var l=a._write(e,t,r,n,i,s,o);a.callback(l[0],l[1]),a.pending_close&&a.close()}),this};function Zw(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}at.prototype.writeSync=function(e,t,r,n,i,s,o){return this._writeCheck(),this._write(e,t,r,n,i,s,o)};at.prototype._write=function(e,t,r,n,i,s,o){if(this.write_in_progress=!0,e!==Id&&e!==Pd&&e!==Bd&&e!==Md&&e!==Fd&&e!==Ud)throw new Error("Invalid flush value");t==null&&(t=new S(0),n=0,r=0),i._set?i.set=i._set:i.set=Zw;var a=this.strm;a.avail_in=n,a.input=t,a.next_in=r,a.avail_out=o,a.output=i,a.next_out=s;var l;switch(this.mode){case zr:case vn:case Br:l=rw(a,e);break;case bn:case Xi:case Ni:case wn:l=Cw(a,e);break;default:throw new Error("Unknown mode "+this.mode)}return l!==qd&&l!==Ji&&this._error(l),this.write_in_progress=!1,[a.avail_in,a.avail_out]};at.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===zr||this.mode===vn||this.mode===Br?nw(this.strm):kw(this.strm),this.mode=Ga};var Jn;at.prototype.reset=function(){switch(this.mode){case zr:case Br:Jn=Ad(this.strm);break;case Xi:case wn:Jn=Dd(this.strm);break}Jn!==Ji&&this._error(Jn)};at.prototype._error=function(e){this.onerror(hd[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const xu=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:zr,DEFLATERAW:Br,GUNZIP:Ni,GZIP:vn,INFLATE:Xi,INFLATERAW:wn,NONE:Ga,UNZIP:bn,Z_BEST_COMPRESSION:Mw,Z_BEST_SPEED:Bw,Z_BINARY:Hw,Z_BLOCK:Ud,Z_BUF_ERROR:Iw,Z_DATA_ERROR:Dw,Z_DEFAULT_COMPRESSION:Fw,Z_DEFAULT_STRATEGY:zw,Z_DEFLATED:$d,Z_ERRNO:Nw,Z_FILTERED:Uw,Z_FINISH:Fd,Z_FIXED:jw,Z_FULL_FLUSH:Md,Z_HUFFMAN_ONLY:qw,Z_NEED_DICT:Ow,Z_NO_COMPRESSION:Pw,Z_NO_FLUSH:Id,Z_OK:Ji,Z_PARTIAL_FLUSH:Pd,Z_RLE:$w,Z_STREAM_END:qd,Z_STREAM_ERROR:Lw,Z_SYNC_FLUSH:Bd,Z_TEXT:Ww,Z_TREES:Aw,Z_UNKNOWN:Vw,Zlib:at},Symbol.toStringTag,{value:"Module"}));function Yw(e,t){if(!e)throw new Error(t)}var I={};Object.keys(xu).forEach(function(e){I[e]=xu[e]});I.Z_MIN_WINDOWBITS=8;I.Z_MAX_WINDOWBITS=15;I.Z_DEFAULT_WINDOWBITS=15;I.Z_MIN_CHUNK=64;I.Z_MAX_CHUNK=1/0;I.Z_DEFAULT_CHUNK=16*1024;I.Z_MIN_MEMLEVEL=1;I.Z_MAX_MEMLEVEL=9;I.Z_DEFAULT_MEMLEVEL=8;I.Z_MIN_LEVEL=-1;I.Z_MAX_LEVEL=9;I.Z_DEFAULT_LEVEL=I.Z_DEFAULT_COMPRESSION;var _i={Z_OK:I.Z_OK,Z_STREAM_END:I.Z_STREAM_END,Z_NEED_DICT:I.Z_NEED_DICT,Z_ERRNO:I.Z_ERRNO,Z_STREAM_ERROR:I.Z_STREAM_ERROR,Z_DATA_ERROR:I.Z_DATA_ERROR,Z_MEM_ERROR:I.Z_MEM_ERROR,Z_BUF_ERROR:I.Z_BUF_ERROR,Z_VERSION_ERROR:I.Z_VERSION_ERROR};Object.keys(_i).forEach(function(e){_i[_i[e]]=e});function Gw(e){return new Jt(e)}function Kw(e){return new Qt(e)}function Xw(e){return new rr(e)}function Jw(e){return new nr(e)}function Qw(e){return new er(e)}function eb(e){return new tr(e)}function tb(e){return new ir(e)}function rb(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new Jt(t),e,r)}function nb(e,t){return ur(new Jt(t),e)}function ib(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new er(t),e,r)}function sb(e,t){return ur(new er(t),e)}function ob(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new rr(t),e,r)}function ab(e,t){return ur(new rr(t),e)}function fb(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new ir(t),e,r)}function lb(e,t){return ur(new ir(t),e)}function ub(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new Qt(t),e,r)}function cb(e,t){return ur(new Qt(t),e)}function hb(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new tr(t),e,r)}function db(e,t){return ur(new tr(t),e)}function pb(e,t,r){return typeof t=="function"&&(r=t,t={}),lr(new nr(t),e,r)}function _b(e,t){return ur(new nr(t),e)}function lr(e,t,r){var n=[],i=0;e.on("error",o),e.on("end",a),e.end(t),s();function s(){for(var l;(l=e.read())!==null;)n.push(l),i+=l.length;e.once("readable",s)}function o(l){e.removeListener("end",a),e.removeListener("readable",s),r(l)}function a(){var l=S.concat(n,i);n=[],r(null,l),e.close()}}function ur(e,t){if(typeof t=="string"&&(t=new S(t)),!S.isBuffer(t))throw new TypeError("Not a string or buffer");var r=I.Z_FINISH;return e._processChunk(t,r)}function Jt(e){if(!(this instanceof Jt))return new Jt(e);ie.call(this,e,I.DEFLATE)}function Qt(e){if(!(this instanceof Qt))return new Qt(e);ie.call(this,e,I.INFLATE)}function er(e){if(!(this instanceof er))return new er(e);ie.call(this,e,I.GZIP)}function tr(e){if(!(this instanceof tr))return new tr(e);ie.call(this,e,I.GUNZIP)}function rr(e){if(!(this instanceof rr))return new rr(e);ie.call(this,e,I.DEFLATERAW)}function nr(e){if(!(this instanceof nr))return new nr(e);ie.call(this,e,I.INFLATERAW)}function ir(e){if(!(this instanceof ir))return new ir(e);ie.call(this,e,I.UNZIP)}function ie(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||I.Z_DEFAULT_CHUNK,Ue.call(this,e),e.flush&&e.flush!==I.Z_NO_FLUSH&&e.flush!==I.Z_PARTIAL_FLUSH&&e.flush!==I.Z_SYNC_FLUSH&&e.flush!==I.Z_FULL_FLUSH&&e.flush!==I.Z_FINISH&&e.flush!==I.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||I.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<I.Z_MIN_CHUNK||e.chunkSize>I.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<I.Z_MIN_WINDOWBITS||e.windowBits>I.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<I.Z_MIN_LEVEL||e.level>I.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<I.Z_MIN_MEMLEVEL||e.memLevel>I.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=I.Z_FILTERED&&e.strategy!=I.Z_HUFFMAN_ONLY&&e.strategy!=I.Z_RLE&&e.strategy!=I.Z_FIXED&&e.strategy!=I.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!S.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new I.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(s,o){r._binding=null,r._hadError=!0;var a=new Error(s);a.errno=o,a.code=I.codes[o],r.emit("error",a)};var n=I.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var i=I.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(i=e.strategy),this._binding.init(e.windowBits||I.Z_DEFAULT_WINDOWBITS,n,e.memLevel||I.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new S(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}_e(ie,Ue);ie.prototype.params=function(e,t,r){if(e<I.Z_MIN_LEVEL||e>I.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=I.Z_FILTERED&&t!=I.Z_HUFFMAN_ONLY&&t!=I.Z_RLE&&t!=I.Z_FIXED&&t!=I.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(I.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else B.nextTick(r)};ie.prototype.reset=function(){return this._binding.reset()};ie.prototype._flush=function(e){this._transform(new S(0),"",e)};ie.prototype.flush=function(e,t){var r=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=I.Z_FULL_FLUSH),r.ended)t&&B.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new S(0),"",t)};ie.prototype.close=function(e){if(e&&B.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;B.nextTick(function(){t.emit("close")})}};ie.prototype._transform=function(e,t,r){var n,i=this._writableState,s=i.ending||i.ended,o=s&&(!e||i.length===e.length);if(!e===null&&!S.isBuffer(e))return r(new Error("invalid input"));o?n=I.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||I.Z_NO_FLUSH)),this._processChunk(e,n,r)};ie.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,s=0,o=this,a=typeof r=="function";if(!a){var l=[],f=0,u;this.on("error",function(g){u=g});do var h=this._binding.writeSync(t,e,s,n,this._buffer,this._offset,i);while(!this._hadError&&c(h[0],h[1]));if(this._hadError)throw u;var d=S.concat(l,f);return this.close(),d}var p=this._binding.write(t,e,s,n,this._buffer,this._offset,i);p.buffer=e,p.callback=c;function c(g,w){if(!o._hadError){var _=i-w;if(Yw(_>=0,"have should not go down"),_>0){var b=o._buffer.slice(o._offset,o._offset+_);o._offset+=_,a?o.push(b):(l.push(b),f+=b.length)}if((w===0||o._offset>=o._chunkSize)&&(i=o._chunkSize,o._offset=0,o._buffer=new S(o._chunkSize)),w===0){if(s+=n-g,n=g,!a)return!0;var m=o._binding.write(t,e,s,n,o._buffer,o._offset,o._chunkSize);m.callback=c,m.buffer=e;return}if(!a)return!1;r()}}};_e(Jt,ie);_e(Qt,ie);_e(er,ie);_e(tr,ie);_e(rr,ie);_e(nr,ie);_e(ir,ie);const Xr={codes:_i,createDeflate:Gw,createInflate:Kw,createDeflateRaw:Xw,createInflateRaw:Jw,createGzip:Qw,createGunzip:eb,createUnzip:tb,deflate:rb,deflateSync:nb,gzip:ib,gzipSync:sb,deflateRaw:ob,deflateRawSync:ab,unzip:fb,unzipSync:lb,inflate:ub,inflateSync:cb,gunzip:hb,gunzipSync:db,inflateRaw:pb,inflateRawSync:_b,Deflate:Jt,Inflate:Qt,Gzip:er,Gunzip:tr,DeflateRaw:rr,InflateRaw:nr,Unzip:ir,Zlib:ie},{defineComponent:jd,openBlock:gi,createElementBlock:mi,Fragment:gb,renderList:mb,createElementVNode:xt,createTextVNode:Tu,toDisplayString:Cu}=await Ii("vue");function yb(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}const it=Object.create(null);it.open="0";it.close="1";it.ping="2";it.pong="3";it.message="4";it.upgrade="5";it.noop="6";const yi=Object.create(null);Object.keys(it).forEach(e=>{yi[it[e]]=e});const vb={type:"error",data:"parser error"},zd=({type:e,data:t},r,n)=>{if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){const i=wb(t);return n(bb(i,r))}return n(it[e]+(t||""))},wb=e=>S.isBuffer(e)?e:e instanceof ArrayBuffer?S.from(e):S.from(e.buffer,e.byteOffset,e.byteLength),bb=(e,t)=>t?e:"b"+e.toString("base64"),Hd=(e,t)=>{if(typeof e!="string")return{type:"message",data:ku(e,t)};const r=e.charAt(0);if(r==="b"){const n=S.from(e.substring(1),"base64");return{type:"message",data:ku(n,t)}}return yi[r]?e.length>1?{type:yi[r],data:e.substring(1)}:{type:yi[r]}:vb},ku=(e,t)=>{const r=S.isBuffer(e);switch(t){case"arraybuffer":return r?Eb(e):e;case"nodebuffer":default:return e}},Eb=e=>{const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e[n];return t},Wd=String.fromCharCode(30),Sb=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((s,o)=>{zd(s,!1,a=>{n[o]=a,++i===r&&t(n.join(Wd))})})},Rb=(e,t)=>{const r=e.split(Wd),n=[];for(let i=0;i<r.length;i++){const s=Hd(r[i],t);if(n.push(s),s.type==="error")break}return n},Vd=4;function fe(e){if(e)return xb(e)}function xb(e){for(var t in fe.prototype)e[t]=fe.prototype[t];return e}fe.prototype.on=fe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};fe.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};fe.prototype.off=fe.prototype.removeListener=fe.prototype.removeAllListeners=fe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};fe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};fe.prototype.emitReserved=fe.prototype.emit;fe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};fe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const sn=globalThis;function Zd(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const Tb=setTimeout,Cb=clearTimeout;function Qi(e,t){t.useNativeTimers?(e.setTimeoutFn=Tb.bind(sn),e.clearTimeoutFn=Cb.bind(sn)):(e.setTimeoutFn=setTimeout.bind(sn),e.clearTimeoutFn=clearTimeout.bind(sn))}const kb=1.33;function Ab(e){return typeof e=="string"?Ob(e):Math.ceil((e.byteLength||e.size)*kb)}function Ob(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}class Nb extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Yd extends fe{constructor(t){super(),this.writable=!1,Qi(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new Nb(t,r,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Hd(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const Gd="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Go=64,Lb={};let Au=0,Qn=0,Ou;function Nu(e){let t="";do t=Gd[e%Go]+t,e=Math.floor(e/Go);while(e>0);return t}function Kd(){const e=Nu(+new Date);return e!==Ou?(Au=0,Ou=e):e+"."+Nu(Au++)}for(;Qn<Go;Qn++)Lb[Gd[Qn]]=Qn;function Xd(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Db(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */var Ib=Ce.spawn,vi=Ko;Ko.XMLHttpRequest=Ko;function Ko(e){e=e||{};var t=this,r=Mt,n=Mt,i,s,o={},a=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},f=Object.assign({},l),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],h=["TRACE","TRACK","CONNECT"],d=!1,p=!1,c=!1,g={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null;var w=function(m){return a||m&&u.indexOf(m.toLowerCase())===-1},_=function(m){return m&&h.indexOf(m)===-1};this.open=function(m,E,T,C,A){if(this.abort(),p=!1,c=!1,!_(m))throw new Error("SecurityError: Request method not allowed");o={method:m,url:E.toString(),async:typeof T!="boolean"?!0:T,user:C||null,password:A||null},b(this.OPENED)},this.setDisableHeaderCheck=function(m){a=m},this.setRequestHeader=function(m,E){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!w(m))return console.warn('Refused to set unsafe header "'+m+'"'),!1;if(d)throw new Error("INVALID_STATE_ERR: send flag is true");return f[m]=E,!0},this.getResponseHeader=function(m){return typeof m=="string"&&this.readyState>this.OPENED&&s.headers[m.toLowerCase()]&&!p?s.headers[m.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||p)return"";var m="";for(var E in s.headers)E!=="set-cookie"&&E!=="set-cookie2"&&(m+=E+": "+s.headers[E]+`\r
`);return m.substr(0,m.length-2)},this.getRequestHeader=function(m){return typeof m=="string"&&f[m]?f[m]:""},this.send=function(m){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(d)throw new Error("INVALID_STATE_ERR: send has already been called");var E=!1,T=!1,C=qo.parse(o.url),A;switch(C.protocol){case"https:":E=!0;case"http:":A=C.hostname;break;case"file:":T=!0;break;case void 0:case"":A="localhost";break;default:throw new Error("Protocol not supported.")}if(T){if(o.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)Ce.readFile(unescape(C.pathname),"utf8",function(ue,Te){ue?t.handleError(ue,ue.errno||-1):(t.status=200,t.responseText=Te,b(t.DONE))});else try{this.responseText=Ce.readFileSync(unescape(C.pathname),"utf8"),this.status=200,b(t.DONE)}catch(ue){this.handleError(ue,ue.errno||-1)}return}var O=C.port||(E?443:80),L=C.pathname+(C.search?C.search:"");if(f.Host=A,E&&O===443||O===80||(f.Host+=":"+C.port),o.user){typeof o.password>"u"&&(o.password="");var F=new S(o.user+":"+o.password);f.Authorization="Basic "+F.toString("base64")}o.method==="GET"||o.method==="HEAD"?m=null:m?(f["Content-Length"]=S.isBuffer(m)?m.length:S.byteLength(m),f["Content-Type"]||(f["Content-Type"]="text/plain;charset=UTF-8")):o.method==="POST"&&(f["Content-Length"]=0);var P=e.agent||!1,U={host:A,port:O,path:L,method:o.method,headers:f,agent:P};if(E&&(U.pfx=e.pfx,U.key=e.key,U.passphrase=e.passphrase,U.cert=e.cert,U.ca=e.ca,U.ciphers=e.ciphers,U.rejectUnauthorized=e.rejectUnauthorized!==!1),p=!1,o.async){var q=E?n.request:r.request;d=!0,t.dispatchEvent("readystatechange");var X=function(ue){if(s=ue,s.statusCode===302||s.statusCode===303||s.statusCode===307){o.url=s.headers.location;var Te=qo.parse(o.url);A=Te.hostname;var ge={hostname:Te.hostname,port:Te.port,path:Te.path,method:s.statusCode===303?"GET":o.method,headers:f};E&&(ge.pfx=e.pfx,ge.key=e.key,ge.passphrase=e.passphrase,ge.cert=e.cert,ge.ca=e.ca,ge.ciphers=e.ciphers,ge.rejectUnauthorized=e.rejectUnauthorized!==!1),i=q(ge,X).on("error",oe),i.end();return}s&&s.setEncoding&&s.setEncoding("utf8"),b(t.HEADERS_RECEIVED),t.status=s.statusCode,s.on("data",function(Ve){Ve&&(t.responseText+=Ve),d&&b(t.LOADING)}),s.on("end",function(){d&&(d=!1,b(t.DONE))}),s.on("error",function(Ve){t.handleError(Ve)})},oe=function(ue){t.handleError(ue)};i=q(U,X).on("error",oe),e.autoUnref&&i.on("socket",ue=>{ue.unref()}),m&&i.write(m),i.end(),t.dispatchEvent("loadstart")}else{var H=".node-xmlhttprequest-content-"+B.pid,te=".node-xmlhttprequest-sync-"+B.pid;Ce.writeFileSync(te,"","utf8");for(var qe="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(E?"s":"")+".request;var options = "+JSON.stringify(U)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+H+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+te+"');});response.on('error', function(error) {fs.writeFileSync('"+H+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+te+"');});}).on('error', function(error) {fs.writeFileSync('"+H+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+te+"');});"+(m?"req.write('"+JSON.stringify(m).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Ne=Ib(B.argv[0],["-e",qe]);Ce.existsSync(te););if(t.responseText=Ce.readFileSync(H,"utf8"),Ne.stdin.end(),Ce.unlinkSync(H),t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var wt=t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");t.handleError(wt,503)}else t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),t.responseText=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),b(t.DONE)}},this.handleError=function(m,E){this.status=E||0,this.statusText=m,this.responseText=m.stack,p=!0,b(this.DONE)},this.abort=function(){i&&(i.abort(),i=null),f=Object.assign({},l),this.responseText="",this.responseXML="",p=c=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||d)&&this.readyState!==this.DONE&&(d=!1,b(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(m,E){m in g||(g[m]=[]),g[m].push(E)},this.removeEventListener=function(m,E){m in g&&(g[m]=g[m].filter(function(T){return T!==E}))},this.dispatchEvent=function(m){if(typeof t["on"+m]=="function"&&(this.readyState===this.DONE?setImmediate(function(){t["on"+m]()}):t["on"+m]()),m in g)for(let E=0,T=g[m].length;E<T;E++)this.readyState===this.DONE?setImmediate(function(){g[m][E].call(t)}):g[m][E].call(t)};var b=function(m){if(!(t.readyState===m||t.readyState===t.UNSENT&&c)&&(t.readyState=m,(o.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE)){let E;c?E="abort":p?E="error":E="load",t.dispatchEvent(E),t.dispatchEvent("loadend")}}}var Pb=yb({__proto__:null,default:vi,__moduleExports:vi},[vi]);const Jd=vi||Pb;function Bb(){}const Mb=function(){return new Jd({xdomain:!1}).responseType!=null}();class Fb extends Yd{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==n}const r=t&&t.forceBase64;this.supportsBinary=Mb&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Rb(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Sb(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const r=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Kd()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const i=Xd(t),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new tt(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class tt extends fe{constructor(t,r){super(),Qi(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const t=Zd(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const r=this.xhr=new Jd(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=tt.requestsCount++,tt.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Bb,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete tt.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}tt.requestsCount=0;tt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Lu);else if(typeof addEventListener=="function"){const e="onpagehide"in sn?"pagehide":"unload";addEventListener(e,Lu,!1)}}function Lu(){for(let e in tt.requests)tt.requests.hasOwnProperty(e)&&tt.requests[e].abort()}function Qd(e,t,r){return r={path:t,exports:{},require:function(n,i){return Ub(n,i??r.path)}},e(r,r.exports),r.exports}function Ub(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var cr={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:S.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}},En=Qd(function(e){const{EMPTY_BUFFER:t}=cr;function r(a,l){if(a.length===0)return t;if(a.length===1)return a[0];const f=S.allocUnsafe(l);let u=0;for(let h=0;h<a.length;h++){const d=a[h];f.set(d,u),u+=d.length}return u<l?f.slice(0,u):f}function n(a,l,f,u,h){for(let d=0;d<h;d++)f[u+d]=a[d]^l[d&3]}function i(a,l){for(let f=0;f<a.length;f++)a[f]^=l[f&3]}function s(a){return a.byteLength===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}function o(a){if(o.readOnly=!0,S.isBuffer(a))return a;let l;return a instanceof ArrayBuffer?l=S.from(a):ArrayBuffer.isView(a)?l=S.from(a.buffer,a.byteOffset,a.byteLength):(l=S.from(a),o.readOnly=!1),l}try{const a=Hm();e.exports={concat:r,mask(l,f,u,h,d){d<48?n(l,f,u,h,d):a.mask(l,f,u,h,d)},toArrayBuffer:s,toBuffer:o,unmask(l,f){l.length<32?i(l,f):a.unmask(l,f)}}}catch{e.exports={concat:r,mask:n,toArrayBuffer:s,toBuffer:o,unmask:i}}});const Du=Symbol("kDone"),po=Symbol("kRun");class qb{constructor(t){this[Du]=()=>{this.pending--,this[po]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[po]()}[po](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[Du])}}}var $b=qb;const{kStatusCode:ep}=cr,jb=S.from([0,0,255,255]),Li=Symbol("permessage-deflate"),ht=Symbol("total-length"),on=Symbol("callback"),Tt=Symbol("buffers"),wi=Symbol("error");let ei;class zb{constructor(t,r,n){if(this._maxPayload=n|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!ei){const i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;ei=new $b(i)}}static get extensionName(){return"permessage-deflate"}offer(){const t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const t=this._deflate[on];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){const r=this._options,n=t.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(t){const r=t[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(t){return t.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){const s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){const s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),t}decompress(t,r,n){ei.add(i=>{this._decompress(t,r,(s,o)=>{i(),n(s,o)})})}compress(t,r,n){ei.add(i=>{this._compress(t,r,(s,o)=>{i(),n(s,o)})})}_decompress(t,r,n){const i=this._isServer?"client":"server";if(!this._inflate){const s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Xr.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Xr.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Li]=this,this._inflate[ht]=0,this._inflate[Tt]=[],this._inflate.on("error",Wb),this._inflate.on("data",tp)}this._inflate[on]=n,this._inflate.write(t),r&&this._inflate.write(jb),this._inflate.flush(()=>{const s=this._inflate[wi];if(s){this._inflate.close(),this._inflate=null,n(s);return}const o=En.concat(this._inflate[Tt],this._inflate[ht]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ht]=0,this._inflate[Tt]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(t,r,n){const i=this._isServer?"server":"client";if(!this._deflate){const s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?Xr.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Xr.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[ht]=0,this._deflate[Tt]=[],this._deflate.on("data",Hb)}this._deflate[on]=n,this._deflate.write(t),this._deflate.flush(Xr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=En.concat(this._deflate[Tt],this._deflate[ht]);r&&(s=s.slice(0,s.length-4)),this._deflate[on]=null,this._deflate[ht]=0,this._deflate[Tt]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}}var he=zb;function Hb(e){this[Tt].push(e),this[ht]+=e.length}function tp(e){if(this[ht]+=e.length,this[Li]._maxPayload<1||this[ht]<=this[Li]._maxPayload){this[Tt].push(e);return}this[wi]=new RangeError("Max payload size exceeded"),this[wi].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[wi][ep]=1009,this.removeListener("data",tp),this.reset()}function Wb(e){this[Li]._inflate=null,e[ep]=1007,this[on](e)}var es=Qd(function(e){const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(i){return i>=1e3&&i<=1014&&i!==1004&&i!==1005&&i!==1006||i>=3e3&&i<=4999}function n(i){const s=i.length;let o=0;for(;o<s;)if(!(i[o]&128))o++;else if((i[o]&224)===192){if(o+1===s||(i[o+1]&192)!==128||(i[o]&254)===192)return!1;o+=2}else if((i[o]&240)===224){if(o+2>=s||(i[o+1]&192)!==128||(i[o+2]&192)!==128||i[o]===224&&(i[o+1]&224)===128||i[o]===237&&(i[o+1]&224)===160)return!1;o+=3}else if((i[o]&248)===240){if(o+3>=s||(i[o+1]&192)!==128||(i[o+2]&192)!==128||(i[o+3]&192)!==128||i[o]===240&&(i[o+1]&240)===128||i[o]===244&&i[o+1]>143||i[o]>244)return!1;o+=4}else return!1;return!0}try{const i=Zm();e.exports={isValidStatusCode:r,isValidUTF8(s){return s.length<150?n(s):i(s)},tokenChars:t}}catch{e.exports={isValidStatusCode:r,isValidUTF8:n,tokenChars:t}}});const{Writable:Vb}=We,{BINARY_TYPES:Zb,EMPTY_BUFFER:Iu,kStatusCode:Yb,kWebSocket:Gb}=cr,{concat:_o,toArrayBuffer:Kb,unmask:Xb}=En,{isValidStatusCode:Jb,isValidUTF8:Pu}=es,Jr=0,Bu=1,Mu=2,Fu=3,go=4,Qb=5;class eE extends Vb{constructor(t={}){super(),this._binaryType=t.binaryType||Zb[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[Gb]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=Jr,this._loop=!1}_write(t,r,n){if(this._opcode===8&&this._state==Jr)return n();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(n)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const n=this._buffers[0];return this._buffers[0]=n.slice(t),n.slice(0,t)}const r=S.allocUnsafe(t);do{const n=this._buffers[0],i=r.length-t;t>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,t),i),this._buffers[0]=n.slice(t)),t-=n.length}while(t>0);return r}startLoop(t){let r;this._loop=!0;do switch(this._state){case Jr:r=this.getInfo();break;case Bu:r=this.getPayloadLength16();break;case Mu:r=this.getPayloadLength64();break;case Fu:this.getMask();break;case go:r=this.getData(t);break;default:this._loop=!1;return}while(this._loop);t(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}const t=this.consume(2);if(t[0]&48)return this._loop=!1,ce(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const r=(t[0]&64)===64;if(r&&!this._extensions[he.extensionName])return this._loop=!1,ce(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(r)return this._loop=!1,ce(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,ce(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,ce(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,ce(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,ce(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,ce(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,ce(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,ce(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,ce(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Bu;else if(this._payloadLength===127)this._state=Mu;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}const t=this.consume(8),r=t.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,ce(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,ce(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Fu:this._state=go}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=go}getData(t){let r=Iu;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&Xb(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=Qb,this.decompress(r,t);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(t,r){this._extensions[he.extensionName].decompress(t,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(ce(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}const o=this.dataMessage();if(o)return r(o);this.startLoop(r)})}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=_o(r,t):this._binaryType==="arraybuffer"?n=Kb(_o(r,t)):n=r,this.emit("message",n,!0)}else{const n=_o(r,t);if(!this._skipUTF8Validation&&!Pu(n))return this._loop=!1,ce(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=Jr}controlMessage(t){if(this._opcode===8)if(this._loop=!1,t.length===0)this.emit("conclude",1005,Iu),this.end();else{if(t.length===1)return ce(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const r=t.readUInt16BE(0);if(!Jb(r))return ce(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const n=t.slice(2);if(!this._skipUTF8Validation&&!Pu(n))return ce(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end()}}else this._opcode===9?this.emit("ping",t):this.emit("pong",t);this._state=Jr}}var rp=eE;function ce(e,t,r,n,i){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,ce),s.code=i,s[Yb]=n,s}const{randomFillSync:tE}=Ce,{EMPTY_BUFFER:rE}=cr,{isValidStatusCode:nE}=es,{mask:Uu,toBuffer:lt}=En,qt=S.alloc(4);class Ct{constructor(t,r){this._extensions=r||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,r){const n=r.mask&&r.readOnly;let i=r.mask?6:2,s=t.length;t.length>=65536?(i+=8,s=127):t.length>125&&(i+=2,s=126);const o=S.allocUnsafe(n?t.length+i:i);return o[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(o[0]|=64),o[1]=s,s===126?o.writeUInt16BE(t.length,2):s===127&&(o.writeUInt32BE(0,2),o.writeUInt32BE(t.length,6)),r.mask?(tE(qt,0,4),o[1]|=128,o[i-4]=qt[0],o[i-3]=qt[1],o[i-2]=qt[2],o[i-1]=qt[3],n?(Uu(t,qt,o,i,t.length),[o]):(Uu(t,qt,t,0,t.length),[o,t])):[o,t]}close(t,r,n,i){let s;if(t===void 0)s=rE;else{if(typeof t!="number"||!nE(t))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=S.allocUnsafe(2),s.writeUInt16BE(t,0);else{const o=S.byteLength(r);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");s=S.allocUnsafe(2+o),s.writeUInt16BE(t,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}this._deflating?this.enqueue([this.doClose,s,n,i]):this.doClose(s,n,i)}doClose(t,r,n){this.sendFrame(Ct.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:r,readOnly:!1}),n)}ping(t,r,n){const i=lt(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,r,lt.readOnly,n]):this.doPing(i,r,lt.readOnly,n)}doPing(t,r,n,i){this.sendFrame(Ct.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:r,readOnly:n}),i)}pong(t,r,n){const i=lt(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,r,lt.readOnly,n]):this.doPong(i,r,lt.readOnly,n)}doPong(t,r,n,i){this.sendFrame(Ct.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:r,readOnly:n}),i)}send(t,r,n){const i=lt(t),s=this._extensions[he.extensionName];let o=r.binary?2:1,a=r.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),r.fin&&(this._firstFragment=!0),s){const l={fin:r.fin,rsv1:a,opcode:o,mask:r.mask,readOnly:lt.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,l,n]):this.dispatch(i,this._compress,l,n)}else this.sendFrame(Ct.frame(i,{fin:r.fin,rsv1:!1,opcode:o,mask:r.mask,readOnly:lt.readOnly}),n)}dispatch(t,r,n,i){if(!r){this.sendFrame(Ct.frame(t,n),i);return}const s=this._extensions[he.extensionName];this._bufferedBytes+=t.length,this._deflating=!0,s.compress(t,n.fin,(o,a)=>{if(this._socket.destroyed){const l=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(l);for(let f=0;f<this._queue.length;f++){const u=this._queue[f][4];typeof u=="function"&&u(l)}return}this._bufferedBytes-=t.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(Ct.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const t=this._queue.shift();this._bufferedBytes-=t[1].length,Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,r){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],r),this._socket.uncork()):this._socket.write(t[0],r)}}var np=Ct;const{kForOnEventAttribute:mo,kListener:qu}=cr,$u=Symbol("kCode"),ju=Symbol("kData"),zu=Symbol("kError"),Hu=Symbol("kMessage"),Wu=Symbol("kReason"),Tr=Symbol("kTarget"),Vu=Symbol("kType"),Zu=Symbol("kWasClean");class hr{constructor(t){this[Tr]=null,this[Vu]=t}get target(){return this[Tr]}get type(){return this[Vu]}}Object.defineProperty(hr.prototype,"target",{enumerable:!0});Object.defineProperty(hr.prototype,"type",{enumerable:!0});class Nn extends hr{constructor(t,r={}){super(t),this[$u]=r.code===void 0?0:r.code,this[Wu]=r.reason===void 0?"":r.reason,this[Zu]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[$u]}get reason(){return this[Wu]}get wasClean(){return this[Zu]}}Object.defineProperty(Nn.prototype,"code",{enumerable:!0});Object.defineProperty(Nn.prototype,"reason",{enumerable:!0});Object.defineProperty(Nn.prototype,"wasClean",{enumerable:!0});class ts extends hr{constructor(t,r={}){super(t),this[zu]=r.error===void 0?null:r.error,this[Hu]=r.message===void 0?"":r.message}get error(){return this[zu]}get message(){return this[Hu]}}Object.defineProperty(ts.prototype,"error",{enumerable:!0});Object.defineProperty(ts.prototype,"message",{enumerable:!0});class Ka extends hr{constructor(t,r={}){super(t),this[ju]=r.data===void 0?null:r.data}get data(){return this[ju]}}Object.defineProperty(Ka.prototype,"data",{enumerable:!0});const iE={addEventListener(e,t,r={}){let n;if(e==="message")n=function(s,o){const a=new Ka("message",{data:o?s:s.toString()});a[Tr]=this,t.call(this,a)};else if(e==="close")n=function(s,o){const a=new Nn("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Tr]=this,t.call(this,a)};else if(e==="error")n=function(s){const o=new ts("error",{error:s,message:s.message});o[Tr]=this,t.call(this,o)};else if(e==="open")n=function(){const s=new hr("open");s[Tr]=this,t.call(this,s)};else return;n[mo]=!!r[mo],n[qu]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[qu]===t&&!r[mo]){this.removeListener(e,r);break}}};var sE={CloseEvent:Nn,ErrorEvent:ts,Event:hr,EventTarget:iE,MessageEvent:Ka};const{tokenChars:Qr}=es;function Ye(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}function oE(e){const t=Object.create(null);let r=Object.create(null),n=!1,i=!1,s=!1,o,a,l=-1,f=-1,u=-1,h=0;for(;h<e.length;h++)if(f=e.charCodeAt(h),o===void 0)if(u===-1&&Qr[f]===1)l===-1&&(l=h);else if(h!==0&&(f===32||f===9))u===-1&&l!==-1&&(u=h);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h);const p=e.slice(l,u);f===44?(Ye(t,p,r),r=Object.create(null)):o=p,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);else if(a===void 0)if(u===-1&&Qr[f]===1)l===-1&&(l=h);else if(f===32||f===9)u===-1&&l!==-1&&(u=h);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h),Ye(r,e.slice(l,u),!0),f===44&&(Ye(t,o,r),r=Object.create(null),o=void 0),l=u=-1}else if(f===61&&l!==-1&&u===-1)a=e.slice(l,h),l=u=-1;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(i){if(Qr[f]!==1)throw new SyntaxError(`Unexpected character at index ${h}`);l===-1?l=h:n||(n=!0),i=!1}else if(s)if(Qr[f]===1)l===-1&&(l=h);else if(f===34&&l!==-1)s=!1,u=h;else if(f===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${h}`);else if(f===34&&e.charCodeAt(h-1)===61)s=!0;else if(u===-1&&Qr[f]===1)l===-1&&(l=h);else if(l!==-1&&(f===32||f===9))u===-1&&(u=h);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${h}`);u===-1&&(u=h);let p=e.slice(l,u);n&&(p=p.replace(/\\/g,""),n=!1),Ye(r,a,p),f===44&&(Ye(t,o,r),r=Object.create(null),o=void 0),a=void 0,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${h}`);if(l===-1||s||f===32||f===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=h);const d=e.slice(l,u);return o===void 0?Ye(t,d,r):(a===void 0?Ye(r,d,!0):n?Ye(r,a,d.replace(/\\/g,"")):Ye(r,a,d),Ye(t,o,r)),t}function aE(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(n=>[t].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}var Xo={format:aE,parse:oE};const{randomBytes:fE,createHash:lE}=Ce,{URL:yo}=qo,{BINARY_TYPES:Yu,EMPTY_BUFFER:ti,GUID:uE,kForOnEventAttribute:vo,kListener:cE,kStatusCode:hE,kWebSocket:Se,NOOP:ip}=cr,{EventTarget:{addEventListener:dE,removeEventListener:pE}}=sE,{format:_E,parse:gE}=Xo,{toBuffer:mE}=En,vt=["CONNECTING","OPEN","CLOSING","CLOSED"],yE=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,wo=[8,13],vE=30*1e3;class z extends j{constructor(t,r,n){super(),this._binaryType=Yu[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=ti,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=z.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),sp(this,t,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){Yu.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,r,n){const i=new rp({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new np(t,this._extensions),this._receiver=i,this._socket=t,i[Se]=this,t[Se]=this,i.on("conclude",EE),i.on("drain",SE),i.on("error",RE),i.on("message",xE),i.on("ping",TE),i.on("pong",CE),t.setTimeout(0),t.setNoDelay(),r.length>0&&t.unshift(r),t.on("close",ap),t.on("data",rs),t.on("end",fp),t.on("error",lp),this._readyState=z.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=z.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[he.extensionName]&&this._extensions[he.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=z.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,r){if(this.readyState!==z.CLOSED){if(this.readyState===z.CONNECTING){const n="WebSocket was closed before the connection was established";return Ie(this,this._req,n)}if(this.readyState===z.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=z.CLOSING,this._sender.close(t,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),vE)}}ping(t,r,n){if(this.readyState===z.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==z.OPEN){bo(this,t,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(t||ti,r,n)}pong(t,r,n){if(this.readyState===z.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==z.OPEN){bo(this,t,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(t||ti,r,n)}send(t,r,n){if(this.readyState===z.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof t=="number"&&(t=t.toString()),this.readyState!==z.OPEN){bo(this,t,n);return}const i={binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[he.extensionName]||(i.compress=!1),this._sender.send(t||ti,i,n)}terminate(){if(this.readyState!==z.CLOSED){if(this.readyState===z.CONNECTING){const t="WebSocket was closed before the connection was established";return Ie(this,this._req,t)}this._socket&&(this._readyState=z.CLOSING,this._socket.destroy())}}}Object.defineProperty(z,"CONNECTING",{enumerable:!0,value:vt.indexOf("CONNECTING")});Object.defineProperty(z.prototype,"CONNECTING",{enumerable:!0,value:vt.indexOf("CONNECTING")});Object.defineProperty(z,"OPEN",{enumerable:!0,value:vt.indexOf("OPEN")});Object.defineProperty(z.prototype,"OPEN",{enumerable:!0,value:vt.indexOf("OPEN")});Object.defineProperty(z,"CLOSING",{enumerable:!0,value:vt.indexOf("CLOSING")});Object.defineProperty(z.prototype,"CLOSING",{enumerable:!0,value:vt.indexOf("CLOSING")});Object.defineProperty(z,"CLOSED",{enumerable:!0,value:vt.indexOf("CLOSED")});Object.defineProperty(z.prototype,"CLOSED",{enumerable:!0,value:vt.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(e=>{Object.defineProperty(z.prototype,e,{enumerable:!0})});["open","error","close","message"].forEach(e=>{Object.defineProperty(z.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[vo])return t[cE];return null},set(t){for(const r of this.listeners(e))if(r[vo]){this.removeListener(e,r);break}typeof t=="function"&&this.addEventListener(e,t,{[vo]:!0})}})});z.prototype.addEventListener=dE;z.prototype.removeEventListener=pE;var st=z;function sp(e,t,r,n){const i={protocolVersion:wo[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!wo.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${wo.join(", ")})`);let s;if(t instanceof yo)s=t,e._url=t.href;else{try{s=new yo(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const o=s.protocol==="wss:",a=s.protocol==="ws+unix:";if(s.protocol!=="ws:"&&!o&&!a)throw new SyntaxError(`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`);if(a&&!s.pathname)throw new SyntaxError("The URL's pathname is empty");if(s.hash)throw new SyntaxError("The URL contains a fragment identifier");const l=o?443:80,f=fE(16).toString("base64"),u=Mt.get,h=new Set;let d;if(i.createConnection=o?bE:wE,i.defaultPort=i.defaultPort||l,i.port=s.port||l,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket",...i.headers},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(d=new he(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=_E({[he.extensionName]:d.offer()})),r.length){for(const c of r){if(typeof c!="string"||!yE.test(c)||h.has(c))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(c)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){const c=i.path.split(":");i.socketPath=c[0],i.path=c[1]}let p=e._req=u(i);i.timeout&&p.on("timeout",()=>{Ie(e,p,"Opening handshake has timed out")}),p.on("error",c=>{p===null||p.aborted||(p=e._req=null,e._readyState=z.CLOSING,e.emit("error",c),e.emitClose())}),p.on("response",c=>{const g=c.headers.location,w=c.statusCode;if(g&&i.followRedirects&&w>=300&&w<400){if(++e._redirects>i.maxRedirects){Ie(e,p,"Maximum redirects exceeded");return}p.abort();const _=new yo(g,t);sp(e,_,r,n)}else e.emit("unexpected-response",p,c)||Ie(e,p,`Unexpected server response: ${c.statusCode}`)}),p.on("upgrade",(c,g,w)=>{if(e.emit("upgrade",c),e.readyState!==z.CONNECTING)return;p=e._req=null;const _=lE("sha1").update(f+uE).digest("base64");if(c.headers["sec-websocket-accept"]!==_){Ie(e,g,"Invalid Sec-WebSocket-Accept header");return}const b=c.headers["sec-websocket-protocol"];let m;if(b!==void 0?h.size?h.has(b)||(m="Server sent an invalid subprotocol"):m="Server sent a subprotocol but none was requested":h.size&&(m="Server sent no subprotocol"),m){Ie(e,g,m);return}b&&(e._protocol=b);const E=c.headers["sec-websocket-extensions"];if(E!==void 0){if(!d){Ie(e,g,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let T;try{T=gE(E)}catch{Ie(e,g,"Invalid Sec-WebSocket-Extensions header");return}const C=Object.keys(T);if(C.length!==1||C[0]!==he.extensionName){Ie(e,g,"Server indicated an extension that was not requested");return}try{d.accept(T[he.extensionName])}catch{Ie(e,g,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[he.extensionName]=d}e.setSocket(g,w,{maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})})}function wE(e){return e.path=e.socketPath,Ce.connect(e)}function bE(e){return e.path=void 0,!e.servername&&e.servername!==""&&(e.servername=Ce.isIP(e.host)?"":e.host),Ce.connect(e)}function Ie(e,t,r){e._readyState=z.CLOSING;const n=new Error(r);Error.captureStackTrace(n,Ie),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function bo(e,t,r){if(t){const n=mE(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(r){const n=new Error(`WebSocket is not open: readyState ${e.readyState} (${vt[e.readyState]})`);r(n)}}function EE(e,t){const r=this[Se];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,r._socket[Se]!==void 0&&(r._socket.removeListener("data",rs),B.nextTick(op,r._socket),e===1005?r.close():r.close(e,t))}function SE(){this[Se]._socket.resume()}function RE(e){const t=this[Se];t._socket[Se]!==void 0&&(t._socket.removeListener("data",rs),B.nextTick(op,t._socket),t.close(e[hE])),t.emit("error",e)}function Gu(){this[Se].emitClose()}function xE(e,t){this[Se].emit("message",e,t)}function TE(e){const t=this[Se];t.pong(e,!t._isServer,ip),t.emit("ping",e)}function CE(e){this[Se].emit("pong",e)}function op(e){e.resume()}function ap(){const e=this[Se];this.removeListener("close",ap),this.removeListener("data",rs),this.removeListener("end",fp),e._readyState=z.CLOSING;let t;!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null&&e._receiver.write(t),e._receiver.end(),this[Se]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",Gu),e._receiver.on("finish",Gu))}function rs(e){this[Se]._receiver.write(e)||this.pause()}function fp(){const e=this[Se];e._readyState=z.CLOSING,e._receiver.end(),this.end()}function lp(){const e=this[Se];this.removeListener("error",lp),this.on("error",ip),e&&(e._readyState=z.CLOSING,this.destroy())}const{Duplex:kE}=We;function Ku(e){e.emit("close")}function AE(){!this.destroyed&&this._writableState.finished&&this.destroy()}function up(e){this.removeListener("error",up),this.destroy(),this.listenerCount("error")===0&&this.emit("error",e)}function OE(e,t){let r=!0,n=!0;function i(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",i)}):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",i));const s=new kE({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(a,l){const f=!l&&s._readableState.objectMode?a.toString():a;s.push(f)||(r=!1,e._socket.pause())}),e.once("error",function(a){s.destroyed||(n=!1,s.destroy(a))}),e.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(o,a){if(e.readyState===e.CLOSED){a(o),B.nextTick(Ku,s);return}let l=!1;e.once("error",function(u){l=!0,a(u)}),e.once("close",function(){l||a(o),B.nextTick(Ku,s)}),n&&e.terminate()},s._final=function(o){if(e.readyState===e.CONNECTING){e.once("open",function(){s._final(o)});return}e._socket!==null&&(e._socket._writableState.finished?(o(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",function(){o()}),e.close()))},s._read=function(){e.readyState===e.OPEN&&!r&&(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},s._write=function(o,a,l){if(e.readyState===e.CONNECTING){e.once("open",function(){s._write(o,a,l)});return}e.send(o,l)},s.on("end",AE),s.on("error",up),s}var NE=OE;const{tokenChars:LE}=es;function DE(e){const t=new Set;let r=-1,n=-1,i=0;for(i;i<e.length;i++){const o=e.charCodeAt(i);if(n===-1&&LE[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);const a=e.slice(r,n);if(t.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);t.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,i);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}var IE={parse:DE};const{createHash:PE}=Ce,{GUID:BE,kWebSocket:ME}=cr,FE=/^[+/0-9A-Za-z]{22}==$/,Xu=0,Ju=1,cp=2;class UE extends j{constructor(t,r){if(super(),t={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...t},t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=Mt.createServer((n,i)=>{const s=Mt.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(t.port,t.host,t.backlog,r)):t.server&&(this._server=t.server),this._server){const n=this.emit.bind(this,"connection");this._removeListeners=$E(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=Xu}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===cp){t&&this.once("close",()=>{t(new Error("The server is not running"))}),B.nextTick(en,this);return}if(t&&this.once("close",t),this._state!==Ju)if(this._state=Ju,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:B.nextTick(en,this):B.nextTick(en,this);else{const r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{en(this)})}}shouldHandle(t){if(this.options.path){const r=t.url.indexOf("?");if((r!==-1?t.url.slice(0,r):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,r,n,i){r.on("error",Jo);const s=t.headers["sec-websocket-key"]!==void 0?t.headers["sec-websocket-key"]:!1,o=+t.headers["sec-websocket-version"];if(t.method!=="GET"||t.headers.upgrade.toLowerCase()!=="websocket"||!s||!FE.test(s)||o!==8&&o!==13||!this.shouldHandle(t))return br(r,400);const a=t.headers["sec-websocket-protocol"];let l=new Set;if(a!==void 0)try{l=IE.parse(a)}catch{return br(r,400)}const f=t.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&f!==void 0){const h=new he(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const d=Xo.parse(f);d[he.extensionName]&&(h.accept(d[he.extensionName]),u[he.extensionName]=h)}catch{return br(r,400)}}if(this.options.verifyClient){const h={origin:t.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(d,p,c,g)=>{if(!d)return br(r,p||401,c,g);this.completeUpgrade(u,s,l,t,r,n,i)});return}if(!this.options.verifyClient(h))return br(r,401)}this.completeUpgrade(u,s,l,t,r,n,i)}completeUpgrade(t,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[ME])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>Xu)return br(s,503);const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${PE("sha1").update(r+BE).digest("base64")}`],u=new st(null);if(n.size){const h=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;h&&(f.push(`Sec-WebSocket-Protocol: ${h}`),u._protocol=h)}if(t[he.extensionName]){const h=t[he.extensionName].params,d=Xo.format({[he.extensionName]:[h]});f.push(`Sec-WebSocket-Extensions: ${d}`),u._extensions=t}this.emit("headers",f,i),s.write(f.concat(`\r
`).join(`\r
`)),s.removeListener("error",Jo),u.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&B.nextTick(en,this)})),a(u,i)}}var qE=UE;function $E(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}function en(e){e._state=cp,e.emit("close")}function Jo(){this.destroy()}function br(e,t,r,n){e.writable&&(r=r||Mt.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":S.byteLength(r),...n},e.write(`HTTP/1.1 ${t} ${Mt.STATUS_CODES[t]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)),e.removeListener("error",Jo),e.destroy()}st.createWebSocketStream=NE;st.Server=qE;st.Receiver=rp;st.Sender=np;st.WebSocket=st;st.WebSocketServer=st.Server;var jE=st;const ri=jE,Qu=!1,zE="nodebuffer",hp=B.nextTick,ec=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class HE extends Yd{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=ec?{}:Zd(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Qu&&!ec?r?new ri(t,r):new ri(t):new ri(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||zE,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;zd(n,this.supportsBinary,s=>{const o={};n.options&&(o.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?S.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1);try{Qu||this.ws.send(s,o)}catch{}i&&hp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const r=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Kd()),this.supportsBinary||(t.b64=1);const i=Xd(t),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}check(){return!!ri}}const WE={websocket:HE,polling:Fb},VE=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Qo(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=VE.exec(e||""),s={},o=14;for(;o--;)s[ZE[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=YE(s,s.path),s.queryKey=GE(s,s.query),s}function YE(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function GE(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}class At extends fe{constructor(t,r={}){super(),t&&typeof t=="object"&&(r=t,t=null),t?(t=Qo(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=Qo(r.host).host),Qi(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Db(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Vd,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new WE[t](n)}open(){let t;if(this.opts.rememberUpgrade&&At.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;At.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;At.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function s(){n||(n=!0,u(),r.close(),r=null)}const o=h=>{const d=new Error("probe error: "+h);d.transport=r.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function l(){o("socket closed")}function f(h){r&&h.name!==r.name&&s()}const u=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",l),this.off("upgrading",f)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",l),this.once("upgrading",f),r.open()}onOpen(){if(this.readyState="open",At.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=Ab(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){At.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const i=t.length;for(;n<i;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}At.protocol=Vd;function KE(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Qo(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const XE=typeof ArrayBuffer=="function",JE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,dp=Object.prototype.toString,QE=typeof Blob=="function"||typeof Blob<"u"&&dp.call(Blob)==="[object BlobConstructor]",e1=typeof File=="function"||typeof File<"u"&&dp.call(File)==="[object FileConstructor]";function Xa(e){return XE&&(e instanceof ArrayBuffer||JE(e))||QE&&e instanceof Blob||e1&&e instanceof File}function bi(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(bi(e[r]))return!0;return!1}if(Xa(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return bi(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&bi(e[r]))return!0;return!1}function t1(e){const t=[],r=e.data,n=e;return n.data=ea(r,t),n.attachments=t.length,{packet:n,buffers:t}}function ea(e,t){if(!e)return e;if(Xa(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=ea(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=ea(e[n],t));return r}return e}function r1(e,t){return e.data=ta(e.data,t),e.attachments=void 0,e}function ta(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=ta(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ta(e[r],t));return e}const pp=5;var Y;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Y||(Y={}));class n1{constructor(t){this.replacer=t}encode(t){return(t.type===Y.EVENT||t.type===Y.ACK)&&bi(t)?(t.type=t.type===Y.EVENT?Y.BINARY_EVENT:Y.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Y.BINARY_EVENT||t.type===Y.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=t1(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}class Ja extends fe{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t),r.type===Y.BINARY_EVENT||r.type===Y.BINARY_ACK?(this.reconstructor=new i1(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Xa(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Y[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Y.BINARY_EVENT||n.type===Y.BINARY_ACK){const s=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(s,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(s,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(s,r+1))}if(t.charAt(++r)){const s=this.tryParse(t.substr(r));if(Ja.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Y.CONNECT:return typeof r=="object";case Y.DISCONNECT:return r===void 0;case Y.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case Y.EVENT:case Y.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case Y.ACK:case Y.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class i1{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=r1(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var s1=Object.freeze({__proto__:null,protocol:pp,get PacketType(){return Y},Encoder:n1,Decoder:Ja});function je(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const o1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qa extends fe{constructor(t,r,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[je(t,"open",this.onopen.bind(this)),je(t,"packet",this.onpacket.bind(this)),je(t,"error",this.onerror.bind(this)),je(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(o1.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');r.unshift(t);const n={type:Y.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,a=r.pop();this._registerAckCallback(o,a),n.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){const n=this.flags.timeout;if(n===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);r.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(i),r.apply(this,[null,...s])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:Y.CONNECT,data:t})}):this.packet({type:Y.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Y.CONNECT:if(t.data&&t.data.sid){const i=t.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Y.EVENT:case Y.BINARY_EVENT:this.onevent(t);break;case Y.ACK:case Y.BINARY_ACK:this.onack(t);break;case Y.DISCONNECT:this.ondisconnect();break;case Y.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:Y.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Hr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Hr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Hr.prototype.reset=function(){this.attempts=0};Hr.prototype.setMin=function(e){this.ms=e};Hr.prototype.setMax=function(e){this.max=e};Hr.prototype.setJitter=function(e){this.jitter=e};class Di extends fe{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Qi(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Hr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||s1;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new At(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=je(r,"open",function(){n.onopen(),t&&t()}),s=je(r,"error",o=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",o),t?t(o):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&i();const a=this.setTimeoutFn(()=>{i(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(i),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(je(t,"ping",this.onping.bind(this)),je(t,"data",this.ondata.bind(this)),je(t,"error",this.onerror.bind(this)),je(t,"close",this.onclose.bind(this)),je(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){hp(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n||(n=new Qa(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const tn={};function Kt(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=KE(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=tn[i]&&s in tn[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new Di(n,t):(tn[i]||(tn[i]=new Di(n,t)),l=tn[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Kt,{Manager:Di,Socket:Qa,io:Kt,connect:Kt});var a1=Object.freeze({__proto__:null,Manager:Di,Socket:Qa,io:Kt,connect:Kt,default:Kt,protocol:pp});const f1=z0();var ef=jd({name:"vue-webrtc",components:{},data(){return{signalClient:null,videoList:[],canvas:null,socket:null}},props:{roomId:{type:String,default:"public-room-v2"},socketURL:{type:String,default:"https://weston-vue-webrtc-lobby.azurewebsites.net"},cameraHeight:{type:[Number,String],default:160},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},enableAudio:{type:Boolean,default:!0},enableVideo:{type:Boolean,default:!0},enableLogs:{type:Boolean,default:!1},peerOptions:{type:Object,default(){return{}}},ioOptions:{type:Object,default(){return{rejectUnauthorized:!1,transports:["polling","websocket"]}}},deviceId:{type:String,default:null}},watch:{},mounted(){},methods:{async join(){var e=this;this.log("join"),this.socket=Kt(this.socketURL,this.ioOptions),this.signalClient=new f1(this.socket);let t={video:e.enableVideo,audio:e.enableAudio};e.deviceId&&e.enableVideo&&(t.video={deviceId:{exact:e.deviceId}});const r=await navigator.mediaDevices.getUserMedia(t);this.log("opened",r),this.joinedRoom(r,!0),this.signalClient.once("discover",n=>{e.log("discovered",n);async function i(s){if(s!=e.socket.id)try{e.log("Connecting to peer");const{peer:o}=await e.signalClient.connect(s,e.roomId,e.peerOptions);e.videoList.forEach(a=>{a.isLocal&&e.onPeer(o,a.stream)})}catch{e.log("Error connecting to peer")}}n.peers.forEach(s=>i(s)),e.$emit("opened-room",e.roomId)}),this.signalClient.on("request",async n=>{e.log("requested",n);const{peer:i}=await n.accept({},e.peerOptions);e.log("accepted",i),e.videoList.forEach(s=>{s.isLocal&&e.onPeer(i,s.stream)})}),this.signalClient.discover(e.roomId)},onPeer(e,t){var r=this;r.log("onPeer"),e.addStream(t),e.on("stream",n=>{r.joinedRoom(n,!1),e.on("close",()=>{var i=[];r.videoList.forEach(function(s){s.id!==n.id&&i.push(s)}),r.videoList=i,r.$emit("left-room",n.id)}),e.on("error",i=>{r.log("peer error ",i)})})},joinedRoom(e,t){var r=this;if(r.videoList.find(i=>i.id===e.id)===void 0){let i={id:e.id,muted:t,stream:e,isLocal:t};r.videoList.push(i)}setTimeout(function(){for(var i=0,s=r.$refs.videos.length;i<s;i++)if(r.$refs.videos[i].id===e.id){r.$refs.videos[i].srcObject=e;break}},500),r.$emit("joined-room",e.id)},leave(){this.videoList.forEach(e=>e.stream.getTracks().forEach(t=>t.stop())),this.videoList=[],this.signalClient.peers().forEach(e=>e.removeAllListeners()),this.signalClient.destroy(),this.signalClient=null,this.socket.destroy(),this.socket=null},capture(){return this.getCanvas().toDataURL(this.screenshotFormat)},getCanvas(){let e=this.$refs.videos[0];if(e!==null&&!this.ctx){let n=document.createElement("canvas");n.height=e.clientHeight,n.width=e.clientWidth,this.canvas=n,this.ctx=n.getContext("2d")}const{ctx:t,canvas:r}=this;return t.drawImage(e,0,0,r.width,r.height),r},async shareScreen(){var e=this;if(navigator.mediaDevices==null){e.log("Error: https is required to load cameras");return}try{var t=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});this.joinedRoom(t,!0),e.$emit("share-started",t.id),e.signalClient.peers().forEach(r=>e.onPeer(r,t))}catch(r){e.log("Media error: "+JSON.stringify(r))}},log(e,t){this.enableLogs&&(console.log(e),t!=null&&console.log(t))}}});const l1={class:"video-list"},u1=["video"],c1=["height","muted","id"];function h1(e,t,r,n,i,s){return gi(),mi("div",l1,[(gi(!0),mi(gb,null,mb(e.videoList,o=>(gi(),mi("div",{video:o,key:o.id,class:"video-item"},[xt("video",{controls:"",autoplay:"",playsinline:"",ref_for:!0,ref:"videos",height:e.cameraHeight,muted:o.muted,id:o.id},null,8,c1)],8,u1))),128))])}function _p(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var d1=`
.video-list[data-v-41044b41] {\r
        background: whitesmoke;\r
        height: auto;\r
        display: flex;\r
        flex-direction: row;\r
        justify-content: center;\r
        flex-wrap: wrap;
}
.video-list div[data-v-41044b41] {\r
            padding: 0px;
}
.video-item[data-v-41044b41] {\r
        background: #c5c4c4;\r
        display: inline-block;
}\r
`;_p(d1);ef.render=h1;ef.__scopeId="data-v-41044b41";var gp=jd({name:"VueWebrtcSample",data(){return{counter:5,initCounter:5,message:{action:null,amount:null}}},computed:{changedBy(){const{message:e}=this;return e.action?`${e.action} ${e.amount||""}`.trim():"initialized"}},methods:{increment(e){const t=typeof e!="number"?1:e;this.counter+=t,this.message.action="incremented by",this.message.amount=t},decrement(e){const t=typeof e!="number"?1:e;this.counter-=t,this.message.action="decremented by",this.message.amount=t},reset(){this.counter=this.initCounter,this.message.action="reset",this.message.amount=null}}});const p1={class:"vue-webrtc-sample"};function _1(e,t,r,n,i,s){return gi(),mi("div",p1,[xt("p",null,[Tu("The counter was "+Cu(e.changedBy)+" to ",1),xt("b",null,Cu(e.counter),1),Tu(".")]),xt("button",{onClick:t[0]||(t[0]=function(){return e.increment&&e.increment(...arguments)})}," Click +1 "),xt("button",{onClick:t[1]||(t[1]=function(){return e.decrement&&e.decrement(...arguments)})}," Click -1 "),xt("button",{onClick:t[2]||(t[2]=o=>e.increment(5))}," Click +5 "),xt("button",{onClick:t[3]||(t[3]=o=>e.decrement(5))}," Click -5 "),xt("button",{onClick:t[4]||(t[4]=function(){return e.reset&&e.reset(...arguments)})}," Reset ")])}var g1=`
.vue-webrtc-sample[data-v-3020e3b4] {\r
    display: block;\r
    width: 400px;\r
    margin: 25px auto;\r
    border: 1px solid #ccc;\r
    background: #eaeaea;\r
    text-align: center;\r
    padding: 25px;
}
.vue-webrtc-sample p[data-v-3020e3b4] {\r
    margin: 0 0 1em;
}\r
`;_p(g1);gp.render=_1;gp.__scopeId="data-v-3020e3b4";window.io=a1;const mp=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},{ref:m1}=await Ii("vue"),Le=li("https://livestream-backend-ng53ixt7xq-as.a.run.app"),y1={name:"demo-component",components:{"vue-webrtc":ef},data(){return{el:m1(null),roomId:"roomId",hasJoined:!1,videoOn:!0,micOn:!0,mediaRecorder:{},chunks:[],userStream:{},audioContext:null,videoContainer:null,stream:null,dialog:!1,snackbar:!1,isHost:"",streamId:"",textUserStatus:"User Join",isRecording:!1,mediaStream:null}},mounted(){Le.on("deleteUser",({roomId:t,sessionId:r})=>{this.roomId===t&&(this.snackbar=!0,this.textUserStatus=`User ( ${r} ) has left the meeting room.`)}),Le.on("join",({roomId:t,sessionId:r})=>{this.roomId===t&&(this.snackbar=!0,this.textUserStatus=`User ( ${r} ) has join the meeting room.`)}),Le.on("talking",({sessionId:t,isTalking:r})=>{this.videoContainer=document.querySelector(`.video-item video[id='${t}']`),r&&this.videoContainer?this.videoContainer.style.border="thick solid #FF6B35":this.videoContainer&&(this.videoContainer.style.border="none")});const e=window.location.hash;e!=""&&(this.roomId=e.substring(1),this.toggleRoom())},created(){this.audioContext=new window.AudioContext,window.addEventListener("beforeunload",function(e){console.log("event onload create: ",e),e.returnValue="Write something"})},methods:{async onStop(e){console.log("streamId: ",e)},async onDownloadLocal(){this.$refs.webrtc.leave(),this.hasJoined=!1,this.stopListening(),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.mediaStream&&this.mediaStream.getTracks().forEach(e=>e.stop()),this.isRecording=!1),await mr.delete(`https://livestream-backend-ng53ixt7xq-as.a.run.app/users/list/${this.roomId}/${this.userStream.id}`),await mr.post("https://livestream-backend-ng53ixt7xq-as.a.run.app/files",{fileName:this.roomId}),Le.emit("usersList",{roomId:this.roomId}),Le.emit("deleteUser",{roomId:this.roomId,sessionId:this.userStream.id})},pushData(e){this.chunks.push(e.data)},record(){this.mediaRecorder.start()},onHandleVideoOn(){this.videoOn=!this.videoOn,this.userStream.video=this.videoOn,this.userStream.getVideoTracks()[0].enabled=this.videoOn},onHandleMicOn(){this.micOn=!this.micOn,this.userStream.audio=this.micOn,this.userStream.getAudioTracks()[0].enabled=this.micOn,this.micOn?this.startListening(this.userStream.id):this.stopListening(this.userStream.id)},stopListening(e){this.mediaStreamSource&&(this.mediaStreamSource.disconnect(),this.mediaStreamSource=null,this.analyser=null,this.isListening=!1),setTimeout(function(){this.videoContainer=document.querySelector(`.video-item video[id='${e}']`),this.videoContainer&&(this.videoContainer.style.border="none")},1e3)},startListening(e){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.mediaStreamSource=this.audioContext.createMediaStreamSource(t),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=32,this.mediaStreamSource.connect(this.analyser),this.isListening=!0,this.checkTalking(e)}).catch(t=>{console.error("Error accessing microphone:",t)})},checkTalking(e){const t=this.analyser.frequencyBinCount,r=new Uint8Array(t),n=()=>{if(!this.isListening)return;this.analyser.getByteFrequencyData(r);const i=r.reduce((o,a)=>o+a,0)/t,s=100;setTimeout(function(){this.videoContainer=document.querySelector(`.video-item video[id='${e}']`),i>s&&this.videoContainer?(this.videoContainer.style.border="thick solid #FF6B35",Le.emit("talking",{isTalking:!0,sessionId:e})):(this.videoContainer&&(this.videoContainer.style.border="none"),Le.emit("talking",{isTalking:!1,sessionId:e}))},1e3),requestAnimationFrame(n)};n()},async toggleRoom(){try{if(this.hasJoined){const{data:e}=await mr.get(`https://livestream-backend-ng53ixt7xq-as.a.run.app/users/${this.userStream.id}`);console.log("data: ",e),e.data.isHost?this.dialog=!0:this.onDownloadLocal()}else{await this.$refs.webrtc.join(),this.userStream=this.$refs.webrtc.videoList[0].stream,Le.emit("usersList",{roomId:this.roomId}),Le.emit("join",{roomId:this.roomId,sessionId:this.userStream.id}),this.startListening(this.userStream.id),this.getUserList();const{data:e}=await mr.get(`https://livestream-backend-ng53ixt7xq-as.a.run.app/users/${this.userStream.id}`);console.log("data isHost: ",e,this.userStream.id),this.mediaStream=await navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"},audio:!0,preferCurrentTab:!0}),this.mediaRecorder=new MediaRecorder(this.mediaStream);const t=[];this.mediaRecorder.ondataavailable=r=>{r.data.size>0&&(Le.emit("record",{roomId:this.roomId,data:r.data}),t.push(r.data),this.pushData(r))},this.mediaRecorder.start(5e3),this.isRecording=!0,this.hasJoined=!0}}catch(e){alert(e)}},async getUserList(){},screenShare(){try{this.$refs.webrtc.shareScreen()}catch{alert("Screen share not available")}},async addTrack(){try{this.$refs.webrtc.videoList.forEach(t=>{this.userStream.addTrack(t)})}catch(e){alert(e)}},joinedRoom(e){const t=document.createElement("p");t.setAttribute("class","user-video");const r=document.createTextNode(e);t.appendChild(r),setTimeout(function(){const n=document.getElementById(e);n.after(t,n.children[0])},1e3)},shareStarted(e){console.log(e)},leftRoom(e){console.log(e)},async copyClipboard(){const e=window.location.origin;await navigator.clipboard.writeText(`${e}/#${this.roomId}`),alert("Link copied to clipboard!")},async share(){const t={title:"Vere-ai",text:"Join my meeting!",url:`${window.location.origin}/#${this.roomId}`};try{await navigator.share(t)}catch{this.copyClipboard()}},async meetingRoomEndForEveryone(){const{data:e}=await mr.delete(`https://livestream-backend-ng53ixt7xq-as.a.run.app/users/list/${this.roomId}/${this.streamId}`);Le.emit("deleteUser",{roomId:this.roomId,sessionId:this.userStream.id}),console.log("this.streamId}: ",this.streamId),console.log("meetingRoomEndForEveryone: ",e),this.onDownloadLocal()},async meetingRoomEnd(){const{data:e}=await mr.delete(`https://livestream-backend-ng53ixt7xq-as.a.run.app/users/list/${this.roomId}`);Le.emit("deleteUser",{roomId:this.roomId,sessionId:this.userStream.id}),console.log("meetingRoomEnd: ",e),this.onDownloadLocal()}}},{resolveComponent:Ge,createVNode:ve,createElementVNode:Eo,toDisplayString:So,createTextVNode:ut,withCtx:be,openBlock:tc,createElementBlock:rc,createCommentVNode:v1}=await Ii("vue"),w1={class:"video-container"},b1={key:0,class:"video-webrtc-controls"};function E1(e,t,r,n,i,s){const o=Ge("vue-webrtc"),a=Ge("v-icon"),l=Ge("v-btn"),f=Ge("v-card-title"),u=Ge("v-card-text"),h=Ge("v-spacer"),d=Ge("v-card-actions"),p=Ge("v-card"),c=Ge("v-dialog"),g=Ge("v-snackbar");return tc(),rc("div",null,[Eo("div",null,[Eo("form",null,[Eo("div",w1,[ve(o,{id:"call-canvas",roomId:i.roomId,ref:"webrtc",onShareStarted:s.shareStarted,class:"w-full video-webrtc",onShareStopped:s.leftRoom,onLeftRoom:s.leftRoom,onJoinedRoom:s.joinedRoom,width:"100%"},null,8,["roomId","onShareStarted","onShareStopped","onLeftRoom","onJoinedRoom"])]),i.hasJoined?(tc(),rc("div",b1,[ve(l,{onClick:s.onHandleVideoOn,class:"mx-2 bg-primary",size:"x-large"},{default:be(()=>[ve(a,null,{default:be(()=>[ut(So(i.videoOn?"mdi-video-outline":"mdi-video-off-outline"),1)]),_:1})]),_:1},8,["onClick"]),ve(l,{onClick:s.onHandleMicOn,class:"mx-2 bg-primary",size:"x-large"},{default:be(()=>[ve(a,null,{default:be(()=>[ut(So(i.micOn?"mdi-microphone":"mdi-microphone-off"),1)]),_:1})]),_:1},8,["onClick"]),ve(l,{onClick:s.toggleRoom,class:"mx-2 bg-red",size:"x-large"},{default:be(()=>[ve(a,null,{default:be(()=>[ut("mdi-phone-hangup")]),_:1})]),_:1},8,["onClick"]),ve(c,{modelValue:i.dialog,"onUpdate:modelValue":t[2]||(t[2]=w=>i.dialog=w),width:"auto"},{default:be(()=>[ve(p,null,{default:be(()=>[ve(f,{class:"text-h5"},{default:be(()=>[ut(" End the call or just leave? ")]),_:1}),ve(u,null,{default:be(()=>[ut("You can just leave the call if you don't want to end it for everyone else")]),_:1}),ve(d,null,{default:be(()=>[ve(h),ve(l,{variant:"text",onClick:t[0]||(t[0]=w=>s.meetingRoomEnd()),style:{"margin-right":"15px"}},{default:be(()=>[ut(" Just leave the call ")]),_:1}),ve(l,{variant:"text",onClick:t[1]||(t[1]=w=>s.meetingRoomEndForEveryone())},{default:be(()=>[ut(" End the call for everyone ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ve(g,{modelValue:i.snackbar,"onUpdate:modelValue":t[4]||(t[4]=w=>i.snackbar=w),timeout:3e3},{actions:be(()=>[ve(l,{color:"blue",variant:"text",onClick:t[3]||(t[3]=w=>i.snackbar=!1)},{default:be(()=>[ut(" Close ")]),_:1})]),default:be(()=>[ut(So(i.textUserStatus)+" ",1)]),_:1},8,["modelValue"])])):v1("",!0)])])])}const S1=mp(y1,[["render",E1]]);const{openBlock:R1,createBlock:x1}=await Ii("vue"),T1={__name:"App",setup(e){return(t,r)=>(R1(),x1(S1))}},B1=mp(T1,[["__scopeId","data-v-6344aba1"]]);export{B1 as default};
