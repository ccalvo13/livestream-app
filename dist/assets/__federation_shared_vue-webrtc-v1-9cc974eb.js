import{importShared as lh}from"./__federation_fn_import.js";import{B as F,i as Kt,b as uh}from"./buffer-es6-fb58dc30.js";import{c as hh}from"./_commonjs-dynamic-modules-302442b1.js";function Dt(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}function Vf(){throw new Error("setTimeout has not been defined")}function Zf(){throw new Error("clearTimeout has not been defined")}var Je=Vf,Qe=Zf;typeof globalThis.setTimeout=="function"&&(Je=setTimeout);typeof globalThis.clearTimeout=="function"&&(Qe=clearTimeout);function Gf(e){if(Je===setTimeout)return setTimeout(e,0);if((Je===Vf||!Je)&&setTimeout)return Je=setTimeout,setTimeout(e,0);try{return Je(e,0)}catch{try{return Je.call(null,e,0)}catch{return Je.call(this,e,0)}}}function ch(e){if(Qe===clearTimeout)return clearTimeout(e);if((Qe===Zf||!Qe)&&clearTimeout)return Qe=clearTimeout,clearTimeout(e);try{return Qe(e)}catch{try{return Qe.call(null,e)}catch{return Qe.call(this,e)}}}var Ve=[],er=!1,yt,vn=-1;function dh(){!er||!yt||(er=!1,yt.length?Ve=yt.concat(Ve):vn=-1,Ve.length&&Yf())}function Yf(){if(!er){var e=Gf(dh);er=!0;for(var t=Ve.length;t;){for(yt=Ve,Ve=[];++vn<t;)yt&&yt[vn].run();vn=-1,t=Ve.length}yt=null,er=!1,ch(e)}}function we(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ve.push(new Kf(e,t)),Ve.length===1&&!er&&Gf(Yf)}function Kf(e,t){this.fun=e,this.array=t}Kf.prototype.run=function(){this.fun.apply(null,this.array)};var ph="browser",_h="browser",gh=!0,vh={},mh=[],yh="",bh={},wh={},Eh={};function Mt(){}var Sh=Mt,Rh=Mt,Th=Mt,xh=Mt,Ch=Mt,kh=Mt,Oh=Mt;function Ah(e){throw new Error("process.binding is not supported")}function Nh(){return"/"}function Lh(e){throw new Error("process.chdir is not supported")}function Dh(){return 0}var Yt=globalThis.performance||{},Mh=Yt.now||Yt.mozNow||Yt.msNow||Yt.oNow||Yt.webkitNow||function(){return new Date().getTime()};function Ih(e){var t=Mh.call(Yt)*.001,r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r=r-e[0],n=n-e[1],n<0&&(r--,n+=1e9)),[r,n]}var Ph=new Date;function Bh(){var e=new Date,t=e-Ph;return t/1e3}var M={nextTick:we,title:ph,browser:gh,env:vh,argv:mh,version:yh,versions:bh,on:Sh,addListener:Rh,once:Th,off:xh,removeListener:Ch,removeAllListeners:kh,emit:Oh,binding:Ah,cwd:Nh,chdir:Lh,umask:Dh,hrtime:Ih,platform:_h,release:wh,config:Eh,uptime:Bh};const Fh="/home/chris/Projects/livestream-app/node_modules/bufferutil";var Yr={exports:{}},Kr={exports:{}};const ye={},Uh=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),qh=Dt(Uh);function Xf(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var jh=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ks=function(e){return jh.exec(e).slice(1)};function On(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;e=n+"/"+e,t=n.charAt(0)==="/"}return e=Xf(Ns(e.split("/"),function(i){return!!i}),!t).join("/"),(t?"/":"")+e||"."}function Os(e){var t=As(e),r=zh(e,-1)==="/";return e=Xf(Ns(e.split("/"),function(n){return!!n}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function As(e){return e.charAt(0)==="/"}function Jf(){var e=Array.prototype.slice.call(arguments,0);return Os(Ns(e,function(t,r){if(typeof t!="string")throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))}function Qf(e,t){e=On(e).substr(1),t=On(t).substr(1);function r(f){for(var u=0;u<f.length&&f[u]==="";u++);for(var c=f.length-1;c>=0&&f[c]==="";c--);return u>c?[]:f.slice(u,c-u+1)}for(var n=r(e.split("/")),i=r(t.split("/")),s=Math.min(n.length,i.length),o=s,a=0;a<s;a++)if(n[a]!==i[a]){o=a;break}for(var l=[],a=o;a<n.length;a++)l.push("..");return l=l.concat(i.slice(o)),l.join("/")}var el="/",tl=":";function rl(e){var t=ks(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)}function nl(e,t){var r=ks(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function il(e){return ks(e)[3]}const $h={extname:il,basename:nl,dirname:rl,sep:el,delimiter:tl,relative:Qf,join:Jf,isAbsolute:As,normalize:Os,resolve:On};function Ns(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var zh="ab".substr(-1)==="b"?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)};const Hh=Object.freeze(Object.defineProperty({__proto__:null,basename:nl,default:$h,delimiter:tl,dirname:rl,extname:il,isAbsolute:As,join:Jf,normalize:Os,relative:Qf,resolve:On,sep:el},Symbol.toStringTag,{value:"Module"})),Wh=Dt(Hh);var Xr;function sl(){if(typeof Xr>"u"){var e=new ArrayBuffer(2),t=new Uint8Array(e),r=new Uint16Array(e);if(t[0]=1,t[1]=2,r[0]===258)Xr="BE";else if(r[0]===513)Xr="LE";else throw new Error("unable to figure out endianess")}return Xr}function ol(){return typeof globalThis.location<"u"?globalThis.location.hostname:""}function al(){return[]}function fl(){return 0}function ll(){return Number.MAX_VALUE}function ul(){return Number.MAX_VALUE}function hl(){return[]}function cl(){return"Browser"}function dl(){return typeof globalThis.navigator<"u"?globalThis.navigator.appVersion:""}function pl(){}function _l(){}function Vh(){return"javascript"}function Zh(){return"browser"}function Ls(){return"/tmp"}var gl=Ls,vl=`
`;const Gh={EOL:vl,tmpdir:gl,tmpDir:Ls,networkInterfaces:pl,getNetworkInterfaces:_l,release:dl,type:cl,cpus:hl,totalmem:ul,freemem:ll,uptime:fl,loadavg:al,hostname:ol,endianness:sl},Yh=Object.freeze(Object.defineProperty({__proto__:null,EOL:vl,arch:Vh,cpus:hl,default:Gh,endianness:sl,freemem:ll,getNetworkInterfaces:_l,hostname:ol,loadavg:al,networkInterfaces:pl,platform:Zh,release:dl,tmpDir:Ls,tmpdir:gl,totalmem:ul,type:cl,uptime:fl},Symbol.toStringTag,{value:"Module"})),Kh=Dt(Yh);var Qn,vo;function Xh(){if(vo)return Qn;vo=1;var e=qh,t=Wh,r=Kh,n=typeof __webpack_require__=="function"?__non_webpack_require__:hh,i=M.config&&M.config.variables||{},s=!!{}.PREBUILDS_ONLY,o=M.versions.modules,a=A()?"electron":k()?"node-webkit":"node",l={}.npm_config_arch||r.arch(),f={}.npm_config_platform||r.platform(),u={}.LIBC||(P(f)?"musl":"glibc"),c={}.ARM_VERSION||(l==="arm64"?"8":i.arm_version)||"",d=(M.versions.uv||"").split(".")[0];Qn=_;function _(D){return n(_.resolve(D))}_.resolve=_.path=function(D){D=t.resolve(D||".");try{var B=n(t.join(D,"package.json")).name.toUpperCase().replace(/-/g,"_");({})[B+"_PREBUILD"]&&(D={}[B+"_PREBUILD"])}catch{}if(!s){var U=y(t.join(D,"build/Release"),b);if(U)return U;var G=y(t.join(D,"build/Debug"),b);if(G)return G}var ne=Ce(D);if(ne)return ne;var z=Ce(t.dirname(M.execPath));if(z)return z;var J=["platform="+f,"arch="+l,"runtime="+a,"abi="+o,"uv="+d,c?"armv="+c:"","libc="+u,"node="+M.versions.node,M.versions.electron?"electron="+M.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+J+`
    loaded from: `+D+`
`);function Ce(Ee){var Xe=h(t.join(Ee,"prebuilds")).map(p),se=Xe.filter(w(f,l)).sort(v)[0];if(se){var me=t.join(Ee,"prebuilds",se.name),he=h(me).map(E),Le=he.filter(T(a,o)),jt=Le.sort(C(a))[0];if(jt)return t.join(me,jt.file)}}};function h(D){try{return e.readdirSync(D)}catch{return[]}}function y(D,B){var U=h(D).filter(B);return U[0]&&t.join(D,U[0])}function b(D){return/\.node$/.test(D)}function p(D){var B=D.split("-");if(B.length===2){var U=B[0],G=B[1].split("+");if(U&&G.length&&G.every(Boolean))return{name:D,platform:U,architectures:G}}}function w(D,B){return function(U){return U==null||U.platform!==D?!1:U.architectures.includes(B)}}function v(D,B){return D.architectures.length-B.architectures.length}function E(D){var B=D.split("."),U=B.pop(),G={file:D,specificity:0};if(U==="node"){for(var ne=0;ne<B.length;ne++){var z=B[ne];if(z==="node"||z==="electron"||z==="node-webkit")G.runtime=z;else if(z==="napi")G.napi=!0;else if(z.slice(0,3)==="abi")G.abi=z.slice(3);else if(z.slice(0,2)==="uv")G.uv=z.slice(2);else if(z.slice(0,4)==="armv")G.armv=z.slice(4);else if(z==="glibc"||z==="musl")G.libc=z;else continue;G.specificity++}return G}}function T(D,B){return function(U){return!(U==null||U.runtime!==D&&!x(U)||U.abi!==B&&!U.napi||U.uv&&U.uv!==d||U.armv&&U.armv!==c||U.libc&&U.libc!==u)}}function x(D){return D.runtime==="node"&&D.napi}function C(D){return function(B,U){return B.runtime!==U.runtime?B.runtime===D?-1:1:B.abi!==U.abi?B.abi?-1:1:B.specificity!==U.specificity?B.specificity>U.specificity?-1:1:0}}function k(){return!!(M.versions&&M.versions.nw)}function A(){return M.versions&&M.versions.electron||{}.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function P(D){return D==="linux"&&e.existsSync("/etc/alpine-release")}return _.parseTags=E,_.matchTags=T,_.compareTags=C,_.parseTuple=p,_.matchTuple=w,_.compareTuples=v,Qn}var mo;function ml(){return mo||(mo=1,typeof M.addon=="function"?Kr.exports=M.addon.bind(M):Kr.exports=Xh()),Kr.exports}var ei,yo;function Jh(){return yo||(yo=1,ei={mask:(r,n,i,s,o)=>{for(var a=0;a<o;a++)i[s+a]=r[a]^n[a&3]},unmask:(r,n)=>{const i=r.length;for(var s=0;s<i;s++)r[s]^=n[s&3]}}),ei}var bo;function Qh(){if(bo)return Yr.exports;bo=1;try{Yr.exports=ml()(Fh)}catch{Yr.exports=Jh()}return Yr.exports}const ec="/home/chris/Projects/livestream-app/node_modules/utf-8-validate";var Jr={exports:{}},ti,wo;function tc(){if(wo)return ti;wo=1;function e(t){const r=t.length;let n=0;for(;n<r;)if(!(t[n]&128))n++;else if((t[n]&224)===192){if(n+1===r||(t[n+1]&192)!==128||(t[n]&254)===192)return!1;n+=2}else if((t[n]&240)===224){if(n+2>=r||(t[n+1]&192)!==128||(t[n+2]&192)!==128||t[n]===224&&(t[n+1]&224)===128||t[n]===237&&(t[n+1]&224)===160)return!1;n+=3}else if((t[n]&248)===240){if(n+3>=r||(t[n+1]&192)!==128||(t[n+2]&192)!==128||(t[n+3]&192)!==128||t[n]===240&&(t[n+1]&240)===128||t[n]===244&&t[n+1]>143||t[n]>244)return!1;n+=4}else return!1;return!0}return ti=e,ti}var Eo;function rc(){if(Eo)return Jr.exports;Eo=1;try{Jr.exports=ml()(ec)}catch{Jr.exports=tc()}return Jr.exports}var Wt={exports:{}},ri,So;function yl(){return So||(So=1,ri=function(t,r){var n="000000000"+t;return n.substr(n.length-r)}),ri}var ni,Ro;function nc(){if(Ro)return ni;Ro=1;var e=yl(),t=typeof window=="object"?window:self,r=Object.keys(t).length,n=navigator.mimeTypes?navigator.mimeTypes.length:0,i=e((n+navigator.userAgent.length).toString(36)+r.toString(36),4);return ni=function(){return i},ni}var ii,To;function ic(){if(To)return ii;To=1;var e,t=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof self<"u"&&self.crypto;if(t){var r=Math.pow(2,32)-1;e=function(){return Math.abs(t.getRandomValues(new Uint32Array(1))[0]/r)}}else e=Math.random;return ii=e,ii}var si,xo;function sc(){if(xo)return si;xo=1;var e=nc(),t=yl(),r=ic(),n=0,i=4,s=36,o=Math.pow(s,i);function a(){return t((r()*o<<0).toString(s),i)}function l(){return n=n<o?n:0,n++,n-1}function f(){var u="c",c=new Date().getTime().toString(s),d=t(l().toString(s),i),_=e(),h=a()+a();return u+c+d+_+h}return f.slug=function(){var c=new Date().getTime().toString(36),d=l().toString(36).slice(-4),_=e().slice(0,1)+e().slice(-1),h=a().slice(-2);return c.slice(-2)+d+_+h},f.isCuid=function(c){return typeof c!="string"?!1:!!c.startsWith("c")},f.isSlug=function(c){if(typeof c!="string")return!1;var d=c.length;return d>=7&&d<=10},f.fingerprint=e,si=f,si}var Qr={exports:{}},Co;function fr(){return Co||(Co=1,typeof Object.create=="function"?Qr.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Qr.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),Qr.exports}var oi,ko;function oc(){return ko||(ko=1,oi=function(t,r,n){var i,s=t.length;if(!(r>=s||n===0)){n=r+n>s?s-r:n;var o=s-n;for(i=r;i<o;++i)t[i]=t[i+n];t.length=o}}),oi}var fs;typeof Object.create=="function"?fs=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:fs=function(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t};const ue=fs;var ac=/%[sdj%]/g;function Fn(e){if(!pt(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Oe(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,s=String(e).replace(ac,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),o=n[r];r<i;o=n[++r])Ze(o)||!Ye(o)?s+=" "+o:s+=" "+Oe(o);return s}function Un(e,t){if(Pe(globalThis.process))return function(){return Un(e,t).apply(this,arguments)};if(M.noDeprecation===!0)return e;var r=!1;function n(){if(!r){if(M.throwDeprecation)throw new Error(t);M.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n}var en={},ai;function Ds(e){if(Pe(ai)&&(ai={}.NODE_DEBUG||""),e=e.toUpperCase(),!en[e])if(new RegExp("\\b"+e+"\\b","i").test(ai)){var t=0;en[e]=function(){var r=Fn.apply(null,arguments);console.error("%s %d: %s",e,t,r)}}else en[e]=function(){};return en[e]}function Oe(e,t){var r={seen:[],stylize:lc};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),qn(t)?r.showHidden=t:t&&Fs(r,t),Pe(r.showHidden)&&(r.showHidden=!1),Pe(r.depth)&&(r.depth=2),Pe(r.colors)&&(r.colors=!1),Pe(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=fc),An(r,e,r.depth)}Oe.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Oe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function fc(e,t){var r=Oe.styles[t];return r?"\x1B["+Oe.colors[r][0]+"m"+e+"\x1B["+Oe.colors[r][1]+"m":e}function lc(e,t){return e}function uc(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function An(e,t,r){if(e.customInspect&&t&&St(t.inspect)&&t.inspect!==Oe&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return pt(n)||(n=An(e,n,r)),n}var i=hc(e,t);if(i)return i;var s=Object.keys(t),o=uc(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),tr(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return fi(t);if(s.length===0){if(St(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Et(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ir(t))return e.stylize(Date.prototype.toString.call(t),"date");if(tr(t))return fi(t)}var l="",f=!1,u=["{","}"];if(Ms(t)&&(f=!0,u=["[","]"]),St(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(Et(t)&&(l=" "+RegExp.prototype.toString.call(t)),ir(t)&&(l=" "+Date.prototype.toUTCString.call(t)),tr(t)&&(l=" "+fi(t)),s.length===0&&(!f||t.length==0))return u[0]+l+u[1];if(r<0)return Et(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var d;return f?d=cc(e,t,r,o,s):d=s.map(function(_){return ls(e,t,r,o,_,f)}),e.seen.pop(),dc(d,l,u)}function hc(e,t){if(Pe(t))return e.stylize("undefined","undefined");if(pt(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Ps(t))return e.stylize(""+t,"number");if(qn(t))return e.stylize(""+t,"boolean");if(Ze(t))return e.stylize("null","null")}function fi(e){return"["+Error.prototype.toString.call(e)+"]"}function cc(e,t,r,n,i){for(var s=[],o=0,a=t.length;o<a;++o)Sl(t,String(o))?s.push(ls(e,t,r,n,String(o),!0)):s.push("");return i.forEach(function(l){l.match(/^\d+$/)||s.push(ls(e,t,r,n,l,!0))}),s}function ls(e,t,r,n,i,s){var o,a,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?l.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),Sl(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(Ze(r)?a=An(e,l.value,null):a=An(e,l.value,r-1),a.indexOf(`
`)>-1&&(s?a=a.split(`
`).map(function(f){return"  "+f}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(f){return"   "+f}).join(`
`))):a=e.stylize("[Circular]","special")),Pe(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function dc(e,t,r){var n=e.reduce(function(i,s){return s.indexOf(`
`)>=0,i+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function Ms(e){return Array.isArray(e)}function qn(e){return typeof e=="boolean"}function Ze(e){return e===null}function Is(e){return e==null}function Ps(e){return typeof e=="number"}function pt(e){return typeof e=="string"}function bl(e){return typeof e=="symbol"}function Pe(e){return e===void 0}function Et(e){return Ye(e)&&Bs(e)==="[object RegExp]"}function Ye(e){return typeof e=="object"&&e!==null}function ir(e){return Ye(e)&&Bs(e)==="[object Date]"}function tr(e){return Ye(e)&&(Bs(e)==="[object Error]"||e instanceof Error)}function St(e){return typeof e=="function"}function Nn(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}function wl(e){return F.isBuffer(e)}function Bs(e){return Object.prototype.toString.call(e)}function li(e){return e<10?"0"+e.toString(10):e.toString(10)}var pc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _c(){var e=new Date,t=[li(e.getHours()),li(e.getMinutes()),li(e.getSeconds())].join(":");return[e.getDate(),pc[e.getMonth()],t].join(" ")}function El(){console.log("%s - %s",_c(),Fn.apply(null,arguments))}function Fs(e,t){if(!t||!Ye(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Sl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const gc={inherits:ue,_extend:Fs,log:El,isBuffer:wl,isPrimitive:Nn,isFunction:St,isError:tr,isDate:ir,isObject:Ye,isRegExp:Et,isUndefined:Pe,isSymbol:bl,isString:pt,isNumber:Ps,isNullOrUndefined:Is,isNull:Ze,isBoolean:qn,isArray:Ms,inspect:Oe,deprecate:Un,format:Fn,debuglog:Ds},vc=Object.freeze(Object.defineProperty({__proto__:null,_extend:Fs,debuglog:Ds,default:gc,deprecate:Un,format:Fn,inherits:ue,inspect:Oe,isArray:Ms,isBoolean:qn,isBuffer:wl,isDate:ir,isError:tr,isFunction:St,isNull:Ze,isNullOrUndefined:Is,isNumber:Ps,isObject:Ye,isPrimitive:Nn,isRegExp:Et,isString:pt,isSymbol:bl,isUndefined:Pe,log:El},Symbol.toStringTag,{value:"Module"}));function Oo(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var mc=Object.prototype.hasOwnProperty,Ao=Object.keys||function(e){var t=[];for(var r in e)mc.call(e,r)&&t.push(r);return t},No=Array.prototype.slice,ui;function Rl(){return typeof ui<"u"?ui:ui=function(){return function(){}.name==="foo"}()}function Lo(e){return Object.prototype.toString.call(e)}function Do(e){return Kt(e)||typeof globalThis.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?!!(e instanceof DataView||e.buffer&&e.buffer instanceof ArrayBuffer):!1}function ve(e,t){e||ge(e,!0,t,"==",Ar)}var yc=/\s*function\s+([^\(\s]*)\s*/;function Tl(e){if(St(e)){if(Rl())return e.name;var t=e.toString(),r=t.match(yc);return r&&r[1]}}ve.AssertionError=jn;function jn(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=bc(this),this.generatedMessage=!0);var t=e.stackStartFunction||ge;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=Tl(t),s=n.indexOf(`
`+i);if(s>=0){var o=n.indexOf(`
`,s+1);n=n.substring(o+1)}this.stack=n}}}ue(jn,Error);function Mo(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function Io(e){if(Rl()||!St(e))return Oe(e);var t=Tl(e),r=t?": "+t:"";return"[Function"+r+"]"}function bc(e){return Mo(Io(e.actual),128)+" "+e.operator+" "+Mo(Io(e.expected),128)}function ge(e,t,r,n,i){throw new jn({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}ve.fail=ge;function Ar(e,t){e||ge(e,!0,t,"==",Ar)}ve.ok=Ar;ve.equal=Us;function Us(e,t,r){e!=t&&ge(e,t,r,"==",Us)}ve.notEqual=qs;function qs(e,t,r){e==t&&ge(e,t,r,"!=",qs)}ve.deepEqual=js;function js(e,t,r){sr(e,t,!1)||ge(e,t,r,"deepEqual",js)}ve.deepStrictEqual=$s;function $s(e,t,r){sr(e,t,!0)||ge(e,t,r,"deepStrictEqual",$s)}function sr(e,t,r,n){if(e===t)return!0;if(Kt(e)&&Kt(t))return Oo(e,t)===0;if(ir(e)&&ir(t))return e.getTime()===t.getTime();if(Et(e)&&Et(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if((e===null||typeof e!="object")&&(t===null||typeof t!="object"))return r?e===t:e==t;if(Do(e)&&Do(t)&&Lo(e)===Lo(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return Oo(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0;if(Kt(e)!==Kt(t))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(e);return i!==-1&&i===n.expected.indexOf(t)?!0:(n.actual.push(e),n.expected.push(t),wc(e,t,r,n))}function Po(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function wc(e,t,r,n){if(e==null||t===null||t===void 0)return!1;if(Nn(e)||Nn(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=Po(e),s=Po(t);if(i&&!s||!i&&s)return!1;if(i)return e=No.call(e),t=No.call(t),sr(e,t,r);var o=Ao(e),a=Ao(t),l,f;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),f=o.length-1;f>=0;f--)if(o[f]!==a[f])return!1;for(f=o.length-1;f>=0;f--)if(l=o[f],!sr(e[l],t[l],r,n))return!1;return!0}ve.notDeepEqual=zs;function zs(e,t,r){sr(e,t,!1)&&ge(e,t,r,"notDeepEqual",zs)}ve.notDeepStrictEqual=Hs;function Hs(e,t,r){sr(e,t,!0)&&ge(e,t,r,"notDeepStrictEqual",Hs)}ve.strictEqual=Ws;function Ws(e,t,r){e!==t&&ge(e,t,r,"===",Ws)}ve.notStrictEqual=Vs;function Vs(e,t,r){e===t&&ge(e,t,r,"!==",Vs)}function Bo(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch{}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function Ec(e){var t;try{e()}catch(r){t=r}return t}function xl(e,t,r,n){var i;if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof r=="string"&&(n=r,r=null),i=Ec(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&ge(i,r,"Missing expected exception"+n);var s=typeof n=="string",o=!e&&tr(i),a=!e&&i&&!r;if((o&&s&&Bo(i,r)||a)&&ge(i,r,"Got unwanted exception"+n),e&&i&&r&&!Bo(i,r)||!e&&i)throw i}ve.throws=Cl;function Cl(e,t,r){xl(!0,e,t,r)}ve.doesNotThrow=kl;function kl(e,t,r){xl(!1,e,t,r)}ve.ifError=Ol;function Ol(e){if(e)throw e}const Sc=Object.freeze(Object.defineProperty({__proto__:null,AssertionError:jn,assert:Ar,deepEqual:js,deepStrictEqual:$s,default:ve,doesNotThrow:kl,equal:Us,fail:ge,ifError:Ol,notDeepEqual:zs,notDeepStrictEqual:Hs,notEqual:qs,notStrictEqual:Vs,ok:Ar,strictEqual:Ws,throws:Cl},Symbol.toStringTag,{value:"Module"})),Zs=Dt(Sc);var hi,Fo;function Rc(){if(Fo)return hi;Fo=1;var e=Zs,t=typeof window<"u";function r(){var i;return t?(window._nanoScheduler||(window._nanoScheduler=new n(!0)),i=window._nanoScheduler):i=new n,i}function n(i){this.hasWindow=i,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}return n.prototype.push=function(i){e.equal(typeof i,"function","nanoscheduler.push: cb should be type function"),this.queue.push(i),this.schedule()},n.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var i=this;this.method(function(s){for(var o;i.queue.length&&s.timeRemaining()>0;)o=i.queue.shift(),o(s);i.scheduled=!1,i.queue.length&&i.schedule()})}},n.prototype.setTimeout=function(i){setTimeout(i,0,{timeRemaining:function(){return 1}})},hi=r,hi}var ci,Uo;function Tc(){if(Uo)return ci;Uo=1;var e=Rc()(),t=Zs,r;n.disabled=!0;try{r=window.performance,n.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!r.mark}catch{}ci=n;function n(s){if(t.equal(typeof s,"string","nanotiming: name should be type string"),n.disabled)return i;var o=(r.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER,a="start-"+o+"-"+s;r.mark(a);function l(f){var u="end-"+o+"-"+s;r.mark(u),e.push(function(){var c=null;try{var d=s+" ["+o+"]";r.measure(d,a,u),r.clearMarks(a),r.clearMarks(u)}catch(_){c=_}f&&f(c,s)})}return l.uuid=o,l}function i(s){s&&e.push(function(){s(new Error("nanotiming: performance API unavailable"))})}return ci}var di,qo;function xc(){if(qo)return di;qo=1;var e=oc(),t=Tc(),r=Zs;di=n;function n(i){if(!(this instanceof n))return new n(i);this._name=i||"nanobus",this._starListeners=[],this._listeners={}}return n.prototype.emit=function(i){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.emit: eventName should be type string or symbol");for(var s=[],o=1,a=arguments.length;o<a;o++)s.push(arguments[o]);var l=t(this._name+"('"+i.toString()+"')"),f=this._listeners[i];return f&&f.length>0&&this._emit(this._listeners[i],s),this._starListeners.length>0&&this._emit(this._starListeners,i,s,l.uuid),l(),this},n.prototype.on=n.prototype.addListener=function(i,s){return r.ok(typeof i=="string"||typeof i=="symbol","nanobus.on: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.on: listener should be type function"),i==="*"?this._starListeners.push(s):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].push(s)),this},n.prototype.prependListener=function(i,s){return r.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.prependListener: listener should be type function"),i==="*"?this._starListeners.unshift(s):(this._listeners[i]||(this._listeners[i]=[]),this._listeners[i].unshift(s)),this},n.prototype.once=function(i,s){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.once: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.once: listener should be type function");var o=this;this.on(i,a);function a(){s.apply(o,arguments),o.removeListener(i,a)}return this},n.prototype.prependOnceListener=function(i,s){r.ok(typeof i=="string"||typeof i=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.prependOnceListener: listener should be type function");var o=this;this.prependListener(i,a);function a(){s.apply(o,arguments),o.removeListener(i,a)}return this},n.prototype.removeListener=function(i,s){if(r.ok(typeof i=="string"||typeof i=="symbol","nanobus.removeListener: eventName should be type string or symbol"),r.equal(typeof s,"function","nanobus.removeListener: listener should be type function"),i==="*")return this._starListeners=this._starListeners.slice(),o(this._starListeners,s);return typeof this._listeners[i]<"u"&&(this._listeners[i]=this._listeners[i].slice()),o(this._listeners[i],s);function o(a,l){if(a){var f=a.indexOf(l);if(f!==-1)return e(a,f,1),!0}}},n.prototype.removeAllListeners=function(i){return i?i==="*"?this._starListeners=[]:this._listeners[i]=[]:(this._starListeners=[],this._listeners={}),this},n.prototype.listeners=function(i){var s=i!=="*"?this._listeners[i]:this._starListeners,o=[];if(s)for(var a=s.length,l=0;l<a;l++)o.push(s[l]);return o},n.prototype._emit=function(i,s,o,a){if(!(typeof i>"u")&&i.length!==0){o===void 0&&(o=s,s=null),s&&(a!==void 0?o=[s].concat(o,a):o=[s].concat(o));for(var l=i.length,f=0;f<l;f++){var u=i[f];u.apply(u,o)}}},di}var tn={exports:{}},pi,jo;function Cc(){if(jo)return pi;jo=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;pi=function(u,c){c=c||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return c.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(c){var d=parseFloat(c[1]),_=(c[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(u){var c=Math.abs(u);return c>=n?Math.round(u/n)+"d":c>=r?Math.round(u/r)+"h":c>=t?Math.round(u/t)+"m":c>=e?Math.round(u/e)+"s":u+"ms"}function l(u){var c=Math.abs(u);return c>=n?f(u,c,n,"day"):c>=r?f(u,c,r,"hour"):c>=t?f(u,c,t,"minute"):c>=e?f(u,c,e,"second"):u+" ms"}function f(u,c,d,_){var h=c>=d*1.5;return Math.round(u/d)+" "+_+(h?"s":"")}return pi}var _i,$o;function kc(){if($o)return _i;$o=1;function e(t){n.debug=n,n.default=n,n.coerce=f,n.disable=o,n.enable=s,n.enabled=a,n.humanize=Cc(),n.destroy=u,Object.keys(t).forEach(c=>{n[c]=t[c]}),n.names=[],n.skips=[],n.formatters={};function r(c){let d=0;for(let _=0;_<c.length;_++)d=(d<<5)-d+c.charCodeAt(_),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=r;function n(c){let d,_=null,h,y;function b(...p){if(!b.enabled)return;const w=b,v=Number(new Date),E=v-(d||v);w.diff=E,w.prev=d,w.curr=v,d=v,p[0]=n.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let T=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(C,k)=>{if(C==="%%")return"%";T++;const A=n.formatters[k];if(typeof A=="function"){const P=p[T];C=A.call(w,P),p.splice(T,1),T--}return C}),n.formatArgs.call(w,p),(w.log||n.log).apply(w,p)}return b.namespace=c,b.useColors=n.useColors(),b.color=n.selectColor(c),b.extend=i,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(h!==n.namespaces&&(h=n.namespaces,y=n.enabled(c)),y),set:p=>{_=p}}),typeof n.init=="function"&&n.init(b),b}function i(c,d){const _=n(this.namespace+(typeof d>"u"?":":d)+c);return _.log=this.log,_}function s(c){n.save(c),n.namespaces=c,n.names=[],n.skips=[];let d;const _=(typeof c=="string"?c:"").split(/[\s,]+/),h=_.length;for(d=0;d<h;d++)_[d]&&(c=_[d].replace(/\*/g,".*?"),c[0]==="-"?n.skips.push(new RegExp("^"+c.slice(1)+"$")):n.names.push(new RegExp("^"+c+"$")))}function o(){const c=[...n.names.map(l),...n.skips.map(l).map(d=>"-"+d)].join(",");return n.enable(""),c}function a(c){if(c[c.length-1]==="*")return!0;let d,_;for(d=0,_=n.skips.length;d<_;d++)if(n.skips[d].test(c))return!1;for(d=0,_=n.names.length;d<_;d++)if(n.names[d].test(c))return!0;return!1}function l(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function f(c){return c instanceof Error?c.stack||c.message:c}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return _i=e,_i}var zo;function Oc(){return zo||(zo=1,function(e,t){t.formatArgs=n,t.save=i,t.load=s,t.useColors=r,t.storage=o(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;l.splice(1,0,f,"color: inherit");let u=0,c=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(u++,d==="%c"&&(c=u))}),l.splice(c,0,f)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function s(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof M<"u"&&"env"in M&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}e.exports=kc()(t);const{formatters:a}=e.exports;a.j=function(l){try{return JSON.stringify(l)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}}(tn,tn.exports)),tn.exports}var gi,Ho;function Ac(){return Ho||(Ho=1,gi=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}),gi}var rn={exports:{}},nn={exports:{}};const lr=Dt(uh);var Wo;function Nc(){return Wo||(Wo=1,function(e,t){var r=lr,n=r.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(o,a,l){return n(o,a,l)}i(n,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=n(o);return a!==void 0?typeof l=="string"?f.fill(a,l):f.fill(a):f.fill(0),f},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(nn,nn.exports)),nn.exports}var Vo;function Lc(){if(Vo)return rn.exports;Vo=1;var e=65536,t=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=Nc().Buffer,i=globalThis.crypto||globalThis.msCrypto;i&&i.getRandomValues?rn.exports=s:rn.exports=r;function s(o,a){if(o>t)throw new RangeError("requested too many random bytes");var l=n.allocUnsafe(o);if(o>0)if(o>e)for(var f=0;f<o;f+=e)i.getRandomValues(l.slice(f,f+e));else i.getRandomValues(l);return typeof a=="function"?M.nextTick(function(){a(null,l)}):l}return rn.exports}var sn={exports:{}},Dc;function ft(){}ft.prototype=Object.create(null);function j(){j.init.call(this)}j.EventEmitter=j;j.usingDomains=!1;j.prototype.domain=void 0;j.prototype._events=void 0;j.prototype._maxListeners=void 0;j.defaultMaxListeners=10;j.init=function(){this.domain=null,j.usingDomains&&Dc.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new ft,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};j.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this};function Al(e){return e._maxListeners===void 0?j.defaultMaxListeners:e._maxListeners}j.prototype.getMaxListeners=function(){return Al(this)};function Mc(e,t,r){if(t)e.call(r);else for(var n=e.length,i=$r(e,n),s=0;s<n;++s)i[s].call(r)}function Ic(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,s=$r(e,i),o=0;o<i;++o)s[o].call(r,n)}function Pc(e,t,r,n,i){if(t)e.call(r,n,i);else for(var s=e.length,o=$r(e,s),a=0;a<s;++a)o[a].call(r,n,i)}function Bc(e,t,r,n,i,s){if(t)e.call(r,n,i,s);else for(var o=e.length,a=$r(e,o),l=0;l<o;++l)a[l].call(r,n,i,s)}function Fc(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,s=$r(e,i),o=0;o<i;++o)s[o].apply(r,n)}j.prototype.emit=function(t){var r,n,i,s,o,a,l,f=t==="error";if(a=this._events,a)f=f&&a.error==null;else if(!f)return!1;if(l=this.domain,f){if(r=arguments[1],l)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=l,r.domainThrown=!1,l.emit("error",r);else{if(r instanceof Error)throw r;var u=new Error('Uncaught, unspecified "error" event. ('+r+")");throw u.context=r,u}return!1}if(n=a[t],!n)return!1;var c=typeof n=="function";switch(i=arguments.length,i){case 1:Mc(n,c,this);break;case 2:Ic(n,c,this,arguments[1]);break;case 3:Pc(n,c,this,arguments[1],arguments[2]);break;case 4:Bc(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),o=1;o<i;o++)s[o-1]=arguments[o];Fc(n,c,this,s)}return!0};function Nl(e,t,r,n){var i,s,o;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=e._events,s?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=new ft,e._eventsCount=0),!o)o=s[t]=r,++e._eventsCount;else if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=Al(e),i&&i>0&&o.length>i)){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,Uc(a)}return e}function Uc(e){typeof console.warn=="function"?console.warn(e):console.log(e)}j.prototype.addListener=function(t,r){return Nl(this,t,r,!1)};j.prototype.on=j.prototype.addListener;j.prototype.prependListener=function(t,r){return Nl(this,t,r,!0)};function Ll(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}j.prototype.once=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,Ll(this,t,r)),this};j.prototype.prependOnceListener=function(t,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Ll(this,t,r)),this};j.prototype.removeListener=function(t,r){var n,i,s,o,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[t],!n)return this;if(n===r||n.listener&&n.listener===r)--this._eventsCount===0?this._events=new ft:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length;o-- >0;)if(n[o]===r||n[o].listener&&n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount===0)return this._events=new ft,this;delete i[t]}else qc(n,s);i.removeListener&&this.emit("removeListener",t,a||r)}return this};j.prototype.removeAllListeners=function(t){var r,n;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=new ft,this._eventsCount=0):n[t]&&(--this._eventsCount===0?this._events=new ft:delete n[t]),this;if(arguments.length===0){for(var i=Object.keys(n),s=0,o;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=new ft,this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r)do this.removeListener(t,r[r.length-1]);while(r[0]);return this};j.prototype.listeners=function(t){var r,n,i=this._events;return i?(r=i[t],r?typeof r=="function"?n=[r.listener||r]:n=jc(r):n=[]):n=[],n};j.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Dl.call(e,t)};j.prototype.listenerCount=Dl;function Dl(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}j.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function qc(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function $r(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function jc(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}const $c=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:j,default:j},Symbol.toStringTag,{value:"Module"})),Ml=Dt($c);var vi,Zo;function Il(){return Zo||(Zo=1,vi=Ml.EventEmitter),vi}const Pl=Dt(vc);var mi,Go;function zc(){if(Go)return mi;Go=1;function e(h,y){var b=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);y&&(p=p.filter(function(w){return Object.getOwnPropertyDescriptor(h,w).enumerable})),b.push.apply(b,p)}return b}function t(h){for(var y=1;y<arguments.length;y++){var b=arguments[y]!=null?arguments[y]:{};y%2?e(Object(b),!0).forEach(function(p){r(h,p,b[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(b)):e(Object(b)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(b,p))})}return h}function r(h,y,b){return y=o(y),y in h?Object.defineProperty(h,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):h[y]=b,h}function n(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")}function i(h,y){for(var b=0;b<y.length;b++){var p=y[b];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,o(p.key),p)}}function s(h,y,b){return y&&i(h.prototype,y),b&&i(h,b),Object.defineProperty(h,"prototype",{writable:!1}),h}function o(h){var y=a(h,"string");return typeof y=="symbol"?y:String(y)}function a(h,y){if(typeof h!="object"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var p=b.call(h,y||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(h)}var l=lr,f=l.Buffer,u=Pl,c=u.inspect,d=c&&c.custom||"inspect";function _(h,y,b){f.prototype.copy.call(h,y,b)}return mi=function(){function h(){n(this,h),this.head=null,this.tail=null,this.length=0}return s(h,[{key:"push",value:function(b){var p={data:b,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(b){var p={data:b,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var p=this.head,w=""+p.data;p=p.next;)w+=b+p.data;return w}},{key:"concat",value:function(b){if(this.length===0)return f.alloc(0);for(var p=f.allocUnsafe(b>>>0),w=this.head,v=0;w;)_(w.data,p,v),v+=w.data.length,w=w.next;return p}},{key:"consume",value:function(b,p){var w;return b<this.head.data.length?(w=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?w=this.shift():w=p?this._getString(b):this._getBuffer(b),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var p=this.head,w=1,v=p.data;for(b-=v.length;p=p.next;){var E=p.data,T=b>E.length?E.length:b;if(T===E.length?v+=E:v+=E.slice(0,b),b-=T,b===0){T===E.length?(++w,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=E.slice(T));break}++w}return this.length-=w,v}},{key:"_getBuffer",value:function(b){var p=f.allocUnsafe(b),w=this.head,v=1;for(w.data.copy(p),b-=w.data.length;w=w.next;){var E=w.data,T=b>E.length?E.length:b;if(E.copy(p,p.length-b,0,T),b-=T,b===0){T===E.length?(++v,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=E.slice(T));break}++v}return this.length-=v,p}},{key:d,value:function(b,p){return c(this,t(t({},p),{},{depth:0,customInspect:!1}))}}]),h}(),mi}var yi,Yo;function Bl(){if(Yo)return yi;Yo=1;function e(o,a){var l=this,f=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return f||u?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(i,this,o)):M.nextTick(i,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(c){!a&&c?l._writableState?l._writableState.errorEmitted?M.nextTick(r,l):(l._writableState.errorEmitted=!0,M.nextTick(t,l,c)):M.nextTick(t,l,c):a?(M.nextTick(r,l),a(c)):M.nextTick(r,l)}),this)}function t(o,a){i(o,a),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(o,a){o.emit("error",a)}function s(o,a){var l=o._readableState,f=o._writableState;l&&l.autoDestroy||f&&f.autoDestroy?o.destroy(a):o.emit("error",a)}return yi={destroy:e,undestroy:n,errorOrDestroy:s},yi}var bi={},Ko;function ur(){if(Ko)return bi;Ko=1;function e(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var t={};function r(a,l,f){f||(f=Error);function u(d,_,h){return typeof l=="string"?l:l(d,_,h)}var c=function(d){e(_,d);function _(h,y,b){return d.call(this,u(h,y,b))||this}return _}(f);c.prototype.name=f.name,c.prototype.code=a,t[a]=c}function n(a,l){if(Array.isArray(a)){var f=a.length;return a=a.map(function(u){return String(u)}),f>2?"one of ".concat(l," ").concat(a.slice(0,f-1).join(", "),", or ")+a[f-1]:f===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function i(a,l,f){return a.substr(!f||f<0?0:+f,l.length)===l}function s(a,l,f){return(f===void 0||f>a.length)&&(f=a.length),a.substring(f-l.length,f)===l}function o(a,l,f){return typeof f!="number"&&(f=0),f+l.length>a.length?!1:a.indexOf(l,f)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,l,f){var u;typeof l=="string"&&i(l,"not ")?(u="must not be",l=l.replace(/^not /,"")):u="must be";var c;if(s(a," argument"))c="The ".concat(a," ").concat(u," ").concat(n(l,"type"));else{var d=o(a,".")?"property":"argument";c='The "'.concat(a,'" ').concat(d," ").concat(u," ").concat(n(l,"type"))}return c+=". Received type ".concat(typeof f),c},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),bi.codes=t,bi}var wi,Xo;function Fl(){if(Xo)return wi;Xo=1;var e=ur().codes.ERR_INVALID_OPT_VALUE;function t(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,o){var a=t(i,o,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?s:"highWaterMark";throw new e(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return wi={getHighWaterMark:r},wi}var Ei,Jo;function Hc(){if(Jo)return Ei;Jo=1,Ei=e;function e(r,n){if(t("noDeprecation"))return r;var i=!1;function s(){if(!i){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function t(r){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return Ei}var Si,Qo;function Ul(){if(Qo)return Si;Qo=1,Si=k;function e(R){var S=this;this.next=null,this.entry=null,this.finish=function(){jt(S,R)}}var t;k.WritableState=x;var r={deprecate:Hc()},n=Il(),i=lr.Buffer,s=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(R){return i.from(R)}function a(R){return i.isBuffer(R)||R instanceof s}var l=Bl(),f=Fl(),u=f.getHighWaterMark,c=ur().codes,d=c.ERR_INVALID_ARG_TYPE,_=c.ERR_METHOD_NOT_IMPLEMENTED,h=c.ERR_MULTIPLE_CALLBACK,y=c.ERR_STREAM_CANNOT_PIPE,b=c.ERR_STREAM_DESTROYED,p=c.ERR_STREAM_NULL_VALUES,w=c.ERR_STREAM_WRITE_AFTER_END,v=c.ERR_UNKNOWN_ENCODING,E=l.errorOrDestroy;fr()(k,n);function T(){}function x(R,S,N){t=t||or(),R=R||{},typeof N!="boolean"&&(N=S instanceof t),this.objectMode=!!R.objectMode,N&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=u(this,R,"writableHighWaterMark",N),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=R.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){z(S,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}x.prototype.getBuffer=function(){for(var S=this.bufferedRequest,N=[];S;)N.push(S),S=S.next;return N},function(){try{Object.defineProperty(x.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var C;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(S){return C.call(this,S)?!0:this!==k?!1:S&&S._writableState instanceof x}})):C=function(S){return S instanceof this};function k(R){t=t||or();var S=this instanceof t;if(!S&&!C.call(k,this))return new k(R);this._writableState=new x(R,this,S),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),n.call(this)}k.prototype.pipe=function(){E(this,new y)};function A(R,S){var N=new w;E(R,N),M.nextTick(S,N)}function P(R,S,N,q){var W;return N===null?W=new p:typeof N!="string"&&!S.objectMode&&(W=new d("chunk",["string","Buffer"],N)),W?(E(R,W),M.nextTick(q,W),!1):!0}k.prototype.write=function(R,S,N){var q=this._writableState,W=!1,g=!q.objectMode&&a(R);return g&&!i.isBuffer(R)&&(R=o(R)),typeof S=="function"&&(N=S,S=null),g?S="buffer":S||(S=q.defaultEncoding),typeof N!="function"&&(N=T),q.ending?A(this,N):(g||P(this,q,R,N))&&(q.pendingcb++,W=B(this,q,g,R,S,N)),W},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&Ee(this,R))},k.prototype.setDefaultEncoding=function(S){if(typeof S=="string"&&(S=S.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((S+"").toLowerCase())>-1))throw new v(S);return this._writableState.defaultEncoding=S,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function D(R,S,N){return!R.objectMode&&R.decodeStrings!==!1&&typeof S=="string"&&(S=i.from(S,N)),S}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function B(R,S,N,q,W,g){if(!N){var m=D(S,q,W);q!==m&&(N=!0,W="buffer",q=m)}var O=S.objectMode?1:q.length;S.length+=O;var I=S.length<S.highWaterMark;if(I||(S.needDrain=!0),S.writing||S.corked){var re=S.lastBufferedRequest;S.lastBufferedRequest={chunk:q,encoding:W,isBuf:N,callback:g,next:null},re?re.next=S.lastBufferedRequest:S.bufferedRequest=S.lastBufferedRequest,S.bufferedRequestCount+=1}else U(R,S,!1,O,q,W,g);return I}function U(R,S,N,q,W,g,m){S.writelen=q,S.writecb=m,S.writing=!0,S.sync=!0,S.destroyed?S.onwrite(new b("write")):N?R._writev(W,S.onwrite):R._write(W,g,S.onwrite),S.sync=!1}function G(R,S,N,q,W){--S.pendingcb,N?(M.nextTick(W,q),M.nextTick(he,R,S),R._writableState.errorEmitted=!0,E(R,q)):(W(q),R._writableState.errorEmitted=!0,E(R,q),he(R,S))}function ne(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}function z(R,S){var N=R._writableState,q=N.sync,W=N.writecb;if(typeof W!="function")throw new h;if(ne(N),S)G(R,N,q,S,W);else{var g=Xe(N)||R.destroyed;!g&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&Ee(R,N),q?M.nextTick(J,R,N,g,W):J(R,N,g,W)}}function J(R,S,N,q){N||Ce(R,S),S.pendingcb--,q(),he(R,S)}function Ce(R,S){S.length===0&&S.needDrain&&(S.needDrain=!1,R.emit("drain"))}function Ee(R,S){S.bufferProcessing=!0;var N=S.bufferedRequest;if(R._writev&&N&&N.next){var q=S.bufferedRequestCount,W=new Array(q),g=S.corkedRequestsFree;g.entry=N;for(var m=0,O=!0;N;)W[m]=N,N.isBuf||(O=!1),N=N.next,m+=1;W.allBuffers=O,U(R,S,!0,S.length,W,"",g.finish),S.pendingcb++,S.lastBufferedRequest=null,g.next?(S.corkedRequestsFree=g.next,g.next=null):S.corkedRequestsFree=new e(S),S.bufferedRequestCount=0}else{for(;N;){var I=N.chunk,re=N.encoding,H=N.callback,X=S.objectMode?1:I.length;if(U(R,S,!1,X,I,re,H),N=N.next,S.bufferedRequestCount--,S.writing)break}N===null&&(S.lastBufferedRequest=null)}S.bufferedRequest=N,S.bufferProcessing=!1}k.prototype._write=function(R,S,N){N(new _("_write()"))},k.prototype._writev=null,k.prototype.end=function(R,S,N){var q=this._writableState;return typeof R=="function"?(N=R,R=null,S=null):typeof S=="function"&&(N=S,S=null),R!=null&&this.write(R,S),q.corked&&(q.corked=1,this.uncork()),q.ending||Le(this,q,N),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Xe(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function se(R,S){R._final(function(N){S.pendingcb--,N&&E(R,N),S.prefinished=!0,R.emit("prefinish"),he(R,S)})}function me(R,S){!S.prefinished&&!S.finalCalled&&(typeof R._final=="function"&&!S.destroyed?(S.pendingcb++,S.finalCalled=!0,M.nextTick(se,R,S)):(S.prefinished=!0,R.emit("prefinish")))}function he(R,S){var N=Xe(S);if(N&&(me(R,S),S.pendingcb===0&&(S.finished=!0,R.emit("finish"),S.autoDestroy))){var q=R._readableState;(!q||q.autoDestroy&&q.endEmitted)&&R.destroy()}return N}function Le(R,S,N){S.ending=!0,he(R,S),N&&(S.finished?M.nextTick(N):R.once("finish",N)),S.ended=!0,R.writable=!1}function jt(R,S,N){var q=R.entry;for(R.entry=null;q;){var W=q.callback;S.pendingcb--,W(N),q=q.next}S.corkedRequestsFree.next=R}return Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(S){this._writableState&&(this._writableState.destroyed=S)}}),k.prototype.destroy=l.destroy,k.prototype._undestroy=l.undestroy,k.prototype._destroy=function(R,S){S(R)},Si}var Ri,ea;function or(){if(ea)return Ri;ea=1;var e=Object.keys||function(f){var u=[];for(var c in f)u.push(c);return u};Ri=o;var t=ql(),r=Ul();fr()(o,t);for(var n=e(r.prototype),i=0;i<n.length;i++){var s=n[i];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(f){if(!(this instanceof o))return new o(f);t.call(this,f),r.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||M.nextTick(l,this)}function l(f){f.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(u){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=u,this._writableState.destroyed=u)}}),Ri}var Ti={},on={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ta;function Wc(){return ta||(ta=1,function(e,t){var r=lr,n=r.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s);function s(o,a,l){return n(o,a,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=n(o);return a!==void 0?typeof l=="string"?f.fill(a,l):f.fill(a):f.fill(0),f},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(on,on.exports)),on.exports}var ra;function us(){if(ra)return Ti;ra=1;var e=Wc().Buffer,t=e.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(p){if(!p)return"utf8";for(var w;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(w)return;p=(""+p).toLowerCase(),w=!0}}function n(p){var w=r(p);if(typeof w!="string"&&(e.isEncoding===t||!t(p)))throw new Error("Unknown encoding: "+p);return w||p}Ti.StringDecoder=i;function i(p){this.encoding=n(p);var w;switch(this.encoding){case"utf16le":this.text=c,this.end=d,w=4;break;case"utf8":this.fillLast=l,w=4;break;case"base64":this.text=_,this.end=h,w=3;break;default:this.write=y,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}i.prototype.write=function(p){if(p.length===0)return"";var w,v;if(this.lastNeed){if(w=this.fillLast(p),w===void 0)return"";v=this.lastNeed,this.lastNeed=0}else v=0;return v<p.length?w?w+this.text(p,v):this.text(p,v):w||""},i.prototype.end=u,i.prototype.text=f,i.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function s(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function o(p,w,v){var E=w.length-1;if(E<v)return 0;var T=s(w[E]);return T>=0?(T>0&&(p.lastNeed=T-1),T):--E<v||T===-2?0:(T=s(w[E]),T>=0?(T>0&&(p.lastNeed=T-2),T):--E<v||T===-2?0:(T=s(w[E]),T>=0?(T>0&&(T===2?T=0:p.lastNeed=T-3),T):0))}function a(p,w,v){if((w[0]&192)!==128)return p.lastNeed=0,"�";if(p.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return p.lastNeed=1,"�";if(p.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return p.lastNeed=2,"�"}}function l(p){var w=this.lastTotal-this.lastNeed,v=a(this,p);if(v!==void 0)return v;if(this.lastNeed<=p.length)return p.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,w,0,p.length),this.lastNeed-=p.length}function f(p,w){var v=o(this,p,w);if(!this.lastNeed)return p.toString("utf8",w);this.lastTotal=v;var E=p.length-(v-this.lastNeed);return p.copy(this.lastChar,0,E),p.toString("utf8",w,E)}function u(p){var w=p&&p.length?this.write(p):"";return this.lastNeed?w+"�":w}function c(p,w){if((p.length-w)%2===0){var v=p.toString("utf16le",w);if(v){var E=v.charCodeAt(v.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],v.slice(0,-1)}return v}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",w,p.length-1)}function d(p){var w=p&&p.length?this.write(p):"";if(this.lastNeed){var v=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,v)}return w}function _(p,w){var v=(p.length-w)%3;return v===0?p.toString("base64",w):(this.lastNeed=3-v,this.lastTotal=3,v===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",w,p.length-v))}function h(p){var w=p&&p.length?this.write(p):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function y(p){return p.toString(this.encoding)}function b(p){return p&&p.length?this.write(p):""}return Ti}var xi,na;function Gs(){if(na)return xi;na=1;var e=ur().codes.ERR_STREAM_PREMATURE_CLOSE;function t(s){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];s.apply(this,l)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,o,a){if(typeof o=="function")return i(s,null,o);o||(o={}),a=t(a||r);var l=o.readable||o.readable!==!1&&s.readable,f=o.writable||o.writable!==!1&&s.writable,u=function(){s.writable||d()},c=s._writableState&&s._writableState.finished,d=function(){f=!1,c=!0,l||a.call(s)},_=s._readableState&&s._readableState.endEmitted,h=function(){l=!1,_=!0,f||a.call(s)},y=function(v){a.call(s,v)},b=function(){var v;if(l&&!_)return(!s._readableState||!s._readableState.ended)&&(v=new e),a.call(s,v);if(f&&!c)return(!s._writableState||!s._writableState.ended)&&(v=new e),a.call(s,v)},p=function(){s.req.on("finish",d)};return n(s)?(s.on("complete",d),s.on("abort",b),s.req?p():s.on("request",p)):f&&!s._writableState&&(s.on("end",u),s.on("close",u)),s.on("end",h),s.on("finish",d),o.error!==!1&&s.on("error",y),s.on("close",b),function(){s.removeListener("complete",d),s.removeListener("abort",b),s.removeListener("request",p),s.req&&s.req.removeListener("finish",d),s.removeListener("end",u),s.removeListener("close",u),s.removeListener("finish",d),s.removeListener("end",h),s.removeListener("error",y),s.removeListener("close",b)}}return xi=i,xi}var Ci,ia;function Vc(){if(ia)return Ci;ia=1;var e;function t(v,E,T){return E=r(E),E in v?Object.defineProperty(v,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):v[E]=T,v}function r(v){var E=n(v,"string");return typeof E=="symbol"?E:String(E)}function n(v,E){if(typeof v!="object"||v===null)return v;var T=v[Symbol.toPrimitive];if(T!==void 0){var x=T.call(v,E||"default");if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(v)}var i=Gs(),s=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),u=Symbol("handlePromise"),c=Symbol("stream");function d(v,E){return{value:v,done:E}}function _(v){var E=v[s];if(E!==null){var T=v[c].read();T!==null&&(v[f]=null,v[s]=null,v[o]=null,E(d(T,!1)))}}function h(v){M.nextTick(_,v)}function y(v,E){return function(T,x){v.then(function(){if(E[l]){T(d(void 0,!0));return}E[u](T,x)},x)}}var b=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((e={get stream(){return this[c]},next:function(){var E=this,T=this[a];if(T!==null)return Promise.reject(T);if(this[l])return Promise.resolve(d(void 0,!0));if(this[c].destroyed)return new Promise(function(A,P){M.nextTick(function(){E[a]?P(E[a]):A(d(void 0,!0))})});var x=this[f],C;if(x)C=new Promise(y(x,this));else{var k=this[c].read();if(k!==null)return Promise.resolve(d(k,!1));C=new Promise(this[u])}return this[f]=C,C}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var E=this;return new Promise(function(T,x){E[c].destroy(null,function(C){if(C){x(C);return}T(d(void 0,!0))})})}),e),b),w=function(E){var T,x=Object.create(p,(T={},t(T,c,{value:E,writable:!0}),t(T,s,{value:null,writable:!0}),t(T,o,{value:null,writable:!0}),t(T,a,{value:null,writable:!0}),t(T,l,{value:E._readableState.endEmitted,writable:!0}),t(T,u,{value:function(k,A){var P=x[c].read();P?(x[f]=null,x[s]=null,x[o]=null,k(d(P,!1))):(x[s]=k,x[o]=A)},writable:!0}),T));return x[f]=null,i(E,function(C){if(C&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=x[o];k!==null&&(x[f]=null,x[s]=null,x[o]=null,k(C)),x[a]=C;return}var A=x[s];A!==null&&(x[f]=null,x[s]=null,x[o]=null,A(d(void 0,!0))),x[l]=!0}),E.on("readable",h.bind(null,x)),x};return Ci=w,Ci}var ki,sa;function Zc(){return sa||(sa=1,ki=function(){throw new Error("Readable.from is not available in the browser")}),ki}var Oi,oa;function ql(){if(oa)return Oi;oa=1,Oi=A;var e;A.ReadableState=k,Ml.EventEmitter;var t=function(m,O){return m.listeners(O).length},r=Il(),n=lr.Buffer,i=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(g){return n.from(g)}function o(g){return n.isBuffer(g)||g instanceof i}var a=Pl,l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var f=zc(),u=Bl(),c=Fl(),d=c.getHighWaterMark,_=ur().codes,h=_.ERR_INVALID_ARG_TYPE,y=_.ERR_STREAM_PUSH_AFTER_EOF,b=_.ERR_METHOD_NOT_IMPLEMENTED,p=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,w,v,E;fr()(A,r);var T=u.errorOrDestroy,x=["error","close","destroy","pause","resume"];function C(g,m,O){if(typeof g.prependListener=="function")return g.prependListener(m,O);!g._events||!g._events[m]?g.on(m,O):Array.isArray(g._events[m])?g._events[m].unshift(O):g._events[m]=[O,g._events[m]]}function k(g,m,O){e=e||or(),g=g||{},typeof O!="boolean"&&(O=m instanceof e),this.objectMode=!!g.objectMode,O&&(this.objectMode=this.objectMode||!!g.readableObjectMode),this.highWaterMark=d(this,g,"readableHighWaterMark",O),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=g.emitClose!==!1,this.autoDestroy=!!g.autoDestroy,this.destroyed=!1,this.defaultEncoding=g.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,g.encoding&&(w||(w=us().StringDecoder),this.decoder=new w(g.encoding),this.encoding=g.encoding)}function A(g){if(e=e||or(),!(this instanceof A))return new A(g);var m=this instanceof e;this._readableState=new k(g,this,m),this.readable=!0,g&&(typeof g.read=="function"&&(this._read=g.read),typeof g.destroy=="function"&&(this._destroy=g.destroy)),r.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){this._readableState&&(this._readableState.destroyed=m)}}),A.prototype.destroy=u.destroy,A.prototype._undestroy=u.undestroy,A.prototype._destroy=function(g,m){m(g)},A.prototype.push=function(g,m){var O=this._readableState,I;return O.objectMode?I=!0:typeof g=="string"&&(m=m||O.defaultEncoding,m!==O.encoding&&(g=n.from(g,m),m=""),I=!0),P(this,g,m,!1,I)},A.prototype.unshift=function(g){return P(this,g,null,!0,!1)};function P(g,m,O,I,re){l("readableAddChunk",m);var H=g._readableState;if(m===null)H.reading=!1,z(g,H);else{var X;if(re||(X=B(H,m)),X)T(g,X);else if(H.objectMode||m&&m.length>0)if(typeof m!="string"&&!H.objectMode&&Object.getPrototypeOf(m)!==n.prototype&&(m=s(m)),I)H.endEmitted?T(g,new p):D(g,H,m,!0);else if(H.ended)T(g,new y);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!O?(m=H.decoder.write(m),H.objectMode||m.length!==0?D(g,H,m,!1):Ee(g,H)):D(g,H,m,!1)}else I||(H.reading=!1,Ee(g,H))}return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function D(g,m,O,I){m.flowing&&m.length===0&&!m.sync?(m.awaitDrain=0,g.emit("data",O)):(m.length+=m.objectMode?1:O.length,I?m.buffer.unshift(O):m.buffer.push(O),m.needReadable&&J(g)),Ee(g,m)}function B(g,m){var O;return!o(m)&&typeof m!="string"&&m!==void 0&&!g.objectMode&&(O=new h("chunk",["string","Buffer","Uint8Array"],m)),O}A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(g){w||(w=us().StringDecoder);var m=new w(g);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;for(var O=this._readableState.buffer.head,I="";O!==null;)I+=m.write(O.data),O=O.next;return this._readableState.buffer.clear(),I!==""&&this._readableState.buffer.push(I),this._readableState.length=I.length,this};var U=1073741824;function G(g){return g>=U?g=U:(g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++),g}function ne(g,m){return g<=0||m.length===0&&m.ended?0:m.objectMode?1:g!==g?m.flowing&&m.length?m.buffer.head.data.length:m.length:(g>m.highWaterMark&&(m.highWaterMark=G(g)),g<=m.length?g:m.ended?m.length:(m.needReadable=!0,0))}A.prototype.read=function(g){l("read",g),g=parseInt(g,10);var m=this._readableState,O=g;if(g!==0&&(m.emittedReadable=!1),g===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return l("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?N(this):J(this),null;if(g=ne(g,m),g===0&&m.ended)return m.length===0&&N(this),null;var I=m.needReadable;l("need readable",I),(m.length===0||m.length-g<m.highWaterMark)&&(I=!0,l("length less than watermark",I)),m.ended||m.reading?(I=!1,l("reading or ended",I)):I&&(l("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0),this._read(m.highWaterMark),m.sync=!1,m.reading||(g=ne(O,m)));var re;return g>0?re=S(g,m):re=null,re===null?(m.needReadable=m.length<=m.highWaterMark,g=0):(m.length-=g,m.awaitDrain=0),m.length===0&&(m.ended||(m.needReadable=!0),O!==g&&m.ended&&N(this)),re!==null&&this.emit("data",re),re};function z(g,m){if(l("onEofChunk"),!m.ended){if(m.decoder){var O=m.decoder.end();O&&O.length&&(m.buffer.push(O),m.length+=m.objectMode?1:O.length)}m.ended=!0,m.sync?J(g):(m.needReadable=!1,m.emittedReadable||(m.emittedReadable=!0,Ce(g)))}}function J(g){var m=g._readableState;l("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(l("emitReadable",m.flowing),m.emittedReadable=!0,M.nextTick(Ce,g))}function Ce(g){var m=g._readableState;l("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&(m.length||m.ended)&&(g.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,R(g)}function Ee(g,m){m.readingMore||(m.readingMore=!0,M.nextTick(Xe,g,m))}function Xe(g,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){var O=m.length;if(l("maybeReadMore read 0"),g.read(0),O===m.length)break}m.readingMore=!1}A.prototype._read=function(g){T(this,new b("_read()"))},A.prototype.pipe=function(g,m){var O=this,I=this._readableState;switch(I.pipesCount){case 0:I.pipes=g;break;case 1:I.pipes=[I.pipes,g];break;default:I.pipes.push(g);break}I.pipesCount+=1,l("pipe count=%d opts=%j",I.pipesCount,m);var re=(!m||m.end!==!1)&&g!==M.stdout&&g!==M.stderr,H=re?$t:_r;I.endEmitted?M.nextTick(H):O.once("end",H),g.on("unpipe",X);function X(zt,Ht){l("onunpipe"),zt===O&&Ht&&Ht.hasUnpiped===!1&&(Ht.hasUnpiped=!0,fh())}function $t(){l("onend"),g.end()}var Gr=se(O);g.on("drain",Gr);var _o=!1;function fh(){l("cleanup"),g.removeListener("close",Xn),g.removeListener("finish",Jn),g.removeListener("drain",Gr),g.removeListener("error",Kn),g.removeListener("unpipe",X),O.removeListener("end",$t),O.removeListener("end",_r),O.removeListener("data",go),_o=!0,I.awaitDrain&&(!g._writableState||g._writableState.needDrain)&&Gr()}O.on("data",go);function go(zt){l("ondata");var Ht=g.write(zt);l("dest.write",Ht),Ht===!1&&((I.pipesCount===1&&I.pipes===g||I.pipesCount>1&&W(I.pipes,g)!==-1)&&!_o&&(l("false write response, pause",I.awaitDrain),I.awaitDrain++),O.pause())}function Kn(zt){l("onerror",zt),_r(),g.removeListener("error",Kn),t(g,"error")===0&&T(g,zt)}C(g,"error",Kn);function Xn(){g.removeListener("finish",Jn),_r()}g.once("close",Xn);function Jn(){l("onfinish"),g.removeListener("close",Xn),_r()}g.once("finish",Jn);function _r(){l("unpipe"),O.unpipe(g)}return g.emit("pipe",O),I.flowing||(l("pipe resume"),O.resume()),g};function se(g){return function(){var O=g._readableState;l("pipeOnDrain",O.awaitDrain),O.awaitDrain&&O.awaitDrain--,O.awaitDrain===0&&t(g,"data")&&(O.flowing=!0,R(g))}}A.prototype.unpipe=function(g){var m=this._readableState,O={hasUnpiped:!1};if(m.pipesCount===0)return this;if(m.pipesCount===1)return g&&g!==m.pipes?this:(g||(g=m.pipes),m.pipes=null,m.pipesCount=0,m.flowing=!1,g&&g.emit("unpipe",this,O),this);if(!g){var I=m.pipes,re=m.pipesCount;m.pipes=null,m.pipesCount=0,m.flowing=!1;for(var H=0;H<re;H++)I[H].emit("unpipe",this,{hasUnpiped:!1});return this}var X=W(m.pipes,g);return X===-1?this:(m.pipes.splice(X,1),m.pipesCount-=1,m.pipesCount===1&&(m.pipes=m.pipes[0]),g.emit("unpipe",this,O),this)},A.prototype.on=function(g,m){var O=r.prototype.on.call(this,g,m),I=this._readableState;return g==="data"?(I.readableListening=this.listenerCount("readable")>0,I.flowing!==!1&&this.resume()):g==="readable"&&!I.endEmitted&&!I.readableListening&&(I.readableListening=I.needReadable=!0,I.flowing=!1,I.emittedReadable=!1,l("on readable",I.length,I.reading),I.length?J(this):I.reading||M.nextTick(he,this)),O},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(g,m){var O=r.prototype.removeListener.call(this,g,m);return g==="readable"&&M.nextTick(me,this),O},A.prototype.removeAllListeners=function(g){var m=r.prototype.removeAllListeners.apply(this,arguments);return(g==="readable"||g===void 0)&&M.nextTick(me,this),m};function me(g){var m=g._readableState;m.readableListening=g.listenerCount("readable")>0,m.resumeScheduled&&!m.paused?m.flowing=!0:g.listenerCount("data")>0&&g.resume()}function he(g){l("readable nexttick read 0"),g.read(0)}A.prototype.resume=function(){var g=this._readableState;return g.flowing||(l("resume"),g.flowing=!g.readableListening,Le(this,g)),g.paused=!1,this};function Le(g,m){m.resumeScheduled||(m.resumeScheduled=!0,M.nextTick(jt,g,m))}function jt(g,m){l("resume",m.reading),m.reading||g.read(0),m.resumeScheduled=!1,g.emit("resume"),R(g),m.flowing&&!m.reading&&g.read(0)}A.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function R(g){var m=g._readableState;for(l("flow",m.flowing);m.flowing&&g.read()!==null;);}A.prototype.wrap=function(g){var m=this,O=this._readableState,I=!1;g.on("end",function(){if(l("wrapped end"),O.decoder&&!O.ended){var X=O.decoder.end();X&&X.length&&m.push(X)}m.push(null)}),g.on("data",function(X){if(l("wrapped data"),O.decoder&&(X=O.decoder.write(X)),!(O.objectMode&&X==null)&&!(!O.objectMode&&(!X||!X.length))){var $t=m.push(X);$t||(I=!0,g.pause())}});for(var re in g)this[re]===void 0&&typeof g[re]=="function"&&(this[re]=function($t){return function(){return g[$t].apply(g,arguments)}}(re));for(var H=0;H<x.length;H++)g.on(x[H],this.emit.bind(this,x[H]));return this._read=function(X){l("wrapped _read",X),I&&(I=!1,g.resume())},this},typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return v===void 0&&(v=Vc()),v(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(m){this._readableState&&(this._readableState.flowing=m)}}),A._fromList=S,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function S(g,m){if(m.length===0)return null;var O;return m.objectMode?O=m.buffer.shift():!g||g>=m.length?(m.decoder?O=m.buffer.join(""):m.buffer.length===1?O=m.buffer.first():O=m.buffer.concat(m.length),m.buffer.clear()):O=m.buffer.consume(g,m.decoder),O}function N(g){var m=g._readableState;l("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,M.nextTick(q,m,g))}function q(g,m){if(l("endReadableNT",g.endEmitted,g.length),!g.endEmitted&&g.length===0&&(g.endEmitted=!0,m.readable=!1,m.emit("end"),g.autoDestroy)){var O=m._writableState;(!O||O.autoDestroy&&O.finished)&&m.destroy()}}typeof Symbol=="function"&&(A.from=function(g,m){return E===void 0&&(E=Zc()),E(A,g,m)});function W(g,m){for(var O=0,I=g.length;O<I;O++)if(g[O]===m)return O;return-1}return Oi}var Ai,aa;function jl(){if(aa)return Ai;aa=1,Ai=a;var e=ur().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,s=or();fr()(a,s);function o(u,c){var d=this._transformState;d.transforming=!1;var _=d.writecb;if(_===null)return this.emit("error",new r);d.writechunk=null,d.writecb=null,c!=null&&this.push(c),_(u);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function a(u){if(!(this instanceof a))return new a(u);s.call(this,u),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function l(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(c,d){f(u,c,d)}):f(this,null,null)}a.prototype.push=function(u,c){return this._transformState.needTransform=!1,s.prototype.push.call(this,u,c)},a.prototype._transform=function(u,c,d){d(new t("_transform()"))},a.prototype._write=function(u,c,d){var _=this._transformState;if(_.writecb=d,_.writechunk=u,_.writeencoding=c,!_.transforming){var h=this._readableState;(_.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},a.prototype._read=function(u){var c=this._transformState;c.writechunk!==null&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},a.prototype._destroy=function(u,c){s.prototype._destroy.call(this,u,function(d){c(d)})};function f(u,c,d){if(c)return u.emit("error",c);if(d!=null&&u.push(d),u._writableState.length)throw new i;if(u._transformState.transforming)throw new n;return u.push(null)}return Ai}var Ni,fa;function Gc(){if(fa)return Ni;fa=1,Ni=t;var e=jl();fr()(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,n,i){i(null,r)},Ni}var Li,la;function Yc(){if(la)return Li;la=1;var e;function t(d){var _=!1;return function(){_||(_=!0,d.apply(void 0,arguments))}}var r=ur().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(d){if(d)throw d}function o(d){return d.setHeader&&typeof d.abort=="function"}function a(d,_,h,y){y=t(y);var b=!1;d.on("close",function(){b=!0}),e===void 0&&(e=Gs()),e(d,{readable:_,writable:h},function(w){if(w)return y(w);b=!0,y()});var p=!1;return function(w){if(!b&&!p){if(p=!0,o(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();y(w||new i("pipe"))}}}function l(d){d()}function f(d,_){return d.pipe(_)}function u(d){return!d.length||typeof d[d.length-1]!="function"?s:d.pop()}function c(){for(var d=arguments.length,_=new Array(d),h=0;h<d;h++)_[h]=arguments[h];var y=u(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new n("streams");var b,p=_.map(function(w,v){var E=v<_.length-1,T=v>0;return a(w,E,T,function(x){b||(b=x),x&&p.forEach(l),!E&&(p.forEach(l),y(b))})});return _.reduce(f)}return Li=c,Li}var ua;function Kc(){return ua||(ua=1,function(e,t){t=e.exports=ql(),t.Stream=t,t.Readable=t,t.Writable=Ul(),t.Duplex=or(),t.Transform=jl(),t.PassThrough=Gc(),t.finished=Gs(),t.pipeline=Yc()}(sn,sn.exports)),sn.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Di,ha;function Xc(){if(ha)return Di;ha=1;let e;return Di=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(e||(e=Promise.resolve())).then(t).catch(r=>setTimeout(()=>{throw r},0)),Di}var Mi,ca;function Jc(){if(ca)return Mi;ca=1;function e(r,n){for(const i in n)Object.defineProperty(r,i,{value:n[i],enumerable:!0,configurable:!0});return r}function t(r,n,i){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof n=="object"&&(i=n,n=""),n&&(i.code=n);try{return e(r,i)}catch{i.message=r.message,i.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),e(new o,i)}}return Mi=t,Mi}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ii,da;function Qc(){if(da)return Ii;da=1;const e=Oc()("simple-peer"),t=Ac(),r=Lc(),n=Kc(),i=Xc(),s=Jc(),{Buffer:o}=lr,a=64*1024,l=5*1e3,f=5*1e3;function u(_){return _.replace(/a=ice-options:trickle\s\n/g,"")}function c(_){console.warn(_)}class d extends n.Duplex{constructor(h){if(h=Object.assign({allowHalfOpen:!1},h),super(h),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",h),this.channelName=h.initiator?h.channelName||r(20).toString("hex"):null,this.initiator=h.initiator||!1,this.channelConfig=h.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,h.config),this.offerOptions=h.offerOptions||{},this.answerOptions=h.answerOptions||{},this.sdpTransform=h.sdpTransform||(y=>y),this.streams=h.streams||(h.stream?[h.stream]:[]),this.trickle=h.trickle!==void 0?h.trickle:!0,this.allowHalfTrickle=h.allowHalfTrickle!==void 0?h.allowHalfTrickle:!1,this.iceCompleteTimeout=h.iceCompleteTimeout||l,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=h.wrtc&&typeof h.wrtc=="object"?h.wrtc:t(),!this._wrtc)throw s(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(y){this.destroy(s(y,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=y=>{this._onIceCandidate(y)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(y=>{this.destroy(s(y,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=y=>{this._setupData(y)},this.streams&&this.streams.forEach(y=>{this.addStream(y)}),this._pc.ontrack=y=>{this._onTrack(y)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(h){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof h=="string")try{h=JSON.parse(h)}catch{h={}}this._debug("signal()"),h.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),h.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(h.transceiverRequest.kind,h.transceiverRequest.init)),h.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(h.candidate):this._pendingCandidates.push(h.candidate)),h.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(h)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(y=>{this._addIceCandidate(y)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(y=>{this.destroy(s(y,"ERR_SET_REMOTE_DESCRIPTION"))}),!h.sdp&&!h.candidate&&!h.renegotiate&&!h.transceiverRequest&&this.destroy(s(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(h){const y=new this._wrtc.RTCIceCandidate(h);this._pc.addIceCandidate(y).catch(b=>{!y.address||y.address.endsWith(".local")?c("Ignoring unsupported ICE candidate."):this.destroy(s(b,"ERR_ADD_ICE_CANDIDATE"))})}send(h){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(h)}}addTransceiver(h,y){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(h,y),this._needsNegotiation()}catch(b){this.destroy(s(b,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:h,init:y}})}}addStream(h){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),h.getTracks().forEach(y=>{this.addTrack(y,h)})}}addTrack(h,y){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const b=this._senderMap.get(h)||new Map;let p=b.get(y);if(!p)p=this._pc.addTrack(h,y),b.set(y,p),this._senderMap.set(h,b),this._needsNegotiation();else throw p.removed?s(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):s(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(h,y,b){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const p=this._senderMap.get(h),w=p?p.get(b):null;if(!w)throw s(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");y&&this._senderMap.set(y,p),w.replaceTrack!=null?w.replaceTrack(y):this.destroy(s(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(h,y){if(this.destroying)return;if(this.destroyed)throw s(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const b=this._senderMap.get(h),p=b?b.get(y):null;if(!p)throw s(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{p.removed=!0,this._pc.removeTrack(p)}catch(w){w.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(p):this.destroy(s(w,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(h){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),h.getTracks().forEach(y=>{this.removeTrack(y,h)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,i(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw s(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(h){this._destroy(h,()=>{})}_destroy(h,y){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",h&&(h.message||h)),i(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",h&&(h.message||h)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,h&&this.emit("error",h),this.emit("close"),y()}))}_setupData(h){if(!h.channel)return this.destroy(s(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=h.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=a),this.channelName=this._channel.label,this._channel.onmessage=b=>{this._onChannelMessage(b)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=b=>{const p=b.error instanceof Error?b.error:new Error(`Datachannel error: ${b.message} ${b.filename}:${b.lineno}:${b.colno}`);this.destroy(s(p,"ERR_DATA_CHANNEL"))};let y=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(y&&this._onChannelClose(),y=!0):y=!1},f)}_read(){}_write(h,y,b){if(this.destroyed)return b(s(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(h)}catch(p){return this.destroy(s(p,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>a?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=b):b(null)}else this._debug("write before connect"),this._chunk=h,this._cb=b}_onFinish(){if(this.destroyed)return;const h=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?h():this.once("connect",h)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(h=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(h.sdp=u(h.sdp)),h.sdp=this.sdpTransform(h.sdp);const y=()=>{if(this.destroyed)return;const w=this._pc.localDescription||h;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp})},b=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?y():this.once("_iceComplete",y))},p=w=>{this.destroy(s(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(h).then(b).catch(p)}).catch(h=>{this.destroy(s(h,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(h=>{!h.mid&&h.sender.track&&!h.requested&&(h.requested=!0,this.addTransceiver(h.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(h=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(h.sdp=u(h.sdp)),h.sdp=this.sdpTransform(h.sdp);const y=()=>{if(this.destroyed)return;const w=this._pc.localDescription||h;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp}),this.initiator||this._requestMissingTransceivers()},b=()=>{this.destroyed||(this.trickle||this._iceComplete?y():this.once("_iceComplete",y))},p=w=>{this.destroy(s(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(h).then(b).catch(p)}).catch(h=>{this.destroy(s(h,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(s(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const h=this._pc.iceConnectionState,y=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",h,y),this.emit("iceStateChange",h,y),(h==="connected"||h==="completed")&&(this._pcReady=!0,this._maybeReady()),h==="failed"&&this.destroy(s(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),h==="closed"&&this.destroy(s(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(h){const y=b=>(Object.prototype.toString.call(b.values)==="[object Array]"&&b.values.forEach(p=>{Object.assign(b,p)}),b);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(b=>{const p=[];b.forEach(w=>{p.push(y(w))}),h(null,p)},b=>h(b)):this._pc.getStats.length>0?this._pc.getStats(b=>{if(this.destroyed)return;const p=[];b.result().forEach(w=>{const v={};w.names().forEach(E=>{v[E]=w.stat(E)}),v.id=w.id,v.type=w.type,v.timestamp=w.timestamp,p.push(y(v))}),h(null,p)},b=>h(b)):h(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const h=()=>{this.destroyed||this.getStats((y,b)=>{if(this.destroyed)return;y&&(b=[]);const p={},w={},v={};let E=!1;b.forEach(x=>{(x.type==="remotecandidate"||x.type==="remote-candidate")&&(p[x.id]=x),(x.type==="localcandidate"||x.type==="local-candidate")&&(w[x.id]=x),(x.type==="candidatepair"||x.type==="candidate-pair")&&(v[x.id]=x)});const T=x=>{E=!0;let C=w[x.localCandidateId];C&&(C.ip||C.address)?(this.localAddress=C.ip||C.address,this.localPort=Number(C.port)):C&&C.ipAddress?(this.localAddress=C.ipAddress,this.localPort=Number(C.portNumber)):typeof x.googLocalAddress=="string"&&(C=x.googLocalAddress.split(":"),this.localAddress=C[0],this.localPort=Number(C[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let k=p[x.remoteCandidateId];k&&(k.ip||k.address)?(this.remoteAddress=k.ip||k.address,this.remotePort=Number(k.port)):k&&k.ipAddress?(this.remoteAddress=k.ipAddress,this.remotePort=Number(k.portNumber)):typeof x.googRemoteAddress=="string"&&(k=x.googRemoteAddress.split(":"),this.remoteAddress=k[0],this.remotePort=Number(k[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(b.forEach(x=>{x.type==="transport"&&x.selectedCandidatePairId&&T(v[x.selectedCandidatePairId]),(x.type==="googCandidatePair"&&x.googActiveConnection==="true"||(x.type==="candidatepair"||x.type==="candidate-pair")&&x.selected)&&T(x)}),!E&&(!Object.keys(v).length||Object.keys(w).length)){setTimeout(h,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(C){return this.destroy(s(C,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const x=this._cb;this._cb=null,x(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};h()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>a||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(h=>{this._pc.removeTrack(h),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(h){this.destroyed||(h.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:h.candidate.candidate,sdpMLineIndex:h.candidate.sdpMLineIndex,sdpMid:h.candidate.sdpMid}}):!h.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),h.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(h){if(this.destroyed)return;let y=h.data;y instanceof ArrayBuffer&&(y=o.from(y)),this.push(y)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const h=this._cb;this._cb=null,h(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(h){this.destroyed||h.streams.forEach(y=>{this._debug("on track"),this.emit("track",h.track,y),this._remoteTracks.push({track:h.track,stream:y}),!this._remoteStreams.some(b=>b.id===y.id)&&(this._remoteStreams.push(y),i(()=>{this._debug("on stream"),this.emit("stream",y)}))})}_debug(){const h=[].slice.call(arguments);h[0]="["+this._id+"] "+h[0],e.apply(null,h)}}return d.WEBRTC_SUPPORT=!!t(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:globalThis.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},Ii=d,Ii}var pa;function ed(){if(pa)return Wt.exports;pa=1;const e=sc(),t=fr(),r=xc(),n=Qc();t(o,r);const i="ERR_CONNECTION_TIMEOUT",s="ERR_PREMATURE_CLOSE";function o(a,l={}){if(!(this instanceof o))return new o(a);r.call(this);const{connectionTimeout:f=10*1e3}=l;this.id=null,this.socket=a,this._connectionTimeout=f,this._peers={},this._sessionQueues={},this._timers=new Map,this.socket.on("simple-signal[discover]",this._onDiscover.bind(this)),this.socket.on("simple-signal[offer]",this._onOffer.bind(this)),this.socket.on("simple-signal[signal]",this._onSignal.bind(this)),this.socket.on("simple-signal[reject]",this._onReject.bind(this))}return o.prototype._onDiscover=function(a){this.id=a.id,this.emit("discover",a.discoveryData)},o.prototype._onOffer=function({initiator:a,metadata:l,sessionId:f,signal:u}){this._sessionQueues[f]=[u];const c={initiator:a,metadata:l,sessionId:f};c.accept=this._accept.bind(this,c),c.reject=this._reject.bind(this,c),this.emit("request",c)},o.prototype._accept=function(a,l={},f={}){f.initiator=!1;const u=this._peers[a.sessionId]=new n(f);return u.on("signal",c=>{this.socket.emit("simple-signal[signal]",{signal:c,metadata:l,sessionId:a.sessionId,target:a.initiator})}),u.once("close",()=>{this._closePeer(a.sessionId)}),this._sessionQueues[a.sessionId].forEach(c=>{u.signal(c)}),delete this._sessionQueues[a.sessionId],new Promise((c,d)=>{this._onSafeConnect(u,()=>{this._clearTimer(a.sessionId),c({peer:u,metadata:a.metadata})}),u.once("close",()=>{d({metadata:{code:s}})}),this._startTimer(a.sessionId,_=>{d({metadata:_}),this._closePeer(a.sessionId)})})},o.prototype._reject=function(a,l={}){delete this._sessionQueues[a.sessionId],this._clearTimer(a.sessionId),this.socket.emit("simple-signal[reject]",{metadata:l,sessionId:a.sessionId,target:a.initiator})},o.prototype._onReject=function({sessionId:a,metadata:l}){const f=this._peers[a];f&&f.reject(l)},o.prototype._onSignal=function({sessionId:a,signal:l,metadata:f}){const u=this._peers[a];u?(u.signal(l),f!==void 0&&u.resolveMetadata&&u.resolveMetadata(f)):(this._sessionQueues[a]=this._sessionQueues[a]||[],this._sessionQueues[a].push(l))},o.prototype.connect=function(a,l={},f={}){if(!this.id)throw new Error("Must complete discovery first.");f.initiator=!0;const u=e();var c=!0;const d=this._peers[u]=new n(f);return d.once("close",()=>{this._closePeer(u)}),d.on("signal",_=>{const h=_.sdp&&c?"simple-signal[offer]":"simple-signal[signal]";_.sdp&&(c=!1),this.socket.emit(h,{signal:_,metadata:l,sessionId:u,target:a})}),new Promise((_,h)=>{d.resolveMetadata=y=>{d.resolveMetadata=null,this._onSafeConnect(d,()=>{this._clearTimer(u),_({peer:d,metadata:y})})},d.reject=y=>{h({metadata:y}),this._closePeer(u)},d.once("close",()=>{h({metadata:{code:s}})}),this._startTimer(u,y=>d.reject(y))})},o.prototype._onSafeConnect=function(a,l){const f=[];function u(d){f.push({name:"stream",args:[d]})}function c(d,_){f.push({name:"track",args:[d,_]})}a.on("stream",u),a.on("track",c),a.once("connect",()=>{setTimeout(()=>{a.emit("connect"),setTimeout(()=>{f.forEach(({name:d,args:_})=>{a.emit(d,..._)})},0)},0),a.removeListener("stream",u),a.removeListener("track",c),l(a)})},o.prototype._closePeer=function(a){const l=this._peers[a];this._clearTimer(a),delete this._peers[a],l&&l.destroy()},o.prototype._startTimer=function(a,l){if(this._connectionTimeout!==-1){const f=setTimeout(()=>{this._clearTimer(a),l({code:i})},this._connectionTimeout);this._timers.set(a,f)}},o.prototype._clearTimer=function(a){this._timers.has(a)&&(clearTimeout(this._timers.get(a)),this._timers.delete(a))},o.prototype.discover=function(a={}){this.socket.emit("simple-signal[discover]",a)},o.prototype.peers=function(){return Object.values(this._peers)},o.prototype.destroy=function(){this.socket.close(),this.peers().forEach(a=>a.destroy()),this.id=null,this.socket=null,this._peers=null,this._sessionQueues=null},Wt.exports=o,Wt.exports.SimplePeer=n,Wt.exports.ERR_CONNECTION_TIMEOUT=i,Wt.exports.ERR_PREMATURE_CLOSE=s,Wt.exports}/*! https://mths.be/punycode v1.4.1 by @mathias */var Pi=2147483647,Cr=36,$l=1,hs=26,td=38,rd=700,nd=72,id=128,sd="-",od=/[^\x20-\x7E]/,ad=/[\x2E\u3002\uFF0E\uFF61]/g,fd={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Bi=Cr-$l,Xt=Math.floor,Fi=String.fromCharCode;function _a(e){throw new RangeError(fd[e])}function ld(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function ud(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(ad,".");var i=e.split("."),s=ld(i,t).join(".");return n+s}function hd(e){for(var t=[],r=0,n=e.length,i,s;r<n;)i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<n?(s=e.charCodeAt(r++),(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),r--)):t.push(i);return t}function ga(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function cd(e,t,r){var n=0;for(e=r?Xt(e/rd):e>>1,e+=Xt(e/t);e>Bi*hs>>1;n+=Cr)e=Xt(e/Bi);return Xt(n+(Bi+1)*e/(e+td))}function dd(e){var t,r,n,i,s,o,a,l,f,u,c,d=[],_,h,y,b;for(e=hd(e),_=e.length,t=id,r=0,s=nd,o=0;o<_;++o)c=e[o],c<128&&d.push(Fi(c));for(n=i=d.length,i&&d.push(sd);n<_;){for(a=Pi,o=0;o<_;++o)c=e[o],c>=t&&c<a&&(a=c);for(h=n+1,a-t>Xt((Pi-r)/h)&&_a("overflow"),r+=(a-t)*h,t=a,o=0;o<_;++o)if(c=e[o],c<t&&++r>Pi&&_a("overflow"),c==t){for(l=r,f=Cr;u=f<=s?$l:f>=s+hs?hs:f-s,!(l<u);f+=Cr)b=l-u,y=Cr-u,d.push(Fi(ga(u+b%y,0))),l=Xt(b/y);d.push(Fi(ga(l,0))),s=cd(r,h,n==i),r=0,++n}++r,++t}return d.join("")}function pd(e){return ud(e,function(t){return od.test(t)?"xn--"+dd(t):t})}function _d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var zl=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function gr(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function gd(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?va(vd(e),function(i){var s=encodeURIComponent(gr(i))+r;return zl(e[i])?va(e[i],function(o){return s+encodeURIComponent(gr(o))}).join(t):s+encodeURIComponent(gr(e[i]))}).join(t):n?encodeURIComponent(gr(n))+r+encodeURIComponent(gr(e)):""}function va(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var vd=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function ma(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var f=e[l].replace(s,"%20"),u=f.indexOf(r),c,d,_,h;u>=0?(c=f.substr(0,u),d=f.substr(u+1)):(c=f,d=""),_=decodeURIComponent(c),h=decodeURIComponent(d),_d(i,_)?zl(i[_])?i[_].push(h):i[_]=[i[_],h]:i[_]=h}return i}const cs={parse:zr,resolve:Cd,resolveObject:kd,format:xd,Url:Be};function Be(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var md=/^([a-z0-9.+-]+:)/i,yd=/:[0-9]*$/,bd=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,wd=["<",">",'"',"`"," ","\r",`
`,"	"],Ed=["{","}","|","\\","^","`"].concat(wd),ds=["'"].concat(Ed),ya=["%","/","?",";","#"].concat(ds),ba=["/","?","#"],Sd=255,wa=/^[+a-z0-9A-Z_-]{0,63}$/,Rd=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Td={javascript:!0,"javascript:":!0},ps={javascript:!0,"javascript:":!0},rr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function zr(e,t,r){if(e&&Ye(e)&&e instanceof Be)return e;var n=new Be;return n.parse(e,t,r),n}Be.prototype.parse=function(e,t,r){return Hl(this,e,t,r)};function Hl(e,t,r,n){if(!pt(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=i!==-1&&i<t.indexOf("#")?"?":"#",o=t.split(s),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(s);var l=t;if(l=l.trim(),!n&&t.split("#").length===1){var f=bd.exec(l);if(f)return e.path=l,e.href=l,e.pathname=f[1],f[2]?(e.search=f[2],r?e.query=ma(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var u=md.exec(l);if(u){u=u[0];var c=u.toLowerCase();e.protocol=c,l=l.substr(u.length)}if(n||u||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var d=l.substr(0,2)==="//";d&&!(u&&ps[u])&&(l=l.substr(2),e.slashes=!0)}var _,h,y,b;if(!ps[u]&&(d||u&&!rr[u])){var p=-1;for(_=0;_<ba.length;_++)h=l.indexOf(ba[_]),h!==-1&&(p===-1||h<p)&&(p=h);var w,v;for(p===-1?v=l.lastIndexOf("@"):v=l.lastIndexOf("@",p),v!==-1&&(w=l.slice(0,v),l=l.slice(v+1),e.auth=decodeURIComponent(w)),p=-1,_=0;_<ya.length;_++)h=l.indexOf(ya[_]),h!==-1&&(p===-1||h<p)&&(p=h);p===-1&&(p=l.length),e.host=l.slice(0,p),l=l.slice(p),Wl(e),e.hostname=e.hostname||"";var E=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!E){var T=e.hostname.split(/\./);for(_=0,y=T.length;_<y;_++){var x=T[_];if(x&&!x.match(wa)){for(var C="",k=0,A=x.length;k<A;k++)x.charCodeAt(k)>127?C+="x":C+=x[k];if(!C.match(wa)){var P=T.slice(0,_),D=T.slice(_+1),B=x.match(Rd);B&&(P.push(B[1]),D.unshift(B[2])),D.length&&(l="/"+D.join(".")+l),e.hostname=P.join(".");break}}}}e.hostname.length>Sd?e.hostname="":e.hostname=e.hostname.toLowerCase(),E||(e.hostname=pd(e.hostname)),b=e.port?":"+e.port:"";var U=e.hostname||"";e.host=U+b,e.href+=e.host,E&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!Td[c])for(_=0,y=ds.length;_<y;_++){var G=ds[_];if(l.indexOf(G)!==-1){var ne=encodeURIComponent(G);ne===G&&(ne=escape(G)),l=l.split(G).join(ne)}}var z=l.indexOf("#");z!==-1&&(e.hash=l.substr(z),l=l.slice(0,z));var J=l.indexOf("?");if(J!==-1?(e.search=l.substr(J),e.query=l.substr(J+1),r&&(e.query=ma(e.query)),l=l.slice(0,J)):r&&(e.search="",e.query={}),l&&(e.pathname=l),rr[c]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){b=e.pathname||"";var Ce=e.search||"";e.path=b+Ce}return e.href=Ys(e),e}function xd(e){return pt(e)&&(e=Hl({},e)),Ys(e)}function Ys(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",s=!1,o="";e.host?s=t+e.host:e.hostname&&(s=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(s+=":"+e.port)),e.query&&Ye(e.query)&&Object.keys(e.query).length&&(o=gd(e.query));var a=e.search||o&&"?"+o||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||rr[r])&&s!==!1?(s="//"+(s||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),a=a.replace("#","%23"),r+s+n+a+i}Be.prototype.format=function(){return Ys(this)};function Cd(e,t){return zr(e,!1,!0).resolve(t)}Be.prototype.resolve=function(e){return this.resolveObject(zr(e,!1,!0)).format()};function kd(e,t){return e?zr(e,!1,!0).resolveObject(t):t}Be.prototype.resolveObject=function(e){if(pt(e)){var t=new Be;t.parse(e,!1,!0),e=t}for(var r=new Be,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=e[l])}return rr[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var f;if(e.protocol&&e.protocol!==r.protocol){if(!rr[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!ps[e.protocol]){for(f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),f[0]!==""&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var _=r.pathname||"",h=r.search||"";r.path=_+h}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&r.pathname.charAt(0)==="/",b=e.host||e.pathname&&e.pathname.charAt(0)==="/",p=b||y||r.host&&e.pathname,w=p,v=r.pathname&&r.pathname.split("/")||[],E=r.protocol&&!rr[r.protocol];f=e.pathname&&e.pathname.split("/")||[],E&&(r.hostname="",r.port=null,r.host&&(v[0]===""?v[0]=r.host:v.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(f[0]===""?f[0]=e.host:f.unshift(e.host)),e.host=null),p=p&&(f[0]===""||v[0]===""));var T;if(b)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,v=f;else if(f.length)v||(v=[]),v.pop(),v=v.concat(f),r.search=e.search,r.query=e.query;else if(!Is(e.search))return E&&(r.hostname=r.host=v.shift(),T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),r.search=e.search,r.query=e.query,(!Ze(r.pathname)||!Ze(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=v.slice(-1)[0],C=(r.host||e.host||v.length>1)&&(x==="."||x==="..")||x==="",k=0,A=v.length;A>=0;A--)x=v[A],x==="."?v.splice(A,1):x===".."?(v.splice(A,1),k++):k&&(v.splice(A,1),k--);if(!p&&!w)for(;k--;k)v.unshift("..");p&&v[0]!==""&&(!v[0]||v[0].charAt(0)!=="/")&&v.unshift(""),C&&v.join("/").substr(-1)!=="/"&&v.push("");var P=v[0]===""||v[0]&&v[0].charAt(0)==="/";return E&&(r.hostname=r.host=P?"":v.length?v.shift():"",T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())),p=p||r.host&&v.length,p&&!P&&v.unshift(""),v.length?r.pathname=v.join("/"):(r.pathname=null,r.path=null),(!Ze(r.pathname)||!Ze(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Be.prototype.parseHost=function(){return Wl(this)};function Wl(e){var t=e.host,r=yd.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}var Ks=Nr(globalThis.fetch)&&Nr(globalThis.ReadableStream),vr;function Od(){if(typeof vr<"u")return vr;try{new globalThis.Blob([new ArrayBuffer(1)]),vr=!0}catch{vr=!1}return vr}var gt;function Xs(e){gt||(gt=new globalThis.XMLHttpRequest,gt.open("GET",globalThis.location.host?"/":"https://example.com"));try{return gt.responseType=e,gt.responseType===e}catch{return!1}}var Js=typeof globalThis.ArrayBuffer<"u",Ad=Js&&Nr(globalThis.ArrayBuffer.prototype.slice),Nd=Js&&Xs("arraybuffer"),Ld=!Ks&&Ad&&Xs("ms-stream"),Dd=!Ks&&Js&&Xs("moz-chunked-arraybuffer"),Vl=Nr(gt.overrideMimeType),Md=Nr(globalThis.VBArray);function Nr(e){return typeof e=="function"}gt=null;function It(){this.head=null,this.tail=null,this.length=0}It.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length};It.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length};It.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}};It.prototype.clear=function(){this.head=this.tail=null,this.length=0};It.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r};It.prototype.concat=function(e){if(this.length===0)return F.alloc(0);if(this.length===1)return this.head.data;for(var t=F.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var Zl=us();ee.ReadableState=Gl;var K=Ds("stream");ue(ee,j);function Id(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Pd(e,t){return e.listeners(t).length}function Gl(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof Te&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new It,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new Zl.StringDecoder(e.encoding),this.encoding=e.encoding)}function ee(e){if(!(this instanceof ee))return new ee(e);this._readableState=new Gl(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),j.call(this)}ee.prototype.push=function(e,t){var r=this._readableState;return!r.objectMode&&typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t="")),Yl(this,r,e,t,!1)};ee.prototype.unshift=function(e){var t=this._readableState;return Yl(this,t,e,"",!0)};ee.prototype.isPaused=function(){return this._readableState.flowing===!1};function Yl(e,t,r,n,i){var s=Ud(t,r);if(s)e.emit("error",s);else if(r===null)t.reading=!1,qd(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var l;t.decoder&&!i&&!n&&(r=t.decoder.write(r),l=!t.objectMode&&r.length===0),i||(t.reading=!1),l||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&$n(e))),jd(e,t)}else i||(t.reading=!1);return Bd(t)}function Bd(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}ee.prototype.setEncoding=function(e){return this._readableState.decoder=new Zl.StringDecoder(e),this._readableState.encoding=e,this};var Ea=8388608;function Fd(e){return e>=Ea?e=Ea:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Sa(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Fd(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}ee.prototype.read=function(e){K("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return K("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ui(this):$n(this),null;if(e=Sa(e,t),e===0&&t.ended)return t.length===0&&Ui(this),null;var n=t.needReadable;K("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,K("length less than watermark",n)),t.ended||t.reading?(n=!1,K("reading or ended",n)):n&&(K("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Sa(r,t)));var i;return e>0?i=Kl(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ui(this)),i!==null&&this.emit("data",i),i};function Ud(e,t){var r=null;return!F.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function qd(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,$n(e)}}function $n(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(K("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?we(Ra,e):Ra(e))}function Ra(e){K("emit readable"),e.emit("readable"),Qs(e)}function jd(e,t){t.readingMore||(t.readingMore=!0,we($d,e,t))}function $d(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(K("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}ee.prototype._read=function(e){this.emit("error",new Error("not implemented"))};ee.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,K("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||t.end!==!1,s=i?a:u;n.endEmitted?we(s):r.once("end",s),e.on("unpipe",o);function o(p){K("onunpipe"),p===r&&u()}function a(){K("onend"),e.end()}var l=zd(r);e.on("drain",l);var f=!1;function u(){K("cleanup"),e.removeListener("close",h),e.removeListener("finish",y),e.removeListener("drain",l),e.removeListener("error",_),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",u),r.removeListener("data",d),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}var c=!1;r.on("data",d);function d(p){K("ondata"),c=!1;var w=e.write(p);w===!1&&!c&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Xl(n.pipes,e)!==-1)&&!f&&(K("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function _(p){K("onerror",p),b(),e.removeListener("error",_),Pd(e,"error")===0&&e.emit("error",p)}Id(e,"error",_);function h(){e.removeListener("finish",y),b()}e.once("close",h);function y(){K("onfinish"),e.removeListener("close",h),b()}e.once("finish",y);function b(){K("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(K("pipe resume"),r.resume()),e};function zd(e){return function(){var t=e._readableState;K("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,Qs(e))}}ee.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var s=Xl(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)};ee.prototype.on=function(e,t){var r=j.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&$n(this):we(Hd,this))}return r};ee.prototype.addListener=ee.prototype.on;function Hd(e){K("readable nexttick read 0"),e.read(0)}ee.prototype.resume=function(){var e=this._readableState;return e.flowing||(K("resume"),e.flowing=!0,Wd(this,e)),this};function Wd(e,t){t.resumeScheduled||(t.resumeScheduled=!0,we(Vd,e,t))}function Vd(e,t){t.reading||(K("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Qs(e),t.flowing&&!t.reading&&e.read(0)}ee.prototype.pause=function(){return K("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(K("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Qs(e){var t=e._readableState;for(K("flow",t.flowing);t.flowing&&e.read()!==null;);}ee.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(K("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),e.on("data",function(o){if(K("wrapped data"),t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&o==null)&&!(!t.objectMode&&(!o||!o.length))){var a=n.push(o);a||(r=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(o){return function(){return e[o].apply(e,arguments)}}(i));var s=["error","close","destroy","pause","resume"];return Xd(s,function(o){e.on(o,n.emit.bind(n,o))}),n._read=function(o){K("wrapped _read",o),r&&(r=!1,e.resume())},n};ee._fromList=Kl;function Kl(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=Zd(e,t.buffer,t.decoder),r}function Zd(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Gd(e,t):Yd(e,t),n}function Gd(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),e-=o,e===0){o===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++n}return t.length-=n,i}function Yd(e,t){var r=F.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,o),e-=o,e===0){o===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++i}return t.length-=i,r}function Ui(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,we(Kd,t,e))}function Kd(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Xd(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function Xl(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}le.WritableState=eo;ue(le,j);function Jd(){}function Qd(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function eo(e,t){Object.defineProperty(this,"buffer",{get:Un(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof Te&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(s){op(t,s)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new tu(this)}eo.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};function le(e){if(!(this instanceof le)&&!(this instanceof Te))return new le(e);this._writableState=new eo(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),j.call(this)}le.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ep(e,t){var r=new Error("write after end");e.emit("error",r),we(t,r)}function tp(e,t,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):!F.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!t.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),we(n,s),i=!1),i}le.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return typeof t=="function"&&(r=t,t=null),F.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Jd),n.ended?ep(this,r):tp(this,n,e,r)&&(n.pendingcb++,i=np(this,n,e,t,r)),i};le.prototype.cork=function(){var e=this._writableState;e.corked++};le.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Jl(this,e))};le.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function rp(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=F.from(t,r)),t}function np(e,t,r,n,i){r=rp(t,r,n),F.isBuffer(r)&&(n="buffer");var s=t.objectMode?1:r.length;t.length+=s;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new Qd(r,n,i),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _s(e,t,!1,s,r,n,i);return o}function _s(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function ip(e,t,r,n,i){--t.pendingcb,r?we(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function sp(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function op(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(sp(r),t)ip(e,r,n,t,i);else{var s=Ql(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Jl(e,r),n?we(Ta,e,r,s,i):Ta(e,r,s,i)}}function Ta(e,t,r,n){r||ap(e,t),t.pendingcb--,n(),eu(e,t)}function ap(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Jl(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;_s(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new tu(t)}else{for(;r;){var a=r.chunk,l=r.encoding,f=r.callback,u=t.objectMode?1:a.length;if(_s(e,t,!1,u,a,l,f),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}le.prototype._write=function(e,t,r){r(new Error("not implemented"))};le.prototype._writev=null;le.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&fp(this,n,r)};function Ql(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function xa(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function eu(e,t){var r=Ql(t);return r&&(t.pendingcb===0?(xa(e,t),t.finished=!0,e.emit("finish")):xa(e,t)),r}function fp(e,t,r){t.ending=!0,eu(e,t),r&&(t.finished?we(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function tu(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}ue(Te,ee);var Ca=Object.keys(le.prototype);for(var qi=0;qi<Ca.length;qi++){var ji=Ca[qi];Te.prototype[ji]||(Te.prototype[ji]=le.prototype[ji])}function Te(e){if(!(this instanceof Te))return new Te(e);ee.call(this,e),le.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",lp)}function lp(){this.allowHalfOpen||this._writableState.ended||we(up,this)}function up(e){e.end()}ue(xe,Te);function hp(e){this.afterTransform=function(t,r){return cp(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function cp(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),i(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}function xe(e){if(!(this instanceof xe))return new xe(e);Te.call(this,e),this._transformState=new hp(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){ka(t,r)}):ka(t)})}xe.prototype.push=function(e,t){return this._transformState.needTransform=!1,Te.prototype.push.call(this,e,t)};xe.prototype._transform=function(e,t,r){throw new Error("Not implemented")};xe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};xe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function ka(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}ue(Lr,xe);function Lr(e){if(!(this instanceof Lr))return new Lr(e);xe.call(this,e)}Lr.prototype._transform=function(e,t,r){r(null,e)};ue(Ne,j);Ne.Readable=ee;Ne.Writable=le;Ne.Duplex=Te;Ne.Transform=xe;Ne.PassThrough=Lr;Ne.Stream=Ne;function Ne(){j.call(this)}Ne.prototype.pipe=function(e,t){var r=this;function n(u){e.writable&&e.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",a));var s=!1;function o(){s||(s=!0,e.end())}function a(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function l(u){if(f(),j.listenerCount(this,"error")===0)throw u}r.on("error",l),e.on("error",l);function f(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",f),r.removeListener("close",f),e.removeListener("close",f)}return r.on("end",f),r.on("close",f),e.on("close",f),e.emit("pipe",r),e};var vt={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function zn(e,t,r){var n=this;ee.call(n),n._mode=r,n.headers={},n.rawHeaders=[],n.trailers={},n.rawTrailers=[],n.on("end",function(){M.nextTick(function(){n.emit("close")})});var i;if(r==="fetch"){n._fetchResponse=t,n.url=t.url,n.statusCode=t.status,n.statusMessage=t.statusText;for(var s,o,a=t.headers[Symbol.iterator]();s=(o=a.next()).value,!o.done;)n.headers[s[0].toLowerCase()]=s[1],n.rawHeaders.push(s[0],s[1]);var l=t.body.getReader();i=function(){l.read().then(function(d){if(!n._destroyed){if(d.done){n.push(null);return}n.push(new F(d.value)),i()}})},i()}else{n._xhr=e,n._pos=0,n.url=e.responseURL,n.statusCode=e.status,n.statusMessage=e.statusText;var f=e.getAllResponseHeaders().split(/\r?\n/);if(f.forEach(function(d){var _=d.match(/^([^:]+):\s*(.*)/);if(_){var h=_[1].toLowerCase();h==="set-cookie"?(n.headers[h]===void 0&&(n.headers[h]=[]),n.headers[h].push(_[2])):n.headers[h]!==void 0?n.headers[h]+=", "+_[2]:n.headers[h]=_[2],n.rawHeaders.push(_[1],_[2])}}),n._charset="x-user-defined",!Vl){var u=n.rawHeaders["mime-type"];if(u){var c=u.match(/;\s*charset=([^;])(;|$)/);c&&(n._charset=c[1].toLowerCase())}n._charset||(n._charset="utf-8")}}}ue(zn,ee);zn.prototype._read=function(){};zn.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==vt.DONE)break;try{r=new globalThis.VBArray(t.responseBody).toArray()}catch{}if(r!==null){e.push(new F(r));break}case"text":try{r=t.responseText}catch{e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if(e._charset==="x-user-defined"){for(var i=new F(n.length),s=0;s<n.length;s++)i[s]=n.charCodeAt(s)&255;e.push(i)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==vt.DONE||!t.response)break;r=t.response,e.push(new F(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==vt.LOADING||!r)break;e.push(new F(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==vt.LOADING)break;var o=new globalThis.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new F(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(r);break}e._xhr.readyState===vt.DONE&&e._mode!=="ms-stream"&&e.push(null)};function dp(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(Kt(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")}function pp(e,t){return Ks&&t?"fetch":Dd?"moz-chunked-arraybuffer":Ld?"ms-stream":Nd&&e?"arraybuffer":Md&&e?"text:vbarray":"text"}function pe(e){var t=this;le.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new F(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(i){t.setHeader(i,e.headers[i])});var r,n=!0;if(e.mode==="disable-fetch")n=!1,r=!0;else if(e.mode==="prefer-streaming")r=!1;else if(e.mode==="allow-wrong-content-type")r=!Vl;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");t._mode=pp(r,n),t.on("finish",function(){t._onFinish()})}ue(pe,le);var _p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];pe.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();_p.indexOf(n)===-1&&(r._headers[n]={name:e,value:t})};pe.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value};pe.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]};pe.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(Od()?n=new globalThis.Blob(e._body.map(function(o){return dp(o)}),{type:(r["content-type"]||{}).value||""}):n=F.concat(e._body).toString()),e._mode==="fetch"){var i=Object.keys(r).map(function(o){return[r[o].name,r[o].value]});globalThis.fetch(e._opts.url,{method:e._opts.method,headers:i,body:n,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(o){e._fetchResponse=o,e._connect()},function(o){e.emit("error",o)})}else{var s=e._xhr=new globalThis.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(o){M.nextTick(function(){e.emit("error",o)});return}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(o){s.setRequestHeader(r[o].name,r[o].value)}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case vt.LOADING:case vt.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(n)}catch(o){M.nextTick(function(){e.emit("error",o)});return}}}};function gp(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}pe.prototype._onXHRProgress=function(){var e=this;!gp(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())};pe.prototype._connect=function(){var e=this;e._destroyed||(e._response=new zn(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))};pe.prototype._write=function(e,t,r){var n=this;n._body.push(e),r()};pe.prototype.abort=pe.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()};pe.prototype.end=function(e,t,r){var n=this;typeof e=="function"&&(r=e,e=void 0),le.prototype.end.call(n,e,t,r)};pe.prototype.flushHeaders=function(){};pe.prototype.setTimeout=function(){};pe.prototype.setNoDelay=function(){};pe.prototype.setSocketKeepAlive=function(){};function ru(e,t){typeof e=="string"&&(e=zr(e));var r=globalThis.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||r,i=e.hostname||e.host,s=e.port,o=e.path||"/";i&&i.indexOf(":")!==-1&&(i="["+i+"]"),e.url=(i?n+"//"+i:"")+(s?":"+s:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new pe(e);return t&&a.on("response",t),a}function vp(e,t){var r=ru(e,t);return r.end(),r}function nu(){}nu.defaultMaxSockets=4;var mp=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],yp={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};const ct={request:ru,get:vp,Agent:nu,METHODS:mp,STATUS_CODES:yp},iu={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function bp(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Ge(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var s=0;s<n;s++)e[i+s]=t[r+s]}var Ln=Uint8Array,Re=Uint16Array,Dn=Int32Array,wp=4,Oa=0,Aa=1,Ep=2;function hr(e){for(var t=e.length;--t>=0;)e[t]=0}var Sp=0,su=1,Rp=2,Tp=3,xp=258,to=29,Hr=256,Dr=Hr+1+to,nr=30,ro=19,ou=2*Dr+1,bt=15,$i=16,Cp=7,no=256,au=16,fu=17,lu=18,gs=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],mn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],kp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],uu=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Op=512,He=new Array((Dr+2)*2);hr(He);var kr=new Array(nr*2);hr(kr);var Mr=new Array(Op);hr(Mr);var Ir=new Array(xp-Tp+1);hr(Ir);var io=new Array(to);hr(io);var Mn=new Array(nr);hr(Mn);function zi(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var hu,cu,du;function Hi(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function pu(e){return e<256?Mr[e]:Mr[256+(e>>>7)]}function Pr(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function be(e,t,r){e.bi_valid>$i-r?(e.bi_buf|=t<<e.bi_valid&65535,Pr(e,e.bi_buf),e.bi_buf=t>>$i-e.bi_valid,e.bi_valid+=r-$i):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Ie(e,t,r){be(e,r[t*2],r[t*2+1])}function _u(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function Ap(e){e.bi_valid===16?(Pr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function Np(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,u,c,d,_,h,y=0;for(d=0;d<=bt;d++)e.bl_count[d]=0;for(r[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<ou;f++)u=e.heap[f],d=r[r[u*2+1]*2+1]+1,d>l&&(d=l,y++),r[u*2+1]=d,!(u>n)&&(e.bl_count[d]++,_=0,u>=a&&(_=o[u-a]),h=r[u*2],e.opt_len+=h*(d+_),s&&(e.static_len+=h*(i[u*2+1]+_)));if(y!==0){do{for(d=l-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(d=l;d!==0;d--)for(u=e.bl_count[d];u!==0;)c=e.heap[--f],!(c>n)&&(r[c*2+1]!==d&&(e.opt_len+=(d-r[c*2+1])*r[c*2],r[c*2+1]=d),u--)}}function gu(e,t,r){var n=new Array(bt+1),i=0,s,o;for(s=1;s<=bt;s++)n[s]=i=i+r[s-1]<<1;for(o=0;o<=t;o++){var a=e[o*2+1];a!==0&&(e[o*2]=_u(n[a]++,a))}}function Lp(){var e,t,r,n,i,s=new Array(bt+1);for(r=0,n=0;n<to-1;n++)for(io[n]=r,e=0;e<1<<gs[n];e++)Ir[r++]=n;for(Ir[r-1]=n,i=0,n=0;n<16;n++)for(Mn[n]=i,e=0;e<1<<mn[n];e++)Mr[i++]=n;for(i>>=7;n<nr;n++)for(Mn[n]=i<<7,e=0;e<1<<mn[n]-7;e++)Mr[256+i++]=n;for(t=0;t<=bt;t++)s[t]=0;for(e=0;e<=143;)He[e*2+1]=8,e++,s[8]++;for(;e<=255;)He[e*2+1]=9,e++,s[9]++;for(;e<=279;)He[e*2+1]=7,e++,s[7]++;for(;e<=287;)He[e*2+1]=8,e++,s[8]++;for(gu(He,Dr+1,s),e=0;e<nr;e++)kr[e*2+1]=5,kr[e*2]=_u(e,5);hu=new zi(He,gs,Hr+1,Dr,bt),cu=new zi(kr,mn,0,nr,bt),du=new zi(new Array(0),kp,0,ro,Cp)}function vu(e){var t;for(t=0;t<Dr;t++)e.dyn_ltree[t*2]=0;for(t=0;t<nr;t++)e.dyn_dtree[t*2]=0;for(t=0;t<ro;t++)e.bl_tree[t*2]=0;e.dyn_ltree[no*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function mu(e){e.bi_valid>8?Pr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Dp(e,t,r,n){mu(e),n&&(Pr(e,r),Pr(e,~r)),Ge(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function Na(e,t,r,n){var i=t*2,s=r*2;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function Wi(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Na(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Na(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function La(e,t,r){var n,i,s=0,o,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,n===0?Ie(e,i,t):(o=Ir[i],Ie(e,o+Hr+1,t),a=gs[o],a!==0&&(i-=io[o],be(e,i,a)),n--,o=pu(n),Ie(e,o,r),a=mn[o],a!==0&&(n-=Mn[o],be(e,n,a)));while(s<e.last_lit);Ie(e,no,t)}function vs(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems,o,a,l=-1,f;for(e.heap_len=0,e.heap_max=ou,o=0;o<s;o++)r[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,r[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=n[f*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Wi(e,r,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Wi(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[f*2]=r[o*2]+r[a*2],e.depth[f]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[o*2+1]=r[a*2+1]=f,e.heap[1]=f++,Wi(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Np(e,t),gu(r,l,e.bl_count)}function Da(e,t,r){var n,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=t[(n+1)*2+1],!(++a<l&&s===o)&&(a<f?e.bl_tree[s*2]+=a:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[au*2]++):a<=10?e.bl_tree[fu*2]++:e.bl_tree[lu*2]++,a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4))}function Ma(e,t,r){var n,i=-1,s,o=t[0*2+1],a=0,l=7,f=4;for(o===0&&(l=138,f=3),n=0;n<=r;n++)if(s=o,o=t[(n+1)*2+1],!(++a<l&&s===o)){if(a<f)do Ie(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Ie(e,s,e.bl_tree),a--),Ie(e,au,e.bl_tree),be(e,a-3,2)):a<=10?(Ie(e,fu,e.bl_tree),be(e,a-3,3)):(Ie(e,lu,e.bl_tree),be(e,a-11,7));a=0,i=s,o===0?(l=138,f=3):s===o?(l=6,f=3):(l=7,f=4)}}function Mp(e){var t;for(Da(e,e.dyn_ltree,e.l_desc.max_code),Da(e,e.dyn_dtree,e.d_desc.max_code),vs(e,e.bl_desc),t=ro-1;t>=3&&e.bl_tree[uu[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Ip(e,t,r,n){var i;for(be(e,t-257,5),be(e,r-1,5),be(e,n-4,4),i=0;i<n;i++)be(e,e.bl_tree[uu[i]*2+1],3);Ma(e,e.dyn_ltree,t-1),Ma(e,e.dyn_dtree,r-1)}function Pp(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Oa;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Aa;for(r=32;r<Hr;r++)if(e.dyn_ltree[r*2]!==0)return Aa;return Oa}var Ia=!1;function Bp(e){Ia||(Lp(),Ia=!0),e.l_desc=new Hi(e.dyn_ltree,hu),e.d_desc=new Hi(e.dyn_dtree,cu),e.bl_desc=new Hi(e.bl_tree,du),e.bi_buf=0,e.bi_valid=0,vu(e)}function yu(e,t,r,n){be(e,(Sp<<1)+(n?1:0),3),Dp(e,t,r,!0)}function Fp(e){be(e,su<<1,3),Ie(e,no,He),Ap(e)}function Up(e,t,r,n){var i,s,o=0;e.level>0?(e.strm.data_type===Ep&&(e.strm.data_type=Pp(e)),vs(e,e.l_desc),vs(e,e.d_desc),o=Mp(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&t!==-1?yu(e,t,r,n):e.strategy===wp||s===i?(be(e,(su<<1)+(n?1:0),3),La(e,He,kr)):(be(e,(Rp<<1)+(n?1:0),3),Ip(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),La(e,e.dyn_ltree,e.dyn_dtree)),vu(e),n&&mu(e)}function lt(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Ir[r]+Hr+1)*2]++,e.dyn_dtree[pu(t)*2]++),e.last_lit===e.lit_bufsize-1}function ms(e,t,r,n){for(var i=e&65535|0,s=e>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function qp(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var jp=qp();function ce(e,t,r,n){var i=jp,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1}var Pt=0,$p=1,zp=3,ut=4,Pa=5,it=0,Ba=1,ht=-2,Hp=-3,Vi=-5,Wp=-1,Vp=1,an=2,Zp=3,Gp=4,Yp=2,so=8,Kp=9,Xp=29,Jp=256,ys=Jp+1+Xp,Qp=30,e_=19,t_=2*ys+1,r_=15,Y=3,ot=258,Ae=ot+Y+1,n_=32,oo=42,bs=69,yn=73,bn=91,wn=103,wt=113,Rr=666,fe=1,Wr=2,Tt=3,cr=4,i_=3;function at(e,t){return e.msg=iu[t],t}function Fa(e){return(e<<1)-(e>4?9:0)}function mt(e){for(var t=e.length;--t>=0;)e[t]=0}function et(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(Ge(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function de(e,t){Up(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,et(e.strm)}function Z(e,t){e.pending_buf[e.pending++]=t}function mr(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function s_(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,Ge(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=ms(e.adler,t,i,r):e.state.wrap===2&&(e.adler=ce(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function bu(e,t){var r=e.max_chain_length,n=e.strstart,i,s,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-Ae?e.strstart-(e.w_size-Ae):0,f=e.window,u=e.w_mask,c=e.prev,d=e.strstart+ot,_=f[n+o-1],h=f[n+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(f[i+o]!==h||f[i+o-1]!==_||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<d);if(s=ot-(d-n),n=d-ot,s>o){if(e.match_start=t,o=s,s>=a)break;_=f[n+o-1],h=f[n+o]}}while((t=c[t&u])>l&&--r!==0);return o<=e.lookahead?o:e.lookahead}function Vr(e){var t=e.w_size,r,n,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ae)){Ge(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);s+=t}if(e.strm.avail_in===0)break;if(n=s_(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=Y)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+Y-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Y)););}while(e.lookahead<Ae&&e.strm.avail_in!==0)}function o_(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Vr(e),e.lookahead===0&&t===Pt)return fe;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,de(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ae&&(de(e,!1),e.strm.avail_out===0))return fe}return e.insert=0,t===ut?(de(e,!0),e.strm.avail_out===0?Tt:cr):(e.strstart>e.block_start&&(de(e,!1),e.strm.avail_out===0),fe)}function Zi(e,t){for(var r,n;;){if(e.lookahead<Ae){if(Vr(e),e.lookahead<Ae&&t===Pt)return fe;if(e.lookahead===0)break}if(r=0,e.lookahead>=Y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Ae&&(e.match_length=bu(e,r)),e.match_length>=Y)if(n=lt(e,e.strstart-e.match_start,e.match_length-Y),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Y){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(de(e,!1),e.strm.avail_out===0))return fe}return e.insert=e.strstart<Y-1?e.strstart:Y-1,t===ut?(de(e,!0),e.strm.avail_out===0?Tt:cr):e.last_lit&&(de(e,!1),e.strm.avail_out===0)?fe:Wr}function Vt(e,t){for(var r,n,i;;){if(e.lookahead<Ae){if(Vr(e),e.lookahead<Ae&&t===Pt)return fe;if(e.lookahead===0)break}if(r=0,e.lookahead>=Y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Y-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ae&&(e.match_length=bu(e,r),e.match_length<=5&&(e.strategy===Vp||e.match_length===Y&&e.strstart-e.match_start>4096)&&(e.match_length=Y-1)),e.prev_length>=Y&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Y,n=lt(e,e.strstart-1-e.prev_match,e.prev_length-Y),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Y-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Y-1,e.strstart++,n&&(de(e,!1),e.strm.avail_out===0))return fe}else if(e.match_available){if(n=lt(e,0,e.window[e.strstart-1]),n&&de(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return fe}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=lt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Y-1?e.strstart:Y-1,t===ut?(de(e,!0),e.strm.avail_out===0?Tt:cr):e.last_lit&&(de(e,!1),e.strm.avail_out===0)?fe:Wr}function a_(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=ot){if(Vr(e),e.lookahead<=ot&&t===Pt)return fe;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Y&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+ot;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=ot-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Y?(r=lt(e,1,e.match_length-Y),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(de(e,!1),e.strm.avail_out===0))return fe}return e.insert=0,t===ut?(de(e,!0),e.strm.avail_out===0?Tt:cr):e.last_lit&&(de(e,!1),e.strm.avail_out===0)?fe:Wr}function f_(e,t){for(var r;;){if(e.lookahead===0&&(Vr(e),e.lookahead===0)){if(t===Pt)return fe;break}if(e.match_length=0,r=lt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(de(e,!1),e.strm.avail_out===0))return fe}return e.insert=0,t===ut?(de(e,!0),e.strm.avail_out===0?Tt:cr):e.last_lit&&(de(e,!1),e.strm.avail_out===0)?fe:Wr}function De(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var Jt;Jt=[new De(0,0,0,0,o_),new De(4,4,8,4,Zi),new De(4,5,16,8,Zi),new De(4,6,32,32,Zi),new De(4,4,16,16,Vt),new De(8,16,32,32,Vt),new De(8,16,128,128,Vt),new De(8,32,128,256,Vt),new De(32,128,258,1024,Vt),new De(32,258,258,4096,Vt)];function l_(e){e.window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Jt[e.level].max_lazy,e.good_match=Jt[e.level].good_length,e.nice_match=Jt[e.level].nice_length,e.max_chain_length=Jt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Y-1,e.match_available=0,e.ins_h=0}function u_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=so,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Re(t_*2),this.dyn_dtree=new Re((2*Qp+1)*2),this.bl_tree=new Re((2*e_+1)*2),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Re(r_+1),this.heap=new Re(2*ys+1),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Re(2*ys+1),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function h_(e){var t;return!e||!e.state?at(e,ht):(e.total_in=e.total_out=0,e.data_type=Yp,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?oo:wt,e.adler=t.wrap===2?0:1,t.last_flush=Pt,Bp(t),it)}function wu(e){var t=h_(e);return t===it&&l_(e.state),t}function c_(e,t,r,n,i,s){if(!e)return ht;var o=1;if(t===Wp&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>Kp||r!==so||n<8||n>15||t<0||t>9||s<0||s>Gp)return at(e,ht);n===8&&(n=9);var a=new u_;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Y-1)/Y),a.window=new Ln(a.w_size*2),a.head=new Re(a.hash_size),a.prev=new Re(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Ln(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=s,a.method=r,wu(e)}function d_(e,t){var r,n,i,s;if(!e||!e.state||t>Pa||t<0)return e?at(e,ht):ht;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===Rr&&t!==ut)return at(e,e.avail_out===0?Vi:ht);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===oo)if(n.wrap===2)e.adler=0,Z(n,31),Z(n,139),Z(n,8),n.gzhead?(Z(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Z(n,n.gzhead.time&255),Z(n,n.gzhead.time>>8&255),Z(n,n.gzhead.time>>16&255),Z(n,n.gzhead.time>>24&255),Z(n,n.level===9?2:n.strategy>=an||n.level<2?4:0),Z(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Z(n,n.gzhead.extra.length&255),Z(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ce(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=bs):(Z(n,0),Z(n,0),Z(n,0),Z(n,0),Z(n,0),Z(n,n.level===9?2:n.strategy>=an||n.level<2?4:0),Z(n,i_),n.status=wt);else{var o=so+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=an||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=n_),o+=31-o%31,n.status=wt,mr(n,o),n.strstart!==0&&(mr(n,e.adler>>>16),mr(n,e.adler&65535)),e.adler=1}if(n.status===bs)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),et(e),i=n.pending,n.pending===n.pending_buf_size));)Z(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=yn)}else n.status=yn;if(n.status===yn)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),et(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,Z(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=bn)}else n.status=bn;if(n.status===bn)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),et(e),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,Z(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ce(e.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=wn)}else n.status=wn;if(n.status===wn&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&et(e),n.pending+2<=n.pending_buf_size&&(Z(n,e.adler&255),Z(n,e.adler>>8&255),e.adler=0,n.status=wt)):n.status=wt),n.pending!==0){if(et(e),e.avail_out===0)return n.last_flush=-1,it}else if(e.avail_in===0&&Fa(t)<=Fa(r)&&t!==ut)return at(e,Vi);if(n.status===Rr&&e.avail_in!==0)return at(e,Vi);if(e.avail_in!==0||n.lookahead!==0||t!==Pt&&n.status!==Rr){var l=n.strategy===an?f_(n,t):n.strategy===Zp?a_(n,t):Jt[n.level].func(n,t);if((l===Tt||l===cr)&&(n.status=Rr),l===fe||l===Tt)return e.avail_out===0&&(n.last_flush=-1),it;if(l===Wr&&(t===$p?Fp(n):t!==Pa&&(yu(n,0,0,!1),t===zp&&(mt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),et(e),e.avail_out===0))return n.last_flush=-1,it}return t!==ut?it:n.wrap<=0?Ba:(n.wrap===2?(Z(n,e.adler&255),Z(n,e.adler>>8&255),Z(n,e.adler>>16&255),Z(n,e.adler>>24&255),Z(n,e.total_in&255),Z(n,e.total_in>>8&255),Z(n,e.total_in>>16&255),Z(n,e.total_in>>24&255)):(mr(n,e.adler>>>16),mr(n,e.adler&65535)),et(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?it:Ba)}function p_(e){var t;return!e||!e.state?ht:(t=e.state.status,t!==oo&&t!==bs&&t!==yn&&t!==bn&&t!==wn&&t!==wt&&t!==Rr?at(e,ht):(e.state=null,t===wt?at(e,Hp):it))}var fn=30,__=12;function g_(e,t){var r,n,i,s,o,a,l,f,u,c,d,_,h,y,b,p,w,v,E,T,x,C,k,A,P;r=e.state,n=e.next_in,A=e.input,i=n+(e.avail_in-5),s=e.next_out,P=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=r.dmax,f=r.wsize,u=r.whave,c=r.wnext,d=r.window,_=r.hold,h=r.bits,y=r.lencode,b=r.distcode,p=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;e:do{h<15&&(_+=A[n++]<<h,h+=8,_+=A[n++]<<h,h+=8),v=y[_&p];t:for(;;){if(E=v>>>24,_>>>=E,h-=E,E=v>>>16&255,E===0)P[s++]=v&65535;else if(E&16){T=v&65535,E&=15,E&&(h<E&&(_+=A[n++]<<h,h+=8),T+=_&(1<<E)-1,_>>>=E,h-=E),h<15&&(_+=A[n++]<<h,h+=8,_+=A[n++]<<h,h+=8),v=b[_&w];r:for(;;){if(E=v>>>24,_>>>=E,h-=E,E=v>>>16&255,E&16){if(x=v&65535,E&=15,h<E&&(_+=A[n++]<<h,h+=8,h<E&&(_+=A[n++]<<h,h+=8)),x+=_&(1<<E)-1,x>l){e.msg="invalid distance too far back",r.mode=fn;break e}if(_>>>=E,h-=E,E=s-o,x>E){if(E=x-E,E>u&&r.sane){e.msg="invalid distance too far back",r.mode=fn;break e}if(C=0,k=d,c===0){if(C+=f-E,E<T){T-=E;do P[s++]=d[C++];while(--E);C=s-x,k=P}}else if(c<E){if(C+=f+c-E,E-=c,E<T){T-=E;do P[s++]=d[C++];while(--E);if(C=0,c<T){E=c,T-=E;do P[s++]=d[C++];while(--E);C=s-x,k=P}}}else if(C+=c-E,E<T){T-=E;do P[s++]=d[C++];while(--E);C=s-x,k=P}for(;T>2;)P[s++]=k[C++],P[s++]=k[C++],P[s++]=k[C++],T-=3;T&&(P[s++]=k[C++],T>1&&(P[s++]=k[C++]))}else{C=s-x;do P[s++]=P[C++],P[s++]=P[C++],P[s++]=P[C++],T-=3;while(T>2);T&&(P[s++]=P[C++],T>1&&(P[s++]=P[C++]))}}else if(E&64){e.msg="invalid distance code",r.mode=fn;break e}else{v=b[(v&65535)+(_&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){r.mode=__;break e}else{e.msg="invalid literal/length code",r.mode=fn;break e}else{v=y[(v&65535)+(_&(1<<E)-1)];continue t}break}}while(n<i&&s<a);T=h>>3,n-=T,h-=T<<3,_&=(1<<h)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<a?257+(a-s):257-(s-a),r.hold=_,r.bits=h}var Zt=15,Ua=852,qa=592,ja=0,Gi=1,$a=2,v_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],m_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],y_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Or(e,t,r,n,i,s,o,a){var l=a.bits,f=0,u=0,c=0,d=0,_=0,h=0,y=0,b=0,p=0,w=0,v,E,T,x,C,k=null,A=0,P,D=new Re(Zt+1),B=new Re(Zt+1),U=null,G=0,ne,z,J;for(f=0;f<=Zt;f++)D[f]=0;for(u=0;u<n;u++)D[t[r+u]]++;for(_=l,d=Zt;d>=1&&D[d]===0;d--);if(_>d&&(_=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(c=1;c<d&&D[c]===0;c++);for(_<c&&(_=c),b=1,f=1;f<=Zt;f++)if(b<<=1,b-=D[f],b<0)return-1;if(b>0&&(e===ja||d!==1))return-1;for(B[1]=0,f=1;f<Zt;f++)B[f+1]=B[f]+D[f];for(u=0;u<n;u++)t[r+u]!==0&&(o[B[t[r+u]]++]=u);if(e===ja?(k=U=o,P=19):e===Gi?(k=v_,A-=257,U=m_,G-=257,P=256):(k=y_,U=b_,P=-1),w=0,u=0,f=c,C=s,h=_,y=0,T=-1,p=1<<_,x=p-1,e===Gi&&p>Ua||e===$a&&p>qa)return 1;for(;;){ne=f-y,o[u]<P?(z=0,J=o[u]):o[u]>P?(z=U[G+o[u]],J=k[A+o[u]]):(z=32+64,J=0),v=1<<f-y,E=1<<h,c=E;do E-=v,i[C+(w>>y)+E]=ne<<24|z<<16|J|0;while(E!==0);for(v=1<<f-1;w&v;)v>>=1;if(v!==0?(w&=v-1,w+=v):w=0,u++,--D[f]===0){if(f===d)break;f=t[r+o[u]]}if(f>_&&(w&x)!==T){for(y===0&&(y=_),C+=c,h=f-y,b=1<<h;h+y<d&&(b-=D[h+y],!(b<=0));)h++,b<<=1;if(p+=1<<h,e===Gi&&p>Ua||e===$a&&p>qa)return 1;T=w&x,i[T]=_<<24|h<<16|C-s|0}}return w!==0&&(i[C+w]=f-y<<24|64<<16|0),a.bits=_,0}var w_=0,Eu=1,Su=2,za=4,E_=5,ln=6,Br=0,S_=1,R_=2,dt=-2,T_=-3,x_=-4,C_=-5,Ha=8,Ru=1,Wa=2,Va=3,Za=4,Ga=5,Ya=6,Ka=7,Xa=8,Ja=9,Qa=10,ef=11,$e=12,Yi=13,tf=14,Ki=15,rf=16,nf=17,sf=18,of=19,un=20,hn=21,af=22,ff=23,lf=24,uf=25,hf=26,Xi=27,cf=28,df=29,Q=30,k_=31,O_=32,A_=852,N_=592;function pf(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function L_(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Re(320),this.work=new Re(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function D_(e){var t;return!e||!e.state?dt:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Ru,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Dn(A_),t.distcode=t.distdyn=new Dn(N_),t.sane=1,t.back=-1,Br)}function Tu(e){var t;return!e||!e.state?dt:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,D_(e))}function M_(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?dt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Tu(e))}function I_(e,t){var r,n;return e?(n=new L_,e.state=n,n.window=null,r=M_(e,t),r!==Br&&(e.state=null),r):dt}var _f=!0,Ji,Qi;function P_(e){if(_f){var t;for(Ji=new Dn(512),Qi=new Dn(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Or(Eu,e.lens,0,288,Ji,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Or(Su,e.lens,0,32,Qi,0,e.work,{bits:5}),_f=!1}e.lencode=Ji,e.lenbits=9,e.distcode=Qi,e.distbits=5}function B_(e,t,r,n){var i,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Ln(s.wsize)),n>=s.wsize?(Ge(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),Ge(s.window,t,r-n,i,s.wnext),n-=i,n?(Ge(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function F_(e,t){var r,n,i,s,o,a,l,f,u,c,d,_,h,y,b=0,p,w,v,E,T,x,C,k,A=new Ln(4),P,D,B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return dt;r=e.state,r.mode===$e&&(r.mode=Yi),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,f=r.hold,u=r.bits,c=a,d=l,k=Br;e:for(;;)switch(r.mode){case Ru:if(r.wrap===0){r.mode=Yi;break}for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.wrap&2&&f===35615){r.check=0,A[0]=f&255,A[1]=f>>>8&255,r.check=ce(r.check,A,2,0),f=0,u=0,r.mode=Wa;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=Q;break}if((f&15)!==Ha){e.msg="unknown compression method",r.mode=Q;break}if(f>>>=4,u-=4,C=(f&15)+8,r.wbits===0)r.wbits=C;else if(C>r.wbits){e.msg="invalid window size",r.mode=Q;break}r.dmax=1<<C,e.adler=r.check=1,r.mode=f&512?Qa:$e,f=0,u=0;break;case Wa:for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.flags=f,(r.flags&255)!==Ha){e.msg="unknown compression method",r.mode=Q;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Q;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,r.check=ce(r.check,A,2,0)),f=0,u=0,r.mode=Va;case Va:for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.head&&(r.head.time=f),r.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,A[2]=f>>>16&255,A[3]=f>>>24&255,r.check=ce(r.check,A,4,0)),f=0,u=0,r.mode=Za;case Za:for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,r.check=ce(r.check,A,2,0)),f=0,u=0,r.mode=Ga;case Ga:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,r.check=ce(r.check,A,2,0)),f=0,u=0}else r.head&&(r.head.extra=null);r.mode=Ya;case Ya:if(r.flags&1024&&(_=r.length,_>a&&(_=a),_&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Ge(r.head.extra,n,s,_,C)),r.flags&512&&(r.check=ce(r.check,n,_,s)),a-=_,s+=_,r.length-=_),r.length))break e;r.length=0,r.mode=Ka;case Ka:if(r.flags&2048){if(a===0)break e;_=0;do C=n[s+_++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));while(C&&_<a);if(r.flags&512&&(r.check=ce(r.check,n,_,s)),a-=_,s+=_,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Xa;case Xa:if(r.flags&4096){if(a===0)break e;_=0;do C=n[s+_++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));while(C&&_<a);if(r.flags&512&&(r.check=ce(r.check,n,_,s)),a-=_,s+=_,C)break e}else r.head&&(r.head.comment=null);r.mode=Ja;case Ja:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Q;break}f=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=$e;break;case Qa:for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}e.adler=r.check=pf(f),f=0,u=0,r.mode=ef;case ef:if(r.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,R_;e.adler=r.check=1,r.mode=$e;case $e:if(t===E_||t===ln)break e;case Yi:if(r.last){f>>>=u&7,u-=u&7,r.mode=Xi;break}for(;u<3;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}switch(r.last=f&1,f>>>=1,u-=1,f&3){case 0:r.mode=tf;break;case 1:if(P_(r),r.mode=un,t===ln){f>>>=2,u-=2;break e}break;case 2:r.mode=nf;break;case 3:e.msg="invalid block type",r.mode=Q}f>>>=2,u-=2;break;case tf:for(f>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Q;break}if(r.length=f&65535,f=0,u=0,r.mode=Ki,t===ln)break e;case Ki:r.mode=rf;case rf:if(_=r.length,_){if(_>a&&(_=a),_>l&&(_=l),_===0)break e;Ge(i,n,s,_,o),a-=_,s+=_,l-=_,o+=_,r.length-=_;break}r.mode=$e;break;case nf:for(;u<14;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(r.nlen=(f&31)+257,f>>>=5,u-=5,r.ndist=(f&31)+1,f>>>=5,u-=5,r.ncode=(f&15)+4,f>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Q;break}r.have=0,r.mode=sf;case sf:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.lens[B[r.have++]]=f&7,f>>>=3,u-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},k=Or(w_,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,k){e.msg="invalid code lengths set",r.mode=Q;break}r.have=0,r.mode=of;case of:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[f&(1<<r.lenbits)-1],p=b>>>24,w=b>>>16&255,v=b&65535,!(p<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(v<16)f>>>=p,u-=p,r.lens[r.have++]=v;else{if(v===16){for(D=p+2;u<D;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f>>>=p,u-=p,r.have===0){e.msg="invalid bit length repeat",r.mode=Q;break}C=r.lens[r.have-1],_=3+(f&3),f>>>=2,u-=2}else if(v===17){for(D=p+3;u<D;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=p,u-=p,C=0,_=3+(f&7),f>>>=3,u-=3}else{for(D=p+7;u<D;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=p,u-=p,C=0,_=11+(f&127),f>>>=7,u-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Q;break}for(;_--;)r.lens[r.have++]=C}}if(r.mode===Q)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Q;break}if(r.lenbits=9,P={bits:r.lenbits},k=Or(Eu,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,k){e.msg="invalid literal/lengths set",r.mode=Q;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},k=Or(Su,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,k){e.msg="invalid distances set",r.mode=Q;break}if(r.mode=un,t===ln)break e;case un:r.mode=hn;case hn:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,g_(e,d),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,f=r.hold,u=r.bits,r.mode===$e&&(r.back=-1);break}for(r.back=0;b=r.lencode[f&(1<<r.lenbits)-1],p=b>>>24,w=b>>>16&255,v=b&65535,!(p<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(w&&!(w&240)){for(E=p,T=w,x=v;b=r.lencode[x+((f&(1<<E+T)-1)>>E)],p=b>>>24,w=b>>>16&255,v=b&65535,!(E+p<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=E,u-=E,r.back+=E}if(f>>>=p,u-=p,r.back+=p,r.length=v,w===0){r.mode=hf;break}if(w&32){r.back=-1,r.mode=$e;break}if(w&64){e.msg="invalid literal/length code",r.mode=Q;break}r.extra=w&15,r.mode=af;case af:if(r.extra){for(D=r.extra;u<D;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ff;case ff:for(;b=r.distcode[f&(1<<r.distbits)-1],p=b>>>24,w=b>>>16&255,v=b&65535,!(p<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(!(w&240)){for(E=p,T=w,x=v;b=r.distcode[x+((f&(1<<E+T)-1)>>E)],p=b>>>24,w=b>>>16&255,v=b&65535,!(E+p<=u);){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}f>>>=E,u-=E,r.back+=E}if(f>>>=p,u-=p,r.back+=p,w&64){e.msg="invalid distance code",r.mode=Q;break}r.offset=v,r.extra=w&15,r.mode=lf;case lf:if(r.extra){for(D=r.extra;u<D;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Q;break}r.mode=uf;case uf:if(l===0)break e;if(_=d-l,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Q;break}_>r.wnext?(_-=r.wnext,h=r.wsize-_):h=r.wnext-_,_>r.length&&(_=r.length),y=r.window}else y=i,h=o-r.offset,_=r.length;_>l&&(_=l),l-=_,r.length-=_;do i[o++]=y[h++];while(--_);r.length===0&&(r.mode=hn);break;case hf:if(l===0)break e;i[o++]=r.length,l--,r.mode=hn;break;case Xi:if(r.wrap){for(;u<32;){if(a===0)break e;a--,f|=n[s++]<<u,u+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?ce(r.check,i,d,o-d):ms(r.check,i,d,o-d)),d=l,(r.flags?f:pf(f))!==r.check){e.msg="incorrect data check",r.mode=Q;break}f=0,u=0}r.mode=cf;case cf:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,f+=n[s++]<<u,u+=8}if(f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Q;break}f=0,u=0}r.mode=df;case df:k=S_;break e;case Q:k=T_;break e;case k_:return x_;case O_:default:return dt}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,r.hold=f,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<Q&&(r.mode<Xi||t!==za))&&B_(e,e.output,e.next_out,d-e.avail_out),c-=e.avail_in,d-=e.avail_out,e.total_in+=c,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?ce(r.check,i,d,e.next_out-d):ms(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===$e?128:0)+(r.mode===un||r.mode===Ki?256:0),(c===0&&d===0||t===za)&&k===Br&&(k=C_),k}function U_(e){if(!e||!e.state)return dt;var t=e.state;return t.window&&(t.window=null),e.state=null,Br}var ao=0,dr=1,Hn=2,Fr=3,In=4,ar=5,Ur=6,qr=7,xu=0,Cu=1,ku=2,Ou=3,Au=4,Nu=5,q_=6,Wn=0,Lu=1,j_=2,$_=-1,z_=-2,H_=-3,W_=-5,V_=0,Z_=1,G_=9,Y_=-1,K_=1,X_=2,J_=3,Q_=4,eg=0,tg=0,rg=1,ng=2,Du=8;function je(e){if(e<dr||e>qr)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}je.prototype.init=function(e,t,r,n,i){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,(this.mode===Fr||this.mode===In)&&(this.windowBits+=16),this.mode===qr&&(this.windowBits+=32),(this.mode===ar||this.mode===Ur)&&(this.windowBits=-this.windowBits),this.strm=new bp;var s;switch(this.mode){case dr:case Fr:case ar:s=c_(this.strm,this.level,Du,this.windowBits,this.memLevel,this.strategy);break;case Hn:case In:case Ur:case qr:s=I_(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(s!==Wn){this._error(s);return}this.write_in_progress=!1,this.init_done=!0};je.prototype.params=function(){throw new Error("deflateParams Not supported")};je.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===ao)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")};je.prototype.write=function(e,t,r,n,i,s,o){this._writeCheck(),this.write_in_progress=!0;var a=this;return M.nextTick(function(){a.write_in_progress=!1;var l=a._write(e,t,r,n,i,s,o);a.callback(l[0],l[1]),a.pending_close&&a.close()}),this};function ig(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}je.prototype.writeSync=function(e,t,r,n,i,s,o){return this._writeCheck(),this._write(e,t,r,n,i,s,o)};je.prototype._write=function(e,t,r,n,i,s,o){if(this.write_in_progress=!0,e!==xu&&e!==Cu&&e!==ku&&e!==Ou&&e!==Au&&e!==Nu)throw new Error("Invalid flush value");t==null&&(t=new F(0),n=0,r=0),i._set?i.set=i._set:i.set=ig;var a=this.strm;a.avail_in=n,a.input=t,a.next_in=r,a.avail_out=o,a.output=i,a.next_out=s;var l;switch(this.mode){case dr:case Fr:case ar:l=d_(a,e);break;case qr:case Hn:case In:case Ur:l=F_(a,e);break;default:throw new Error("Unknown mode "+this.mode)}return l!==Lu&&l!==Wn&&this._error(l),this.write_in_progress=!1,[a.avail_in,a.avail_out]};je.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===dr||this.mode===Fr||this.mode===ar?p_(this.strm):U_(this.strm),this.mode=ao};var cn;je.prototype.reset=function(){switch(this.mode){case dr:case ar:cn=wu(this.strm);break;case Hn:case Ur:cn=Tu(this.strm);break}cn!==Wn&&this._error(cn)};je.prototype._error=function(e){this.onerror(iu[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};const gf=Object.freeze(Object.defineProperty({__proto__:null,DEFLATE:dr,DEFLATERAW:ar,GUNZIP:In,GZIP:Fr,INFLATE:Hn,INFLATERAW:Ur,NONE:ao,UNZIP:qr,Z_BEST_COMPRESSION:G_,Z_BEST_SPEED:Z_,Z_BINARY:tg,Z_BLOCK:Nu,Z_BUF_ERROR:W_,Z_DATA_ERROR:H_,Z_DEFAULT_COMPRESSION:Y_,Z_DEFAULT_STRATEGY:eg,Z_DEFLATED:Du,Z_ERRNO:$_,Z_FILTERED:K_,Z_FINISH:Au,Z_FIXED:Q_,Z_FULL_FLUSH:Ou,Z_HUFFMAN_ONLY:X_,Z_NEED_DICT:j_,Z_NO_COMPRESSION:V_,Z_NO_FLUSH:xu,Z_OK:Wn,Z_PARTIAL_FLUSH:Cu,Z_RLE:J_,Z_STREAM_END:Lu,Z_STREAM_ERROR:z_,Z_SYNC_FLUSH:ku,Z_TEXT:rg,Z_TREES:q_,Z_UNKNOWN:ng,Zlib:je},Symbol.toStringTag,{value:"Module"}));function sg(e,t){if(!e)throw new Error(t)}var L={};Object.keys(gf).forEach(function(e){L[e]=gf[e]});L.Z_MIN_WINDOWBITS=8;L.Z_MAX_WINDOWBITS=15;L.Z_DEFAULT_WINDOWBITS=15;L.Z_MIN_CHUNK=64;L.Z_MAX_CHUNK=1/0;L.Z_DEFAULT_CHUNK=16*1024;L.Z_MIN_MEMLEVEL=1;L.Z_MAX_MEMLEVEL=9;L.Z_DEFAULT_MEMLEVEL=8;L.Z_MIN_LEVEL=-1;L.Z_MAX_LEVEL=9;L.Z_DEFAULT_LEVEL=L.Z_DEFAULT_COMPRESSION;var En={Z_OK:L.Z_OK,Z_STREAM_END:L.Z_STREAM_END,Z_NEED_DICT:L.Z_NEED_DICT,Z_ERRNO:L.Z_ERRNO,Z_STREAM_ERROR:L.Z_STREAM_ERROR,Z_DATA_ERROR:L.Z_DATA_ERROR,Z_MEM_ERROR:L.Z_MEM_ERROR,Z_BUF_ERROR:L.Z_BUF_ERROR,Z_VERSION_ERROR:L.Z_VERSION_ERROR};Object.keys(En).forEach(function(e){En[En[e]]=e});function og(e){return new xt(e)}function ag(e){return new Ct(e)}function fg(e){return new At(e)}function lg(e){return new Nt(e)}function ug(e){return new kt(e)}function hg(e){return new Ot(e)}function cg(e){return new Lt(e)}function dg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new xt(t),e,r)}function pg(e,t){return Ft(new xt(t),e)}function _g(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new kt(t),e,r)}function gg(e,t){return Ft(new kt(t),e)}function vg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new At(t),e,r)}function mg(e,t){return Ft(new At(t),e)}function yg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new Lt(t),e,r)}function bg(e,t){return Ft(new Lt(t),e)}function wg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new Ct(t),e,r)}function Eg(e,t){return Ft(new Ct(t),e)}function Sg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new Ot(t),e,r)}function Rg(e,t){return Ft(new Ot(t),e)}function Tg(e,t,r){return typeof t=="function"&&(r=t,t={}),Bt(new Nt(t),e,r)}function xg(e,t){return Ft(new Nt(t),e)}function Bt(e,t,r){var n=[],i=0;e.on("error",o),e.on("end",a),e.end(t),s();function s(){for(var l;(l=e.read())!==null;)n.push(l),i+=l.length;e.once("readable",s)}function o(l){e.removeListener("end",a),e.removeListener("readable",s),r(l)}function a(){var l=F.concat(n,i);n=[],r(null,l),e.close()}}function Ft(e,t){if(typeof t=="string"&&(t=new F(t)),!F.isBuffer(t))throw new TypeError("Not a string or buffer");var r=L.Z_FINISH;return e._processChunk(t,r)}function xt(e){if(!(this instanceof xt))return new xt(e);te.call(this,e,L.DEFLATE)}function Ct(e){if(!(this instanceof Ct))return new Ct(e);te.call(this,e,L.INFLATE)}function kt(e){if(!(this instanceof kt))return new kt(e);te.call(this,e,L.GZIP)}function Ot(e){if(!(this instanceof Ot))return new Ot(e);te.call(this,e,L.GUNZIP)}function At(e){if(!(this instanceof At))return new At(e);te.call(this,e,L.DEFLATERAW)}function Nt(e){if(!(this instanceof Nt))return new Nt(e);te.call(this,e,L.INFLATERAW)}function Lt(e){if(!(this instanceof Lt))return new Lt(e);te.call(this,e,L.UNZIP)}function te(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||L.Z_DEFAULT_CHUNK,xe.call(this,e),e.flush&&e.flush!==L.Z_NO_FLUSH&&e.flush!==L.Z_PARTIAL_FLUSH&&e.flush!==L.Z_SYNC_FLUSH&&e.flush!==L.Z_FULL_FLUSH&&e.flush!==L.Z_FINISH&&e.flush!==L.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||L.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<L.Z_MIN_CHUNK||e.chunkSize>L.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<L.Z_MIN_WINDOWBITS||e.windowBits>L.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<L.Z_MIN_LEVEL||e.level>L.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<L.Z_MIN_MEMLEVEL||e.memLevel>L.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=L.Z_FILTERED&&e.strategy!=L.Z_HUFFMAN_ONLY&&e.strategy!=L.Z_RLE&&e.strategy!=L.Z_FIXED&&e.strategy!=L.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!F.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new L.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(s,o){r._binding=null,r._hadError=!0;var a=new Error(s);a.errno=o,a.code=L.codes[o],r.emit("error",a)};var n=L.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var i=L.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(i=e.strategy),this._binding.init(e.windowBits||L.Z_DEFAULT_WINDOWBITS,n,e.memLevel||L.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new F(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}ue(te,xe);te.prototype.params=function(e,t,r){if(e<L.Z_MIN_LEVEL||e>L.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=L.Z_FILTERED&&t!=L.Z_HUFFMAN_ONLY&&t!=L.Z_RLE&&t!=L.Z_FIXED&&t!=L.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(L.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else M.nextTick(r)};te.prototype.reset=function(){return this._binding.reset()};te.prototype._flush=function(e){this._transform(new F(0),"",e)};te.prototype.flush=function(e,t){var r=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=L.Z_FULL_FLUSH),r.ended)t&&M.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new F(0),"",t)};te.prototype.close=function(e){if(e&&M.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;M.nextTick(function(){t.emit("close")})}};te.prototype._transform=function(e,t,r){var n,i=this._writableState,s=i.ending||i.ended,o=s&&(!e||i.length===e.length);if(!e===null&&!F.isBuffer(e))return r(new Error("invalid input"));o?n=L.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||L.Z_NO_FLUSH)),this._processChunk(e,n,r)};te.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,s=0,o=this,a=typeof r=="function";if(!a){var l=[],f=0,u;this.on("error",function(y){u=y});do var c=this._binding.writeSync(t,e,s,n,this._buffer,this._offset,i);while(!this._hadError&&h(c[0],c[1]));if(this._hadError)throw u;var d=F.concat(l,f);return this.close(),d}var _=this._binding.write(t,e,s,n,this._buffer,this._offset,i);_.buffer=e,_.callback=h;function h(y,b){if(!o._hadError){var p=i-b;if(sg(p>=0,"have should not go down"),p>0){var w=o._buffer.slice(o._offset,o._offset+p);o._offset+=p,a?o.push(w):(l.push(w),f+=w.length)}if((b===0||o._offset>=o._chunkSize)&&(i=o._chunkSize,o._offset=0,o._buffer=new F(o._chunkSize)),b===0){if(s+=n-y,n=y,!a)return!0;var v=o._binding.write(t,e,s,n,o._buffer,o._offset,o._chunkSize);v.callback=h,v.buffer=e;return}if(!a)return!1;r()}}};ue(xt,te);ue(Ct,te);ue(kt,te);ue(Ot,te);ue(At,te);ue(Nt,te);ue(Lt,te);const yr={codes:En,createDeflate:og,createInflate:ag,createDeflateRaw:fg,createInflateRaw:lg,createGzip:ug,createGunzip:hg,createUnzip:cg,deflate:dg,deflateSync:pg,gzip:_g,gzipSync:gg,deflateRaw:vg,deflateRawSync:mg,unzip:yg,unzipSync:bg,inflate:wg,inflateSync:Eg,gunzip:Sg,gunzipSync:Rg,inflateRaw:Tg,inflateRawSync:xg,Deflate:xt,Inflate:Ct,Gzip:kt,Gunzip:Ot,DeflateRaw:At,InflateRaw:Nt,Unzip:Lt,Zlib:te},{defineComponent:Mu,openBlock:Sn,createElementBlock:Rn,Fragment:Cg,renderList:kg,createElementVNode:tt,createTextVNode:vf,toDisplayString:mf}=await lh("vue");function Og(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in e)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(e)}const Ue=Object.create(null);Ue.open="0";Ue.close="1";Ue.ping="2";Ue.pong="3";Ue.message="4";Ue.upgrade="5";Ue.noop="6";const Tn=Object.create(null);Object.keys(Ue).forEach(e=>{Tn[Ue[e]]=e});const Ag={type:"error",data:"parser error"},Iu=({type:e,data:t},r,n)=>{if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){const i=Ng(t);return n(Lg(i,r))}return n(Ue[e]+(t||""))},Ng=e=>F.isBuffer(e)?e:e instanceof ArrayBuffer?F.from(e):F.from(e.buffer,e.byteOffset,e.byteLength),Lg=(e,t)=>t?e:"b"+e.toString("base64"),Pu=(e,t)=>{if(typeof e!="string")return{type:"message",data:yf(e,t)};const r=e.charAt(0);if(r==="b"){const n=F.from(e.substring(1),"base64");return{type:"message",data:yf(n,t)}}return Tn[r]?e.length>1?{type:Tn[r],data:e.substring(1)}:{type:Tn[r]}:Ag},yf=(e,t)=>{const r=F.isBuffer(e);switch(t){case"arraybuffer":return r?Dg(e):e;case"nodebuffer":default:return e}},Dg=e=>{const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e[n];return t},Bu=String.fromCharCode(30),Mg=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((s,o)=>{Iu(s,!1,a=>{n[o]=a,++i===r&&t(n.join(Bu))})})},Ig=(e,t)=>{const r=e.split(Bu),n=[];for(let i=0;i<r.length;i++){const s=Pu(r[i],t);if(n.push(s),s.type==="error")break}return n},Fu=4;function ie(e){if(e)return Pg(e)}function Pg(e){for(var t in ie.prototype)e[t]=ie.prototype[t];return e}ie.prototype.on=ie.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ie.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ie.prototype.off=ie.prototype.removeListener=ie.prototype.removeAllListeners=ie.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ie.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};ie.prototype.emitReserved=ie.prototype.emit;ie.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ie.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Tr=globalThis;function Uu(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const Bg=setTimeout,Fg=clearTimeout;function Vn(e,t){t.useNativeTimers?(e.setTimeoutFn=Bg.bind(Tr),e.clearTimeoutFn=Fg.bind(Tr)):(e.setTimeoutFn=setTimeout.bind(Tr),e.clearTimeoutFn=clearTimeout.bind(Tr))}const Ug=1.33;function qg(e){return typeof e=="string"?jg(e):Math.ceil((e.byteLength||e.size)*Ug)}function jg(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}class $g extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class qu extends ie{constructor(t){super(),this.writable=!1,Vn(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new $g(t,r,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Pu(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const ju="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ws=64,zg={};let bf=0,dn=0,wf;function Ef(e){let t="";do t=ju[e%ws]+t,e=Math.floor(e/ws);while(e>0);return t}function $u(){const e=Ef(+new Date);return e!==wf?(bf=0,wf=e):e+"."+Ef(bf++)}for(;dn<ws;dn++)zg[ju[dn]]=dn;function zu(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Hg(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */var Wg=ye.spawn,xn=Es;Es.XMLHttpRequest=Es;function Es(e){e=e||{};var t=this,r=ct,n=ct,i,s,o={},a=!1,l={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},f=Object.assign({},l),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],c=["TRACE","TRACK","CONNECT"],d=!1,_=!1,h=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null;var b=function(v){return a||v&&u.indexOf(v.toLowerCase())===-1},p=function(v){return v&&c.indexOf(v)===-1};this.open=function(v,E,T,x,C){if(this.abort(),_=!1,h=!1,!p(v))throw new Error("SecurityError: Request method not allowed");o={method:v,url:E.toString(),async:typeof T!="boolean"?!0:T,user:x||null,password:C||null},w(this.OPENED)},this.setDisableHeaderCheck=function(v){a=v},this.setRequestHeader=function(v,E){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!b(v))return console.warn('Refused to set unsafe header "'+v+'"'),!1;if(d)throw new Error("INVALID_STATE_ERR: send flag is true");return f[v]=E,!0},this.getResponseHeader=function(v){return typeof v=="string"&&this.readyState>this.OPENED&&s.headers[v.toLowerCase()]&&!_?s.headers[v.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||_)return"";var v="";for(var E in s.headers)E!=="set-cookie"&&E!=="set-cookie2"&&(v+=E+": "+s.headers[E]+`\r
`);return v.substr(0,v.length-2)},this.getRequestHeader=function(v){return typeof v=="string"&&f[v]?f[v]:""},this.send=function(v){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(d)throw new Error("INVALID_STATE_ERR: send has already been called");var E=!1,T=!1,x=cs.parse(o.url),C;switch(x.protocol){case"https:":E=!0;case"http:":C=x.hostname;break;case"file:":T=!0;break;case void 0:case"":C="localhost";break;default:throw new Error("Protocol not supported.")}if(T){if(o.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(o.async)ye.readFile(unescape(x.pathname),"utf8",function(se,me){se?t.handleError(se,se.errno||-1):(t.status=200,t.responseText=me,w(t.DONE))});else try{this.responseText=ye.readFileSync(unescape(x.pathname),"utf8"),this.status=200,w(t.DONE)}catch(se){this.handleError(se,se.errno||-1)}return}var k=x.port||(E?443:80),A=x.pathname+(x.search?x.search:"");if(f.Host=C,E&&k===443||k===80||(f.Host+=":"+x.port),o.user){typeof o.password>"u"&&(o.password="");var P=new F(o.user+":"+o.password);f.Authorization="Basic "+P.toString("base64")}o.method==="GET"||o.method==="HEAD"?v=null:v?(f["Content-Length"]=F.isBuffer(v)?v.length:F.byteLength(v),f["Content-Type"]||(f["Content-Type"]="text/plain;charset=UTF-8")):o.method==="POST"&&(f["Content-Length"]=0);var D=e.agent||!1,B={host:C,port:k,path:A,method:o.method,headers:f,agent:D};if(E&&(B.pfx=e.pfx,B.key=e.key,B.passphrase=e.passphrase,B.cert=e.cert,B.ca=e.ca,B.ciphers=e.ciphers,B.rejectUnauthorized=e.rejectUnauthorized!==!1),_=!1,o.async){var U=E?n.request:r.request;d=!0,t.dispatchEvent("readystatechange");var G=function(se){if(s=se,s.statusCode===302||s.statusCode===303||s.statusCode===307){o.url=s.headers.location;var me=cs.parse(o.url);C=me.hostname;var he={hostname:me.hostname,port:me.port,path:me.path,method:s.statusCode===303?"GET":o.method,headers:f};E&&(he.pfx=e.pfx,he.key=e.key,he.passphrase=e.passphrase,he.cert=e.cert,he.ca=e.ca,he.ciphers=e.ciphers,he.rejectUnauthorized=e.rejectUnauthorized!==!1),i=U(he,G).on("error",ne),i.end();return}s&&s.setEncoding&&s.setEncoding("utf8"),w(t.HEADERS_RECEIVED),t.status=s.statusCode,s.on("data",function(Le){Le&&(t.responseText+=Le),d&&w(t.LOADING)}),s.on("end",function(){d&&(d=!1,w(t.DONE))}),s.on("error",function(Le){t.handleError(Le)})},ne=function(se){t.handleError(se)};i=U(B,G).on("error",ne),e.autoUnref&&i.on("socket",se=>{se.unref()}),v&&i.write(v),i.end(),t.dispatchEvent("loadstart")}else{var z=".node-xmlhttprequest-content-"+M.pid,J=".node-xmlhttprequest-sync-"+M.pid;ye.writeFileSync(J,"","utf8");for(var Ce="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(E?"s":"")+".request;var options = "+JSON.stringify(B)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+z+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+J+"');});response.on('error', function(error) {fs.writeFileSync('"+z+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+J+"');});}).on('error', function(error) {fs.writeFileSync('"+z+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+J+"');});"+(v?"req.write('"+JSON.stringify(v).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Ee=Wg(M.argv[0],["-e",Ce]);ye.existsSync(J););if(t.responseText=ye.readFileSync(z,"utf8"),Ee.stdin.end(),ye.unlinkSync(z),t.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Xe=t.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");t.handleError(Xe,503)}else t.status=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),t.responseText=t.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),w(t.DONE)}},this.handleError=function(v,E){this.status=E||0,this.statusText=v,this.responseText=v.stack,_=!0,w(this.DONE)},this.abort=function(){i&&(i.abort(),i=null),f=Object.assign({},l),this.responseText="",this.responseXML="",_=h=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||d)&&this.readyState!==this.DONE&&(d=!1,w(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(v,E){v in y||(y[v]=[]),y[v].push(E)},this.removeEventListener=function(v,E){v in y&&(y[v]=y[v].filter(function(T){return T!==E}))},this.dispatchEvent=function(v){if(typeof t["on"+v]=="function"&&(this.readyState===this.DONE?setImmediate(function(){t["on"+v]()}):t["on"+v]()),v in y)for(let E=0,T=y[v].length;E<T;E++)this.readyState===this.DONE?setImmediate(function(){y[v][E].call(t)}):y[v][E].call(t)};var w=function(v){if(!(t.readyState===v||t.readyState===t.UNSENT&&h)&&(t.readyState=v,(o.async||t.readyState<t.OPENED||t.readyState===t.DONE)&&t.dispatchEvent("readystatechange"),t.readyState===t.DONE)){let E;h?E="abort":_?E="error":E="load",t.dispatchEvent(E),t.dispatchEvent("loadend")}}}var Vg=Og({__proto__:null,default:xn,__moduleExports:xn},[xn]);const Hu=xn||Vg;function Zg(){}const Gg=function(){return new Hu({xdomain:!1}).responseType!=null}();class Yg extends qu{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==n}const r=t&&t.forceBase64;this.supportsBinary=Gg&&!r}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ig(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Mg(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const r=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=$u()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(r==="https"&&Number(this.opts.port)!==443||r==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const i=zu(t),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Fe(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Fe extends ie{constructor(t,r){super(),Vn(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.create()}create(){const t=Uu(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const r=this.xhr=new Hu(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document<"u"&&(this.index=Fe.requestsCount++,Fe.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Zg,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Fe.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Fe.requestsCount=0;Fe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Sf);else if(typeof addEventListener=="function"){const e="onpagehide"in Tr?"pagehide":"unload";addEventListener(e,Sf,!1)}}function Sf(){for(let e in Fe.requests)Fe.requests.hasOwnProperty(e)&&Fe.requests[e].abort()}function Wu(e,t,r){return r={path:t,exports:{},require:function(n,i){return Kg(n,i??r.path)}},e(r,r.exports),r.exports}function Kg(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ut={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:F.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}},jr=Wu(function(e){const{EMPTY_BUFFER:t}=Ut;function r(a,l){if(a.length===0)return t;if(a.length===1)return a[0];const f=F.allocUnsafe(l);let u=0;for(let c=0;c<a.length;c++){const d=a[c];f.set(d,u),u+=d.length}return u<l?f.slice(0,u):f}function n(a,l,f,u,c){for(let d=0;d<c;d++)f[u+d]=a[d]^l[d&3]}function i(a,l){for(let f=0;f<a.length;f++)a[f]^=l[f&3]}function s(a){return a.byteLength===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)}function o(a){if(o.readOnly=!0,F.isBuffer(a))return a;let l;return a instanceof ArrayBuffer?l=F.from(a):ArrayBuffer.isView(a)?l=F.from(a.buffer,a.byteOffset,a.byteLength):(l=F.from(a),o.readOnly=!1),l}try{const a=Qh();e.exports={concat:r,mask(l,f,u,c,d){d<48?n(l,f,u,c,d):a.mask(l,f,u,c,d)},toArrayBuffer:s,toBuffer:o,unmask(l,f){l.length<32?i(l,f):a.unmask(l,f)}}}catch{e.exports={concat:r,mask:n,toArrayBuffer:s,toBuffer:o,unmask:i}}});const Rf=Symbol("kDone"),es=Symbol("kRun");class Xg{constructor(t){this[Rf]=()=>{this.pending--,this[es]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[es]()}[es](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[Rf])}}}var Jg=Xg;const{kStatusCode:Vu}=Ut,Qg=F.from([0,0,255,255]),Pn=Symbol("permessage-deflate"),We=Symbol("total-length"),xr=Symbol("callback"),rt=Symbol("buffers"),Cn=Symbol("error");let pn;class ev{constructor(t,r,n){if(this._maxPayload=n|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!pn){const i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;pn=new Jg(i)}}static get extensionName(){return"permessage-deflate"}offer(){const t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const t=this._deflate[xr];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){const r=this._options,n=t.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(t){const r=t[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(t){return t.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){const s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){const s=+i;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=s}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),t}decompress(t,r,n){pn.add(i=>{this._decompress(t,r,(s,o)=>{i(),n(s,o)})})}compress(t,r,n){pn.add(i=>{this._compress(t,r,(s,o)=>{i(),n(s,o)})})}_decompress(t,r,n){const i=this._isServer?"client":"server";if(!this._inflate){const s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?yr.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=yr.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Pn]=this,this._inflate[We]=0,this._inflate[rt]=[],this._inflate.on("error",rv),this._inflate.on("data",Zu)}this._inflate[xr]=n,this._inflate.write(t),r&&this._inflate.write(Qg),this._inflate.flush(()=>{const s=this._inflate[Cn];if(s){this._inflate.close(),this._inflate=null,n(s);return}const o=jr.concat(this._inflate[rt],this._inflate[We]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[We]=0,this._inflate[rt]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(t,r,n){const i=this._isServer?"server":"client";if(!this._deflate){const s=`${i}_max_window_bits`,o=typeof this.params[s]!="number"?yr.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=yr.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[We]=0,this._deflate[rt]=[],this._deflate.on("data",tv)}this._deflate[xr]=n,this._deflate.write(t),this._deflate.flush(yr.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=jr.concat(this._deflate[rt],this._deflate[We]);r&&(s=s.slice(0,s.length-4)),this._deflate[xr]=null,this._deflate[We]=0,this._deflate[rt]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,s)})}}var ae=ev;function tv(e){this[rt].push(e),this[We]+=e.length}function Zu(e){if(this[We]+=e.length,this[Pn]._maxPayload<1||this[We]<=this[Pn]._maxPayload){this[rt].push(e);return}this[Cn]=new RangeError("Max payload size exceeded"),this[Cn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Cn][Vu]=1009,this.removeListener("data",Zu),this.reset()}function rv(e){this[Pn]._inflate=null,e[Vu]=1007,this[xr](e)}var Zn=Wu(function(e){const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(i){return i>=1e3&&i<=1014&&i!==1004&&i!==1005&&i!==1006||i>=3e3&&i<=4999}function n(i){const s=i.length;let o=0;for(;o<s;)if(!(i[o]&128))o++;else if((i[o]&224)===192){if(o+1===s||(i[o+1]&192)!==128||(i[o]&254)===192)return!1;o+=2}else if((i[o]&240)===224){if(o+2>=s||(i[o+1]&192)!==128||(i[o+2]&192)!==128||i[o]===224&&(i[o+1]&224)===128||i[o]===237&&(i[o+1]&224)===160)return!1;o+=3}else if((i[o]&248)===240){if(o+3>=s||(i[o+1]&192)!==128||(i[o+2]&192)!==128||(i[o+3]&192)!==128||i[o]===240&&(i[o+1]&240)===128||i[o]===244&&i[o+1]>143||i[o]>244)return!1;o+=4}else return!1;return!0}try{const i=rc();e.exports={isValidStatusCode:r,isValidUTF8(s){return s.length<150?n(s):i(s)},tokenChars:t}}catch{e.exports={isValidStatusCode:r,isValidUTF8:n,tokenChars:t}}});const{Writable:nv}=Ne,{BINARY_TYPES:iv,EMPTY_BUFFER:Tf,kStatusCode:sv,kWebSocket:ov}=Ut,{concat:ts,toArrayBuffer:av,unmask:fv}=jr,{isValidStatusCode:lv,isValidUTF8:xf}=Zn,br=0,Cf=1,kf=2,Of=3,rs=4,uv=5;class hv extends nv{constructor(t={}){super(),this._binaryType=t.binaryType||iv[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[ov]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=br,this._loop=!1}_write(t,r,n){if(this._opcode===8&&this._state==br)return n();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(n)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const n=this._buffers[0];return this._buffers[0]=n.slice(t),n.slice(0,t)}const r=F.allocUnsafe(t);do{const n=this._buffers[0],i=r.length-t;t>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,t),i),this._buffers[0]=n.slice(t)),t-=n.length}while(t>0);return r}startLoop(t){let r;this._loop=!0;do switch(this._state){case br:r=this.getInfo();break;case Cf:r=this.getPayloadLength16();break;case kf:r=this.getPayloadLength64();break;case Of:this.getMask();break;case rs:r=this.getData(t);break;default:this._loop=!1;return}while(this._loop);t(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}const t=this.consume(2);if(t[0]&48)return this._loop=!1,oe(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const r=(t[0]&64)===64;if(r&&!this._extensions[ae.extensionName])return this._loop=!1,oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(r)return this._loop=!1,oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,oe(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,oe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,oe(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,oe(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,oe(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,oe(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,oe(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,oe(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=Cf;else if(this._payloadLength===127)this._state=kf;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}const t=this.consume(8),r=t.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,oe(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,oe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Of:this._state=rs}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=rs}getData(t){let r=Tf;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&fv(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=uv,this.decompress(r,t);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(t,r){this._extensions[ae.extensionName].decompress(t,this._fin,(i,s)=>{if(i)return r(i);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(oe(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(s)}const o=this.dataMessage();if(o)return r(o);this.startLoop(r)})}dataMessage(){if(this._fin){const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=ts(r,t):this._binaryType==="arraybuffer"?n=av(ts(r,t)):n=r,this.emit("message",n,!0)}else{const n=ts(r,t);if(!this._skipUTF8Validation&&!xf(n))return this._loop=!1,oe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=br}controlMessage(t){if(this._opcode===8)if(this._loop=!1,t.length===0)this.emit("conclude",1005,Tf),this.end();else{if(t.length===1)return oe(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const r=t.readUInt16BE(0);if(!lv(r))return oe(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const n=t.slice(2);if(!this._skipUTF8Validation&&!xf(n))return oe(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end()}}else this._opcode===9?this.emit("ping",t):this.emit("pong",t);this._state=br}}var Gu=hv;function oe(e,t,r,n,i){const s=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,oe),s.code=i,s[sv]=n,s}const{randomFillSync:cv}=ye,{EMPTY_BUFFER:dv}=Ut,{isValidStatusCode:pv}=Zn,{mask:Af,toBuffer:ze}=jr,_t=F.alloc(4);class nt{constructor(t,r){this._extensions=r||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,r){const n=r.mask&&r.readOnly;let i=r.mask?6:2,s=t.length;t.length>=65536?(i+=8,s=127):t.length>125&&(i+=2,s=126);const o=F.allocUnsafe(n?t.length+i:i);return o[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(o[0]|=64),o[1]=s,s===126?o.writeUInt16BE(t.length,2):s===127&&(o.writeUInt32BE(0,2),o.writeUInt32BE(t.length,6)),r.mask?(cv(_t,0,4),o[1]|=128,o[i-4]=_t[0],o[i-3]=_t[1],o[i-2]=_t[2],o[i-1]=_t[3],n?(Af(t,_t,o,i,t.length),[o]):(Af(t,_t,t,0,t.length),[o,t])):[o,t]}close(t,r,n,i){let s;if(t===void 0)s=dv;else{if(typeof t!="number"||!pv(t))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=F.allocUnsafe(2),s.writeUInt16BE(t,0);else{const o=F.byteLength(r);if(o>123)throw new RangeError("The message must not be greater than 123 bytes");s=F.allocUnsafe(2+o),s.writeUInt16BE(t,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}this._deflating?this.enqueue([this.doClose,s,n,i]):this.doClose(s,n,i)}doClose(t,r,n){this.sendFrame(nt.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:r,readOnly:!1}),n)}ping(t,r,n){const i=ze(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,r,ze.readOnly,n]):this.doPing(i,r,ze.readOnly,n)}doPing(t,r,n,i){this.sendFrame(nt.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:r,readOnly:n}),i)}pong(t,r,n){const i=ze(t);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,r,ze.readOnly,n]):this.doPong(i,r,ze.readOnly,n)}doPong(t,r,n,i){this.sendFrame(nt.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:r,readOnly:n}),i)}send(t,r,n){const i=ze(t),s=this._extensions[ae.extensionName];let o=r.binary?2:1,a=r.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),r.fin&&(this._firstFragment=!0),s){const l={fin:r.fin,rsv1:a,opcode:o,mask:r.mask,readOnly:ze.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,l,n]):this.dispatch(i,this._compress,l,n)}else this.sendFrame(nt.frame(i,{fin:r.fin,rsv1:!1,opcode:o,mask:r.mask,readOnly:ze.readOnly}),n)}dispatch(t,r,n,i){if(!r){this.sendFrame(nt.frame(t,n),i);return}const s=this._extensions[ae.extensionName];this._bufferedBytes+=t.length,this._deflating=!0,s.compress(t,n.fin,(o,a)=>{if(this._socket.destroyed){const l=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(l);for(let f=0;f<this._queue.length;f++){const u=this._queue[f][4];typeof u=="function"&&u(l)}return}this._bufferedBytes-=t.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(nt.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const t=this._queue.shift();this._bufferedBytes-=t[1].length,Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,r){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],r),this._socket.uncork()):this._socket.write(t[0],r)}}var Yu=nt;const{kForOnEventAttribute:ns,kListener:Nf}=Ut,Lf=Symbol("kCode"),Df=Symbol("kData"),Mf=Symbol("kError"),If=Symbol("kMessage"),Pf=Symbol("kReason"),Qt=Symbol("kTarget"),Bf=Symbol("kType"),Ff=Symbol("kWasClean");class qt{constructor(t){this[Qt]=null,this[Bf]=t}get target(){return this[Qt]}get type(){return this[Bf]}}Object.defineProperty(qt.prototype,"target",{enumerable:!0});Object.defineProperty(qt.prototype,"type",{enumerable:!0});class Zr extends qt{constructor(t,r={}){super(t),this[Lf]=r.code===void 0?0:r.code,this[Pf]=r.reason===void 0?"":r.reason,this[Ff]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[Lf]}get reason(){return this[Pf]}get wasClean(){return this[Ff]}}Object.defineProperty(Zr.prototype,"code",{enumerable:!0});Object.defineProperty(Zr.prototype,"reason",{enumerable:!0});Object.defineProperty(Zr.prototype,"wasClean",{enumerable:!0});class Gn extends qt{constructor(t,r={}){super(t),this[Mf]=r.error===void 0?null:r.error,this[If]=r.message===void 0?"":r.message}get error(){return this[Mf]}get message(){return this[If]}}Object.defineProperty(Gn.prototype,"error",{enumerable:!0});Object.defineProperty(Gn.prototype,"message",{enumerable:!0});class fo extends qt{constructor(t,r={}){super(t),this[Df]=r.data===void 0?null:r.data}get data(){return this[Df]}}Object.defineProperty(fo.prototype,"data",{enumerable:!0});const _v={addEventListener(e,t,r={}){let n;if(e==="message")n=function(s,o){const a=new fo("message",{data:o?s:s.toString()});a[Qt]=this,t.call(this,a)};else if(e==="close")n=function(s,o){const a=new Zr("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Qt]=this,t.call(this,a)};else if(e==="error")n=function(s){const o=new Gn("error",{error:s,message:s.message});o[Qt]=this,t.call(this,o)};else if(e==="open")n=function(){const s=new qt("open");s[Qt]=this,t.call(this,s)};else return;n[ns]=!!r[ns],n[Nf]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[Nf]===t&&!r[ns]){this.removeListener(e,r);break}}};var gv={CloseEvent:Zr,ErrorEvent:Gn,Event:qt,EventTarget:_v,MessageEvent:fo};const{tokenChars:wr}=Zn;function Me(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}function vv(e){const t=Object.create(null);let r=Object.create(null),n=!1,i=!1,s=!1,o,a,l=-1,f=-1,u=-1,c=0;for(;c<e.length;c++)if(f=e.charCodeAt(c),o===void 0)if(u===-1&&wr[f]===1)l===-1&&(l=c);else if(c!==0&&(f===32||f===9))u===-1&&l!==-1&&(u=c);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);u===-1&&(u=c);const _=e.slice(l,u);f===44?(Me(t,_,r),r=Object.create(null)):o=_,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);else if(a===void 0)if(u===-1&&wr[f]===1)l===-1&&(l=c);else if(f===32||f===9)u===-1&&l!==-1&&(u=c);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);u===-1&&(u=c),Me(r,e.slice(l,u),!0),f===44&&(Me(t,o,r),r=Object.create(null),o=void 0),l=u=-1}else if(f===61&&l!==-1&&u===-1)a=e.slice(l,c),l=u=-1;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(i){if(wr[f]!==1)throw new SyntaxError(`Unexpected character at index ${c}`);l===-1?l=c:n||(n=!0),i=!1}else if(s)if(wr[f]===1)l===-1&&(l=c);else if(f===34&&l!==-1)s=!1,u=c;else if(f===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(f===34&&e.charCodeAt(c-1)===61)s=!0;else if(u===-1&&wr[f]===1)l===-1&&(l=c);else if(l!==-1&&(f===32||f===9))u===-1&&(u=c);else if(f===59||f===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);u===-1&&(u=c);let _=e.slice(l,u);n&&(_=_.replace(/\\/g,""),n=!1),Me(r,a,_),f===44&&(Me(t,o,r),r=Object.create(null),o=void 0),a=void 0,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);if(l===-1||s||f===32||f===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=c);const d=e.slice(l,u);return o===void 0?Me(t,d,r):(a===void 0?Me(r,d,!0):n?Me(r,a,d.replace(/\\/g,"")):Me(r,a,d),Me(t,o,r)),t}function mv(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(n=>[t].concat(Object.keys(n).map(i=>{let s=n[i];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?i:`${i}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}var Ss={format:mv,parse:vv};const{randomBytes:yv,createHash:bv}=ye,{URL:is}=cs,{BINARY_TYPES:Uf,EMPTY_BUFFER:_n,GUID:wv,kForOnEventAttribute:ss,kListener:Ev,kStatusCode:Sv,kWebSocket:_e,NOOP:Ku}=Ut,{EventTarget:{addEventListener:Rv,removeEventListener:Tv}}=gv,{format:xv,parse:Cv}=Ss,{toBuffer:kv}=jr,Ke=["CONNECTING","OPEN","CLOSING","CLOSED"],Ov=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,os=[8,13],Av=30*1e3;class $ extends j{constructor(t,r,n){super(),this._binaryType=Uf[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=_n,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=$.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),Xu(this,t,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(t){Uf.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,r,n){const i=new Gu({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new Yu(t,this._extensions),this._receiver=i,this._socket=t,i[_e]=this,t[_e]=this,i.on("conclude",Dv),i.on("drain",Mv),i.on("error",Iv),i.on("message",Pv),i.on("ping",Bv),i.on("pong",Fv),t.setTimeout(0),t.setNoDelay(),r.length>0&&t.unshift(r),t.on("close",Qu),t.on("data",Yn),t.on("end",eh),t.on("error",th),this._readyState=$.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=$.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ae.extensionName]&&this._extensions[ae.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=$.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,r){if(this.readyState!==$.CLOSED){if(this.readyState===$.CONNECTING){const n="WebSocket was closed before the connection was established";return Se(this,this._req,n)}if(this.readyState===$.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=$.CLOSING,this._sender.close(t,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),Av)}}ping(t,r,n){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==$.OPEN){as(this,t,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(t||_n,r,n)}pong(t,r,n){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(n=t,t=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==$.OPEN){as(this,t,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(t||_n,r,n)}send(t,r,n){if(this.readyState===$.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof t=="number"&&(t=t.toString()),this.readyState!==$.OPEN){as(this,t,n);return}const i={binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[ae.extensionName]||(i.compress=!1),this._sender.send(t||_n,i,n)}terminate(){if(this.readyState!==$.CLOSED){if(this.readyState===$.CONNECTING){const t="WebSocket was closed before the connection was established";return Se(this,this._req,t)}this._socket&&(this._readyState=$.CLOSING,this._socket.destroy())}}}Object.defineProperty($,"CONNECTING",{enumerable:!0,value:Ke.indexOf("CONNECTING")});Object.defineProperty($.prototype,"CONNECTING",{enumerable:!0,value:Ke.indexOf("CONNECTING")});Object.defineProperty($,"OPEN",{enumerable:!0,value:Ke.indexOf("OPEN")});Object.defineProperty($.prototype,"OPEN",{enumerable:!0,value:Ke.indexOf("OPEN")});Object.defineProperty($,"CLOSING",{enumerable:!0,value:Ke.indexOf("CLOSING")});Object.defineProperty($.prototype,"CLOSING",{enumerable:!0,value:Ke.indexOf("CLOSING")});Object.defineProperty($,"CLOSED",{enumerable:!0,value:Ke.indexOf("CLOSED")});Object.defineProperty($.prototype,"CLOSED",{enumerable:!0,value:Ke.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(e=>{Object.defineProperty($.prototype,e,{enumerable:!0})});["open","error","close","message"].forEach(e=>{Object.defineProperty($.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[ss])return t[Ev];return null},set(t){for(const r of this.listeners(e))if(r[ss]){this.removeListener(e,r);break}typeof t=="function"&&this.addEventListener(e,t,{[ss]:!0})}})});$.prototype.addEventListener=Rv;$.prototype.removeEventListener=Tv;var qe=$;function Xu(e,t,r,n){const i={protocolVersion:os[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!os.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${os.join(", ")})`);let s;if(t instanceof is)s=t,e._url=t.href;else{try{s=new is(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const o=s.protocol==="wss:",a=s.protocol==="ws+unix:";if(s.protocol!=="ws:"&&!o&&!a)throw new SyntaxError(`The URL's protocol must be one of "ws:", "wss:", or "ws+unix:"`);if(a&&!s.pathname)throw new SyntaxError("The URL's pathname is empty");if(s.hash)throw new SyntaxError("The URL contains a fragment identifier");const l=o?443:80,f=yv(16).toString("base64"),u=ct.get,c=new Set;let d;if(i.createConnection=o?Lv:Nv,i.defaultPort=i.defaultPort||l,i.port=s.port||l,i.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,i.headers={"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket",...i.headers},i.path=s.pathname+s.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(d=new ae(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=xv({[ae.extensionName]:d.offer()})),r.length){for(const h of r){if(typeof h!="string"||!Ov.test(h)||c.has(h))throw new SyntaxError("An invalid or duplicated subprotocol was specified");c.add(h)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(s.username||s.password)&&(i.auth=`${s.username}:${s.password}`),a){const h=i.path.split(":");i.socketPath=h[0],i.path=h[1]}let _=e._req=u(i);i.timeout&&_.on("timeout",()=>{Se(e,_,"Opening handshake has timed out")}),_.on("error",h=>{_===null||_.aborted||(_=e._req=null,e._readyState=$.CLOSING,e.emit("error",h),e.emitClose())}),_.on("response",h=>{const y=h.headers.location,b=h.statusCode;if(y&&i.followRedirects&&b>=300&&b<400){if(++e._redirects>i.maxRedirects){Se(e,_,"Maximum redirects exceeded");return}_.abort();const p=new is(y,t);Xu(e,p,r,n)}else e.emit("unexpected-response",_,h)||Se(e,_,`Unexpected server response: ${h.statusCode}`)}),_.on("upgrade",(h,y,b)=>{if(e.emit("upgrade",h),e.readyState!==$.CONNECTING)return;_=e._req=null;const p=bv("sha1").update(f+wv).digest("base64");if(h.headers["sec-websocket-accept"]!==p){Se(e,y,"Invalid Sec-WebSocket-Accept header");return}const w=h.headers["sec-websocket-protocol"];let v;if(w!==void 0?c.size?c.has(w)||(v="Server sent an invalid subprotocol"):v="Server sent a subprotocol but none was requested":c.size&&(v="Server sent no subprotocol"),v){Se(e,y,v);return}w&&(e._protocol=w);const E=h.headers["sec-websocket-extensions"];if(E!==void 0){if(!d){Se(e,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let T;try{T=Cv(E)}catch{Se(e,y,"Invalid Sec-WebSocket-Extensions header");return}const x=Object.keys(T);if(x.length!==1||x[0]!==ae.extensionName){Se(e,y,"Server indicated an extension that was not requested");return}try{d.accept(T[ae.extensionName])}catch{Se(e,y,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[ae.extensionName]=d}e.setSocket(y,b,{maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})})}function Nv(e){return e.path=e.socketPath,ye.connect(e)}function Lv(e){return e.path=void 0,!e.servername&&e.servername!==""&&(e.servername=ye.isIP(e.host)?"":e.host),ye.connect(e)}function Se(e,t,r){e._readyState=$.CLOSING;const n=new Error(r);Error.captureStackTrace(n,Se),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function as(e,t,r){if(t){const n=kv(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(r){const n=new Error(`WebSocket is not open: readyState ${e.readyState} (${Ke[e.readyState]})`);r(n)}}function Dv(e,t){const r=this[_e];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,r._socket[_e]!==void 0&&(r._socket.removeListener("data",Yn),M.nextTick(Ju,r._socket),e===1005?r.close():r.close(e,t))}function Mv(){this[_e]._socket.resume()}function Iv(e){const t=this[_e];t._socket[_e]!==void 0&&(t._socket.removeListener("data",Yn),M.nextTick(Ju,t._socket),t.close(e[Sv])),t.emit("error",e)}function qf(){this[_e].emitClose()}function Pv(e,t){this[_e].emit("message",e,t)}function Bv(e){const t=this[_e];t.pong(e,!t._isServer,Ku),t.emit("ping",e)}function Fv(e){this[_e].emit("pong",e)}function Ju(e){e.resume()}function Qu(){const e=this[_e];this.removeListener("close",Qu),this.removeListener("data",Yn),this.removeListener("end",eh),e._readyState=$.CLOSING;let t;!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null&&e._receiver.write(t),e._receiver.end(),this[_e]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",qf),e._receiver.on("finish",qf))}function Yn(e){this[_e]._receiver.write(e)||this.pause()}function eh(){const e=this[_e];e._readyState=$.CLOSING,e._receiver.end(),this.end()}function th(){const e=this[_e];this.removeListener("error",th),this.on("error",Ku),e&&(e._readyState=$.CLOSING,this.destroy())}const{Duplex:Uv}=Ne;function jf(e){e.emit("close")}function qv(){!this.destroyed&&this._writableState.finished&&this.destroy()}function rh(e){this.removeListener("error",rh),this.destroy(),this.listenerCount("error")===0&&this.emit("error",e)}function jv(e,t){let r=!0,n=!0;function i(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",i)}):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",i));const s=new Uv({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(a,l){const f=!l&&s._readableState.objectMode?a.toString():a;s.push(f)||(r=!1,e._socket.pause())}),e.once("error",function(a){s.destroyed||(n=!1,s.destroy(a))}),e.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(o,a){if(e.readyState===e.CLOSED){a(o),M.nextTick(jf,s);return}let l=!1;e.once("error",function(u){l=!0,a(u)}),e.once("close",function(){l||a(o),M.nextTick(jf,s)}),n&&e.terminate()},s._final=function(o){if(e.readyState===e.CONNECTING){e.once("open",function(){s._final(o)});return}e._socket!==null&&(e._socket._writableState.finished?(o(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",function(){o()}),e.close()))},s._read=function(){e.readyState===e.OPEN&&!r&&(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},s._write=function(o,a,l){if(e.readyState===e.CONNECTING){e.once("open",function(){s._write(o,a,l)});return}e.send(o,l)},s.on("end",qv),s.on("error",rh),s}var $v=jv;const{tokenChars:zv}=Zn;function Hv(e){const t=new Set;let r=-1,n=-1,i=0;for(i;i<e.length;i++){const o=e.charCodeAt(i);if(n===-1&&zv[o]===1)r===-1&&(r=i);else if(i!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=i);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);const a=e.slice(r,n);if(t.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);t.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");const s=e.slice(r,i);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return t.add(s),t}var Wv={parse:Hv};const{createHash:Vv}=ye,{GUID:Zv,kWebSocket:Gv}=Ut,Yv=/^[+/0-9A-Za-z]{22}==$/,$f=0,zf=1,nh=2;class Kv extends j{constructor(t,r){if(super(),t={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...t},t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=ct.createServer((n,i)=>{const s=ct.STATUS_CODES[426];i.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),i.end(s)}),this._server.listen(t.port,t.host,t.backlog,r)):t.server&&(this._server=t.server),this._server){const n=this.emit.bind(this,"connection");this._removeListeners=Jv(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,s,o)=>{this.handleUpgrade(i,s,o,n)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=$f}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===nh){t&&this.once("close",()=>{t(new Error("The server is not running"))}),M.nextTick(Er,this);return}if(t&&this.once("close",t),this._state!==zf)if(this._state=zf,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:M.nextTick(Er,this):M.nextTick(Er,this);else{const r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Er(this)})}}shouldHandle(t){if(this.options.path){const r=t.url.indexOf("?");if((r!==-1?t.url.slice(0,r):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,r,n,i){r.on("error",Rs);const s=t.headers["sec-websocket-key"]!==void 0?t.headers["sec-websocket-key"]:!1,o=+t.headers["sec-websocket-version"];if(t.method!=="GET"||t.headers.upgrade.toLowerCase()!=="websocket"||!s||!Yv.test(s)||o!==8&&o!==13||!this.shouldHandle(t))return Gt(r,400);const a=t.headers["sec-websocket-protocol"];let l=new Set;if(a!==void 0)try{l=Wv.parse(a)}catch{return Gt(r,400)}const f=t.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&f!==void 0){const c=new ae(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const d=Ss.parse(f);d[ae.extensionName]&&(c.accept(d[ae.extensionName]),u[ae.extensionName]=c)}catch{return Gt(r,400)}}if(this.options.verifyClient){const c={origin:t.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(c,(d,_,h,y)=>{if(!d)return Gt(r,_||401,h,y);this.completeUpgrade(u,s,l,t,r,n,i)});return}if(!this.options.verifyClient(c))return Gt(r,401)}this.completeUpgrade(u,s,l,t,r,n,i)}completeUpgrade(t,r,n,i,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[Gv])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>$f)return Gt(s,503);const f=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Vv("sha1").update(r+Zv).digest("base64")}`],u=new qe(null);if(n.size){const c=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;c&&(f.push(`Sec-WebSocket-Protocol: ${c}`),u._protocol=c)}if(t[ae.extensionName]){const c=t[ae.extensionName].params,d=Ss.format({[ae.extensionName]:[c]});f.push(`Sec-WebSocket-Extensions: ${d}`),u._extensions=t}this.emit("headers",f,i),s.write(f.concat(`\r
`).join(`\r
`)),s.removeListener("error",Rs),u.setSocket(s,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&M.nextTick(Er,this)})),a(u,i)}}var Xv=Kv;function Jv(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}function Er(e){e._state=nh,e.emit("close")}function Rs(){this.destroy()}function Gt(e,t,r,n){e.writable&&(r=r||ct.STATUS_CODES[t],n={Connection:"close","Content-Type":"text/html","Content-Length":F.byteLength(r),...n},e.write(`HTTP/1.1 ${t} ${ct.STATUS_CODES[t]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)),e.removeListener("error",Rs),e.destroy()}qe.createWebSocketStream=$v;qe.Server=Xv;qe.Receiver=Gu;qe.Sender=Yu;qe.WebSocket=qe;qe.WebSocketServer=qe.Server;var Qv=qe;const gn=Qv,Hf=!1,em="nodebuffer",ih=M.nextTick,Wf=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tm extends qu{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=Wf?{}:Uu(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Hf&&!Wf?r?new gn(t,r):new gn(t):new gn(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||em,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;Iu(n,this.supportsBinary,s=>{const o={};n.options&&(o.compress=n.options.compress),this.opts.perMessageDeflate&&(typeof s=="string"?F.byteLength(s):s.length)<this.opts.perMessageDeflate.threshold&&(o.compress=!1);try{Hf||this.ws.send(s,o)}catch{}i&&ih(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const r=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(r==="wss"&&Number(this.opts.port)!==443||r==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=$u()),this.supportsBinary||(t.b64=1);const i=zu(t),s=this.opts.hostname.indexOf(":")!==-1;return r+"://"+(s?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}check(){return!!gn}}const rm={websocket:tm,polling:Yg},nm=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,im=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ts(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=nm.exec(e||""),s={},o=14;for(;o--;)s[im[o]]=i[o]||"";return r!=-1&&n!=-1&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=sm(s,s.path),s.queryKey=om(s,s.query),s}function sm(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function om(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(r[i]=s)}),r}class st extends ie{constructor(t,r={}){super(),t&&typeof t=="object"&&(r=t,t=null),t?(t=Ts(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=Ts(r.host).host),Vn(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Hg(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Fu,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new rm[t](n)}open(){let t;if(this.opts.rememberUpgrade&&st.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;st.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",c=>{if(!n)if(c.type==="pong"&&c.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;st.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=r.name,this.emitReserved("upgradeError",d)}}))};function s(){n||(n=!0,u(),r.close(),r=null)}const o=c=>{const d=new Error("probe error: "+c);d.transport=r.name,s(),this.emitReserved("upgradeError",d)};function a(){o("transport closed")}function l(){o("socket closed")}function f(c){r&&c.name!==r.name&&s()}const u=()=>{r.removeListener("open",i),r.removeListener("error",o),r.removeListener("close",a),this.off("close",l),this.off("upgrading",f)};r.once("open",i),r.once("error",o),r.once("close",a),this.once("close",l),this.once("upgrading",f),r.open()}onOpen(){if(this.readyState="open",st.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=qg(i)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:t,data:r,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){st.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const i=t.length;for(;n<i;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}st.protocol=Fu;function am(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Ts(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const fm=typeof ArrayBuffer=="function",lm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,sh=Object.prototype.toString,um=typeof Blob=="function"||typeof Blob<"u"&&sh.call(Blob)==="[object BlobConstructor]",hm=typeof File=="function"||typeof File<"u"&&sh.call(File)==="[object FileConstructor]";function lo(e){return fm&&(e instanceof ArrayBuffer||lm(e))||um&&e instanceof Blob||hm&&e instanceof File}function kn(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(kn(e[r]))return!0;return!1}if(lo(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return kn(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&kn(e[r]))return!0;return!1}function cm(e){const t=[],r=e.data,n=e;return n.data=xs(r,t),n.attachments=t.length,{packet:n,buffers:t}}function xs(e,t){if(!e)return e;if(lo(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=xs(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=xs(e[n],t));return r}return e}function dm(e,t){return e.data=Cs(e.data,t),e.attachments=void 0,e}function Cs(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Cs(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Cs(e[r],t));return e}const oh=5;var V;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(V||(V={}));class pm{constructor(t){this.replacer=t}encode(t){return(t.type===V.EVENT||t.type===V.ACK)&&kn(t)?(t.type=t.type===V.EVENT?V.BINARY_EVENT:V.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===V.BINARY_EVENT||t.type===V.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=cm(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}class uo extends ie{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t),r.type===V.BINARY_EVENT||r.type===V.BINARY_ACK?(this.reconstructor=new _m(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(lo(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(V[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===V.BINARY_EVENT||n.type===V.BINARY_ACK){const s=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(s,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const s=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(s,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const s=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(s,r+1))}if(t.charAt(++r)){const s=this.tryParse(t.substr(r));if(uo.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case V.CONNECT:return typeof r=="object";case V.DISCONNECT:return r===void 0;case V.CONNECT_ERROR:return typeof r=="string"||typeof r=="object";case V.EVENT:case V.BINARY_EVENT:return Array.isArray(r)&&r.length>0;case V.ACK:case V.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class _m{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=dm(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var gm=Object.freeze({__proto__:null,protocol:oh,get PacketType(){return V},Encoder:pm,Decoder:uo});function ke(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const vm=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ho extends ie{constructor(t,r,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ke(t,"open",this.onopen.bind(this)),ke(t,"packet",this.onpacket.bind(this)),ke(t,"error",this.onerror.bind(this)),ke(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(vm.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');r.unshift(t);const n={type:V.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const o=this.ids++,a=r.pop();this._registerAckCallback(o,a),n.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){const n=this.flags.timeout;if(n===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);r.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...s)=>{this.io.clearTimeoutFn(i),r.apply(this,[null,...s])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:V.CONNECT,data:t})}):this.packet({type:V.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case V.CONNECT:if(t.data&&t.data.sid){const i=t.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case V.EVENT:case V.BINARY_EVENT:this.onevent(t);break;case V.ACK:case V.BINARY_ACK:this.onack(t);break;case V.DISCONNECT:this.ondisconnect();break;case V.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:V.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:V.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function pr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}pr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};pr.prototype.reset=function(){this.attempts=0};pr.prototype.setMin=function(e){this.ms=e};pr.prototype.setMax=function(e){this.max=e};pr.prototype.setJitter=function(e){this.jitter=e};class Bn extends ie{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Vn(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new pr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||gm;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new st(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=ke(r,"open",function(){n.onopen(),t&&t()}),s=ke(r,"error",o=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",o),t?t(o):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&i();const a=this.setTimeoutFn(()=>{i(),r.close(),r.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(i),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ke(t,"ping",this.onping.bind(this)),ke(t,"data",this.ondata.bind(this)),ke(t,"error",this.onerror.bind(this)),ke(t,"close",this.onclose.bind(this)),ke(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){ih(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n||(n=new ho(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Sr={};function Rt(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=am(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=Sr[i]&&s in Sr[i].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return a?l=new Bn(n,t):(Sr[i]||(Sr[i]=new Bn(n,t)),l=Sr[i]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Rt,{Manager:Bn,Socket:ho,io:Rt,connect:Rt});var mm=Object.freeze({__proto__:null,Manager:Bn,Socket:ho,io:Rt,connect:Rt,default:Rt,protocol:oh});const ym=ed();var co=Mu({name:"vue-webrtc",components:{},data(){return{signalClient:null,videoList:[],canvas:null,socket:null}},props:{roomId:{type:String,default:"public-room-v2"},socketURL:{type:String,default:"https://weston-vue-webrtc-lobby.azurewebsites.net"},cameraHeight:{type:[Number,String],default:160},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},enableAudio:{type:Boolean,default:!0},enableVideo:{type:Boolean,default:!0},enableLogs:{type:Boolean,default:!1},peerOptions:{type:Object,default(){return{}}},ioOptions:{type:Object,default(){return{rejectUnauthorized:!1,transports:["polling","websocket"]}}},deviceId:{type:String,default:null}},watch:{},mounted(){},methods:{async join(){var e=this;this.log("join"),this.socket=Rt(this.socketURL,this.ioOptions),this.signalClient=new ym(this.socket);let t={video:e.enableVideo,audio:e.enableAudio};e.deviceId&&e.enableVideo&&(t.video={deviceId:{exact:e.deviceId}});const r=await navigator.mediaDevices.getUserMedia(t);this.log("opened",r),this.joinedRoom(r,!0),this.signalClient.once("discover",n=>{e.log("discovered",n);async function i(s){if(s!=e.socket.id)try{e.log("Connecting to peer");const{peer:o}=await e.signalClient.connect(s,e.roomId,e.peerOptions);e.videoList.forEach(a=>{a.isLocal&&e.onPeer(o,a.stream)})}catch{e.log("Error connecting to peer")}}n.peers.forEach(s=>i(s)),e.$emit("opened-room",e.roomId)}),this.signalClient.on("request",async n=>{e.log("requested",n);const{peer:i}=await n.accept({},e.peerOptions);e.log("accepted",i),e.videoList.forEach(s=>{s.isLocal&&e.onPeer(i,s.stream)})}),this.signalClient.discover(e.roomId)},onPeer(e,t){var r=this;r.log("onPeer"),e.addStream(t),e.on("stream",n=>{r.joinedRoom(n,!1),e.on("close",()=>{var i=[];r.videoList.forEach(function(s){s.id!==n.id&&i.push(s)}),r.videoList=i,r.$emit("left-room",n.id)}),e.on("error",i=>{r.log("peer error ",i)})})},joinedRoom(e,t){var r=this;if(r.videoList.find(i=>i.id===e.id)===void 0){let i={id:e.id,muted:t,stream:e,isLocal:t};r.videoList.push(i)}setTimeout(function(){for(var i=0,s=r.$refs.videos.length;i<s;i++)if(r.$refs.videos[i].id===e.id){r.$refs.videos[i].srcObject=e;break}},500),r.$emit("joined-room",e.id)},leave(){this.videoList.forEach(e=>e.stream.getTracks().forEach(t=>t.stop())),this.videoList=[],this.signalClient.peers().forEach(e=>e.removeAllListeners()),this.signalClient.destroy(),this.signalClient=null,this.socket.destroy(),this.socket=null},capture(){return this.getCanvas().toDataURL(this.screenshotFormat)},getCanvas(){let e=this.$refs.videos[0];if(e!==null&&!this.ctx){let n=document.createElement("canvas");n.height=e.clientHeight,n.width=e.clientWidth,this.canvas=n,this.ctx=n.getContext("2d")}const{ctx:t,canvas:r}=this;return t.drawImage(e,0,0,r.width,r.height),r},async shareScreen(){var e=this;if(navigator.mediaDevices==null){e.log("Error: https is required to load cameras");return}try{var t=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!1});this.joinedRoom(t,!0),e.$emit("share-started",t.id),e.signalClient.peers().forEach(r=>e.onPeer(r,t))}catch(r){e.log("Media error: "+JSON.stringify(r))}},log(e,t){this.enableLogs&&(console.log(e),t!=null&&console.log(t))}}});const bm={class:"video-list"},wm=["video"],Em=["height","muted","id"];function Sm(e,t,r,n,i,s){return Sn(),Rn("div",bm,[(Sn(!0),Rn(Cg,null,kg(e.videoList,o=>(Sn(),Rn("div",{video:o,key:o.id,class:"video-item"},[tt("video",{controls:"",autoplay:"",playsinline:"",ref_for:!0,ref:"videos",height:e.cameraHeight,muted:o.muted,id:o.id},null,8,Em)],8,wm))),128))])}function ah(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var Rm=`
.video-list[data-v-41044b41] {\r
        background: whitesmoke;\r
        height: auto;\r
        display: flex;\r
        flex-direction: row;\r
        justify-content: center;\r
        flex-wrap: wrap;
}
.video-list div[data-v-41044b41] {\r
            padding: 0px;
}
.video-item[data-v-41044b41] {\r
        background: #c5c4c4;\r
        display: inline-block;
}\r
`;ah(Rm);co.render=Sm;co.__scopeId="data-v-41044b41";var po=Mu({name:"VueWebrtcSample",data(){return{counter:5,initCounter:5,message:{action:null,amount:null}}},computed:{changedBy(){const{message:e}=this;return e.action?`${e.action} ${e.amount||""}`.trim():"initialized"}},methods:{increment(e){const t=typeof e!="number"?1:e;this.counter+=t,this.message.action="incremented by",this.message.amount=t},decrement(e){const t=typeof e!="number"?1:e;this.counter-=t,this.message.action="decremented by",this.message.amount=t},reset(){this.counter=this.initCounter,this.message.action="reset",this.message.amount=null}}});const Tm={class:"vue-webrtc-sample"};function xm(e,t,r,n,i,s){return Sn(),Rn("div",Tm,[tt("p",null,[vf("The counter was "+mf(e.changedBy)+" to ",1),tt("b",null,mf(e.counter),1),vf(".")]),tt("button",{onClick:t[0]||(t[0]=function(){return e.increment&&e.increment(...arguments)})}," Click +1 "),tt("button",{onClick:t[1]||(t[1]=function(){return e.decrement&&e.decrement(...arguments)})}," Click -1 "),tt("button",{onClick:t[2]||(t[2]=o=>e.increment(5))}," Click +5 "),tt("button",{onClick:t[3]||(t[3]=o=>e.decrement(5))}," Click -5 "),tt("button",{onClick:t[4]||(t[4]=function(){return e.reset&&e.reset(...arguments)})}," Reset ")])}var Cm=`
.vue-webrtc-sample[data-v-3020e3b4] {\r
    display: block;\r
    width: 400px;\r
    margin: 25px auto;\r
    border: 1px solid #ccc;\r
    background: #eaeaea;\r
    text-align: center;\r
    padding: 25px;
}
.vue-webrtc-sample p[data-v-3020e3b4] {\r
    margin: 0 0 1em;
}\r
`;ah(Cm);po.render=xm;po.__scopeId="data-v-3020e3b4";window.io=mm;var km=Object.freeze({__proto__:null,VueWebRTC:co,VueWebrtcSample:po});const Lm=function(t){Object.entries(km).forEach(r=>{let[n,i]=r;t.component(n,i)})};export{co as VueWebRTC,po as VueWebrtcSample,Lm as default};
